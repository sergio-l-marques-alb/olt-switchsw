#
#######################################################################
##
## Module: pq2pro.cfg
##
## Function:  
##      This file defines the make rules and variables used to
##      build LVL7 software components from source code for
##      PQ3 MPC8544 based target.
##
##      The file is included by all component make files.
##
#######################################################################

CPU_TYPE= -DLVL7_PQ500MC

#0x00502040
L7_MODEL_ID=5251136

#CPU_FLAGS=$(CPU_TYPE) -DSERVICE_PORT_PRESENT=1 -mstrict-align \
#	-DL7_STACK_USAGE_STATS -Wno-pointer-sign -mhard-float \
#	-DLVL7_DEBUG_BREAKIN \
#	-m32 \
#	-Wno-unused-but-set-variable -Wno-enum-compare -Wno-address -Wno-sequence-point -Wno-switch
# -Wno-unused-variable -Wno-maybe-uninitialized \

# Define sysroot if necessary (if toolchain demands)
SYSROOT=--sysroot=/opt/fsl-qoriq/1.9/sysroots/ppce500mc-fsl-linux

CPU_FLAGS=$(CPU_TYPE) -DSERVICE_PORT_PRESENT=1 -mstrict-align \
	-DL7_STACK_USAGE_STATS \
	-DLVL7_DEBUG_BREAKIN \
	$(SYSROOT) \
	-Wno-unused-but-set-variable -Wno-enum-compare -Wno-address -Wno-sequence-point -Wno-switch \
	-Wno-aggressive-loop-optimizations -Wno-sizeof-pointer-memaccess -Wno-unused-local-typedefs -Wno-unused-value -Wno-cpp \
	-m32 -O2 -fno-strict-aliasing -fno-common -mhard-float -pipe -ffixed-r2 -mno-altivec -funit-at-a-time -fomit-frame-pointer -Wa,-me500mc
#    -D__KERNEL__ -m32 -Wall -Wundef -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -mhard-float -pipe -ffixed-r2 -mmultiple -mno-altivec -funit-at-a-time -fomit-frame-pointer 
#-Wa,-me500mc -Wdeclaration-after-statement -Wno-pointer-sign
# -mmultiple

CFLAGSLOCAL= 

PRODUCT_TYPE:= -DL7_PRODUCT_ENTERPRISE
optLevel:= 

ifeq (1,$(BLD_L7_PRODUCT_SMB))
  PRODUCT_TYPE:= -DL7_PRODUCT_SMB
  optLevel:=
endif  

ifeq (1,$(BLD_L7_PRODUCT_SMARTPATH))
  PRODUCT_TYPE:= -DL7_PRODUCT_SMARTPATH
  optLevel:= -Os
endif  

ifeq (1,$(BLD_L7_PRODUCT_ENTERPRISE))
  CPU_FLAGS += -mlongcall
endif

export CPU_TYPE PRODUCT_TYPE L7_MODEL_ID CPU_FLAGS
