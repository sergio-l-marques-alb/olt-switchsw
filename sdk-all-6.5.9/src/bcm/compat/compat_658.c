/*
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 * $Id: $
 * $Copyright: (c) 2016 Broadcom.
 * Broadcom Proprietary and Confidential. All rights reserved.$
 *
 * File:    compat_658.c
 * Purpose: RPC Compatibility with sdk-6.5.8 routines
 * Generator:   mkdispatch 1.54
 */


#ifdef  BCM_RPC_SUPPORT

#include <shared/alloc.h>
#include <bcm/types.h>
#include <bcm/error.h>

#include <bcm_int/compat/compat_658.h>
#include <bcm_int/compat/compat_658_convert.h>

#include <bcm/ecn.h>
#include <bcm/field.h>
#include <bcm/mpls.h>
#include <bcm/oam.h>
#include <bcm/policer.h>
#include <bcm/port.h>
#include <bcm/rx.h>
#include <bcm/stat.h>
#include <bcm/trunk.h>
#include <bcm/types.h>
#include <shared/phyconfig.h>
#include <shared/phyreg.h>
#include <shared/port.h>
#include <shared/port_ability.h>
#include <shared/portmode.h>
#include <shared/switch.h>



int
bcm_compat658_stat_lif_counting_profile_get (
    int unit,
    uint32 flags,
    int lif_counting_profile,
    bcm_compat658_stat_lif_counting_t *lif_counting )
{
    int rv = BCM_E_NONE;
    bcm_stat_lif_counting_t *lif_counting_mem = NULL;

    if (lif_counting != NULL) {
        lif_counting_mem = (bcm_stat_lif_counting_t *) sal_alloc(
                           sizeof(bcm_stat_lif_counting_t),
                           "rpc lif_counting");
        if (lif_counting_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_stat_lif_counting_profile_get(unit, flags, lif_counting_profile, lif_counting_mem);

    if ((rv == BCM_E_NONE) && (lif_counting_mem != NULL)) {
        rv = _bcm_compat658out_stat_lif_counting_t(lif_counting_mem, lif_counting);
    }

    if (lif_counting_mem != NULL) {
        sal_free(lif_counting_mem);
    }

    return rv;
}


int
bcm_compat658_stat_lif_counting_profile_set (
    int unit,
    uint32 flags,
    int lif_counting_profile,
    bcm_compat658_stat_lif_counting_t *lif_counting )
{
    int rv = BCM_E_NONE;
    bcm_stat_lif_counting_t *lif_counting_mem = NULL;

    if (lif_counting != NULL) {
        lif_counting_mem = (bcm_stat_lif_counting_t *) sal_alloc(
                           sizeof(bcm_stat_lif_counting_t),
                           "rpc lif_counting");
        if (lif_counting_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_stat_lif_counting_t(lif_counting, lif_counting_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_stat_lif_counting_profile_set(unit, flags, lif_counting_profile, lif_counting_mem);
    }

    if (lif_counting_mem != NULL) {
        sal_free(lif_counting_mem);
    }

    return rv;
}


int
bcm_compat658_stat_lif_counting_stack_level_priority_get (
    int unit,
    uint32 flags,
    bcm_compat658_stat_lif_counting_source_t *source,
    bcm_stat_counter_lif_stack_id_t lif_stack_level,
    int *priority )
{
    int rv = BCM_E_NONE;
    bcm_stat_lif_counting_source_t *source_mem = NULL;

    if (source != NULL) {
        source_mem = (bcm_stat_lif_counting_source_t *) sal_alloc(
                     sizeof(bcm_stat_lif_counting_source_t),
                     "rpc source");
        if (source_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_stat_lif_counting_source_t(source, source_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_stat_lif_counting_stack_level_priority_get(unit, flags, source_mem, lif_stack_level, priority);
    }

    if (source_mem != NULL) {
        sal_free(source_mem);
    }

    return rv;
}


int
bcm_compat658_stat_counter_get (
    int unit,
    uint32 flags,
    bcm_stat_counter_input_data_t *stat_counter_input_data,
    bcm_stat_counter_output_data_t *stat_counter_output_data )
{
    return BCM_E_UNAVAIL;
}


int
bcm_compat658_stat_lif_counting_stack_level_priority_set (
    int unit,
    uint32 flags,
    bcm_compat658_stat_lif_counting_source_t *source,
    bcm_stat_counter_lif_stack_id_t lif_stack_level,
    int priority )
{
    int rv = BCM_E_NONE;
    bcm_stat_lif_counting_source_t *source_mem = NULL;

    if (source != NULL) {
        source_mem = (bcm_stat_lif_counting_source_t *) sal_alloc(
                     sizeof(bcm_stat_lif_counting_source_t),
                     "rpc source");
        if (source_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_stat_lif_counting_source_t(source, source_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_stat_lif_counting_stack_level_priority_set(unit, flags, source_mem, lif_stack_level, priority);
    }

    if (source_mem != NULL) {
        sal_free(source_mem);
    }

    return rv;
}


int
bcm_compat658_trunk_set (
    int unit,
    bcm_trunk_t tid,
    bcm_compat658_trunk_info_t *trunk_info,
    int member_count,
    bcm_trunk_member_t *member_array )
{
    int rv = BCM_E_NONE;
    bcm_trunk_info_t *trunk_info_mem = NULL;

    if (trunk_info != NULL) {
        trunk_info_mem = (bcm_trunk_info_t *) sal_alloc(
                         sizeof(bcm_trunk_info_t),
                         "rpc trunk_info");
        if (trunk_info_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_trunk_info_t(trunk_info, trunk_info_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_trunk_set(unit, tid, trunk_info_mem, member_count, member_array);
    }

    if (trunk_info_mem != NULL) {
        sal_free(trunk_info_mem);
    }

    return rv;
}


int
bcm_compat658_trunk_get (
    int unit,
    bcm_trunk_t tid,
    bcm_compat658_trunk_info_t *t_data,
    int member_max,
    bcm_trunk_member_t *member_array,
    int *member_count )
{
    int rv = BCM_E_NONE;
    bcm_trunk_info_t *t_data_mem = NULL;

    if (t_data != NULL) {
        t_data_mem = (bcm_trunk_info_t *) sal_alloc(
                     sizeof(bcm_trunk_info_t),
                     "rpc t_data");
        if (t_data_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_trunk_get(unit, tid, t_data_mem, member_max, member_array, member_count);

    if ((rv == BCM_E_NONE) && (t_data_mem != NULL)) {
        rv = _bcm_compat658out_trunk_info_t(t_data_mem, t_data);
    }

    if (t_data_mem != NULL) {
        sal_free(t_data_mem);
    }

    return rv;
}


int
bcm_compat658_oam_endpoint_get (
    int unit,
    bcm_oam_endpoint_t endpoint,
    bcm_compat658_oam_endpoint_info_t *endpoint_info )
{
    int rv = BCM_E_NONE;
    bcm_oam_endpoint_info_t *endpoint_info_mem = NULL;

    if (endpoint_info != NULL) {
        endpoint_info_mem = (bcm_oam_endpoint_info_t *) sal_alloc(
                            sizeof(bcm_oam_endpoint_info_t),
                            "rpc endpoint_info");
        if (endpoint_info_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_oam_endpoint_get(unit, endpoint, endpoint_info_mem);

    if ((rv == BCM_E_NONE) && (endpoint_info_mem != NULL)) {
        rv = _bcm_compat658out_oam_endpoint_info_t(endpoint_info_mem, endpoint_info);
    }

    if (endpoint_info_mem != NULL) {
        sal_free(endpoint_info_mem);
    }

    return rv;
}


int
bcm_compat658_oam_endpoint_create (
    int unit,
    bcm_compat658_oam_endpoint_info_t *endpoint_info )
{
    int rv = BCM_E_NONE;
    bcm_oam_endpoint_info_t *endpoint_info_mem = NULL;

    if (endpoint_info != NULL) {
        endpoint_info_mem = (bcm_oam_endpoint_info_t *) sal_alloc(
                            sizeof(bcm_oam_endpoint_info_t),
                            "rpc endpoint_info");
        if (endpoint_info_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_oam_endpoint_info_t(endpoint_info, endpoint_info_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_oam_endpoint_create(unit, endpoint_info_mem);
    }

    if ((rv == BCM_E_NONE) && (endpoint_info_mem != NULL)) {
        rv = _bcm_compat658out_oam_endpoint_info_t(endpoint_info_mem, endpoint_info);
    }

    if (endpoint_info_mem != NULL) {
        sal_free(endpoint_info_mem);
    }

    return rv;
}


int
bcm_compat658_field_group_config_validate (
    int unit,
    bcm_compat658_field_group_config_t *group_config,
    bcm_field_group_mode_t *mode )
{
    int rv = BCM_E_NONE;
    bcm_field_group_config_t *group_config_mem = NULL;

    if (group_config != NULL) {
        group_config_mem = (bcm_field_group_config_t *) sal_alloc(
                           sizeof(bcm_field_group_config_t),
                           "rpc group_config");
        if (group_config_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_field_group_config_t(group_config, group_config_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_field_group_config_validate(unit, group_config_mem, mode);
    }

    if (group_config_mem != NULL) {
        sal_free(group_config_mem);
    }

    return rv;
}


int
bcm_compat658_field_group_config_create (
    int unit,
    bcm_compat658_field_group_config_t *group_config )
{
    int rv = BCM_E_NONE;
    bcm_field_group_config_t *group_config_mem = NULL;

    if (group_config != NULL) {
        group_config_mem = (bcm_field_group_config_t *) sal_alloc(
                           sizeof(bcm_field_group_config_t),
                           "rpc group_config");
        if (group_config_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_field_group_config_t(group_config, group_config_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_field_group_config_create(unit, group_config_mem);
    }

    if ((rv == BCM_E_NONE) && (group_config_mem != NULL)) {
        rv = _bcm_compat658out_field_group_config_t(group_config_mem, group_config);
    }

    if (group_config_mem != NULL) {
        sal_free(group_config_mem);
    }

    return rv;
}


#if defined(INCLUDE_L3)

int
bcm_compat658_ecn_map_get (
    int unit,
    int ecn_map_id,
    bcm_compat658_ecn_map_t *ecn_map )
{
    int rv = BCM_E_NONE;
    bcm_ecn_map_t *ecn_map_mem = NULL;

    if (ecn_map != NULL) {
        ecn_map_mem = (bcm_ecn_map_t *) sal_alloc(
                      sizeof(bcm_ecn_map_t),
                      "rpc ecn_map");
        if (ecn_map_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_ecn_map_t(ecn_map, ecn_map_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_ecn_map_get(unit, ecn_map_id, ecn_map_mem);
    }

    if ((rv == BCM_E_NONE) && (ecn_map_mem != NULL)) {
        rv = _bcm_compat658out_ecn_map_t(ecn_map_mem, ecn_map);
    }

    if (ecn_map_mem != NULL) {
        sal_free(ecn_map_mem);
    }

    return rv;
}


#endif


#if defined(INCLUDE_L3)

int
bcm_compat658_ecn_map_set (
    int unit,
    uint32 options,
    int ecn_map_id,
    bcm_compat658_ecn_map_t *ecn_map )
{
    int rv = BCM_E_NONE;
    bcm_ecn_map_t *ecn_map_mem = NULL;

    if (ecn_map != NULL) {
        ecn_map_mem = (bcm_ecn_map_t *) sal_alloc(
                      sizeof(bcm_ecn_map_t),
                      "rpc ecn_map");
        if (ecn_map_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_ecn_map_t(ecn_map, ecn_map_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_ecn_map_set(unit, options, ecn_map_id, ecn_map_mem);
    }

    if (ecn_map_mem != NULL) {
        sal_free(ecn_map_mem);
    }

    return rv;
}


#endif


int
bcm_compat658_port_config_get (
    int unit,
    bcm_compat658_port_config_t *config )
{
    int rv = BCM_E_NONE;
    bcm_port_config_t *config_mem = NULL;

    if (config != NULL) {
        config_mem = (bcm_port_config_t *) sal_alloc(
                     sizeof(bcm_port_config_t),
                     "rpc config");
        if (config_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_port_config_get(unit, config_mem);

    if ((rv == BCM_E_NONE) && (config_mem != NULL)) {
        rv = _bcm_compat658out_port_config_t(config_mem, config);
    }

    if (config_mem != NULL) {
        sal_free(config_mem);
    }

    return rv;
}


int
bcm_compat658_policer_group_mode_id_create (
    int unit,
    uint32 flags,
    bcm_policer_group_mode_type_t type,
    uint32 total_policers,
    uint32 num_selectors,
    bcm_compat658_policer_group_mode_attr_selector_t *attr_selectors,
    uint32 *mode_id )
{
    int rv = BCM_E_NONE;
    int i;
    bcm_policer_group_mode_attr_selector_t *attr_selectors_mem = NULL;

    if (attr_selectors != NULL) {
        attr_selectors_mem = (bcm_policer_group_mode_attr_selector_t *) sal_alloc(
                             num_selectors * sizeof(bcm_policer_group_mode_attr_selector_t),
                             "rpc attr_selectors");
        if (attr_selectors_mem == NULL) {
            return BCM_E_MEMORY;
        }
        for (i = 0; i < num_selectors; i++) {
            if (rv == BCM_E_NONE) {
                rv = _bcm_compat658in_policer_group_mode_attr_selector_t(&attr_selectors[i], &attr_selectors_mem[i]);
            }
        }
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_policer_group_mode_id_create(unit, flags, type, total_policers, num_selectors, attr_selectors_mem, mode_id);
    }

    if (attr_selectors_mem != NULL) {
        sal_free(attr_selectors_mem);
    }

    return rv;
}


int
bcm_compat658_policer_group_mode_id_get (
    int unit,
    uint32 mode_id,
    uint32 num_selectors,
    uint32 *flags,
    bcm_policer_group_mode_type_t *type,
    uint32 *total_policers,
    bcm_compat658_policer_group_mode_attr_selector_t *attr_selectors,
    uint32 *actual_num_selectors )
{
    int rv = BCM_E_NONE;
    int i;
    bcm_policer_group_mode_attr_selector_t *attr_selectors_mem = NULL;

    if (attr_selectors != NULL) {
        attr_selectors_mem = (bcm_policer_group_mode_attr_selector_t *) sal_alloc(
                             num_selectors * sizeof(bcm_policer_group_mode_attr_selector_t),
                             "rpc attr_selectors");
        if (attr_selectors_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_policer_group_mode_id_get(unit, mode_id, num_selectors, flags, type, total_policers, attr_selectors_mem, actual_num_selectors);

    if ((rv == BCM_E_NONE) && (attr_selectors_mem != NULL)) {
        for (i = 0; i < num_selectors; i++) {
            if (rv == BCM_E_NONE) {
                rv = _bcm_compat658out_policer_group_mode_attr_selector_t(&attr_selectors_mem[i], &attr_selectors[i]);
            }
        }
    }

    if (attr_selectors_mem != NULL) {
        sal_free(attr_selectors_mem);
    }

    return rv;
}


int
bcm_compat658_policer_create (
    int unit,
    bcm_compat658_policer_config_t *pol_cfg,
    bcm_policer_t *policer_id )
{
    int rv = BCM_E_NONE;
    bcm_policer_config_t *pol_cfg_mem = NULL;

    if (pol_cfg != NULL) {
        pol_cfg_mem = (bcm_policer_config_t *) sal_alloc(
                      sizeof(bcm_policer_config_t),
                      "rpc pol_cfg");
        if (pol_cfg_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_policer_config_t(pol_cfg, pol_cfg_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_policer_create(unit, pol_cfg_mem, policer_id);
    }

    if (pol_cfg_mem != NULL) {
        sal_free(pol_cfg_mem);
    }

    return rv;
}


int
bcm_compat658_policer_set (
    int unit,
    bcm_policer_t policer_id,
    bcm_compat658_policer_config_t *pol_cfg )
{
    int rv = BCM_E_NONE;
    bcm_policer_config_t *pol_cfg_mem = NULL;

    if (pol_cfg != NULL) {
        pol_cfg_mem = (bcm_policer_config_t *) sal_alloc(
                      sizeof(bcm_policer_config_t),
                      "rpc pol_cfg");
        if (pol_cfg_mem == NULL) {
            return BCM_E_MEMORY;
        }
        rv = _bcm_compat658in_policer_config_t(pol_cfg, pol_cfg_mem);
    }

    if (rv == BCM_E_NONE) {
        rv = bcm_policer_set(unit, policer_id, pol_cfg_mem);
    }

    if (pol_cfg_mem != NULL) {
        sal_free(pol_cfg_mem);
    }

    return rv;
}


int
bcm_compat658_policer_get (
    int unit,
    bcm_policer_t policer_id,
    bcm_compat658_policer_config_t *pol_cfg )
{
    int rv = BCM_E_NONE;
    bcm_policer_config_t *pol_cfg_mem = NULL;

    if (pol_cfg != NULL) {
        pol_cfg_mem = (bcm_policer_config_t *) sal_alloc(
                      sizeof(bcm_policer_config_t),
                      "rpc pol_cfg");
        if (pol_cfg_mem == NULL) {
            return BCM_E_MEMORY;
        }
    }

    rv = bcm_policer_get(unit, policer_id, pol_cfg_mem);

    if ((rv == BCM_E_NONE) && (pol_cfg_mem != NULL)) {
        rv = _bcm_compat658out_policer_config_t(pol_cfg_mem, pol_cfg);
    }

    if (pol_cfg_mem != NULL) {
        sal_free(pol_cfg_mem);
    }

    return rv;
}


#endif  /* BCM_RPC_SUPPORT */

