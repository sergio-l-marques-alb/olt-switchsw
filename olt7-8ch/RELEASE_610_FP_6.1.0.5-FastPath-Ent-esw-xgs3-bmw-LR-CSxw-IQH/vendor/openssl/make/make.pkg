# Vendor makefile definitions.
#

# Local source path abbreviations (for convenience).
#
vend_ssl := vendor/openssl


# NOTE: This is vendor source that is built using a collection of
#       archive files, so no source files are defined here.
#       See corresponding file makerules.pkg for details.
#
MASTERSRC +=


# List here individual source files to be selectively EXCLUDED from the build.
#
MASTERSRC_FILE_EXCLUDE +=


# List here individual source include directories owned by this package (without the -I).
#
MASTERINC +=


# Additional source header file search paths (without the -I).
#
SRCINCPATHS +=


# Additional compiler flags.
#
# This combination of -I paths in CFLAGSEXTRA is required in order to build
# the vendor openssl code so that the correct header files are found.  Do not
# use MASTERINC or SRCINCPATHS for these paths, since they will populate
# C_INCLUDE_PATH and cause the wrong headers to be pulled in.  The openssl
# headers contained in the toolchain and/or the build machine's system
# header directories tend to be back level and can cause build problems.
#
CFLAGSEXTRA += \
	-DOPENSSL_SYSNAME_$(CONFIG_UPPER) \
	-DOPENSSL_NO_KRB5 \
	-DOPENSSL_NO_ASM \
	-DOPENSSL_IMPLEMENTS_strncasecmp \
	-I$(FP_BASE)/$(vend_ssl)/crypto \
	-I$(FP_BASE)/$(vend_ssl)/include \
	-I$(FP_BASE)/$(vend_ssl)

# For products that link with -gc-sections, this allows the linker to 
# automatically remove unreferenced code and data. 
CFLAGSEXTRA += -ffunction-sections -fdata-sections
