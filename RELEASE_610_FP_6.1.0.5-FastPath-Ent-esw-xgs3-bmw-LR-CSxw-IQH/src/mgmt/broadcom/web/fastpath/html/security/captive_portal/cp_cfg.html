<EMWEB_IF ID=USMWEB_IF_LVL_HDR_NOT_REQ>
<!--
/*********************************************************************
*
* (C) Copyright Broadcom Corporation 2001-2007
*
**********************************************************************
*
* @filename  cp_cfg.html
*
* @purpose   HTML content
*
* @comments  None
*
* @create    7/5/2007
*
* @author    rjindal
*
* @end
*
*********************************************************************/
-->
</EMWEB_IF>
emweb:/USMWEB_PAGE_DTD_HEADER_GET;
<HTML>
<HEAD>
   emweb:/USMWEB_PAGE_META_DATA_GET; <!-- Style Sheet link and Meta data     -->
   <TITLE>emweb:/USMWEB_SECURITY_OEM_STRING_GET?1952;</TITLE>

<script type='text/javascript' language='JavaScript' src='/scripts/browser.js'></script> 
<script src="/scripts/utils.js"></script>
<script type='text/javascript' language='JavaScript'>
function DisplayErrorMsg()
//******************************************************************************
//* Purpose: Display an input error message.
//* Return:  none
//******************************************************************************
{
  alert(document.forms[0].err_msg.value);
}

function check_error()
{
  if (document.forms[0].err_flag.value == 1)
  {
    DisplayErrorMsg();
  }
 <EMWEB_IF ID=USMWEB_IF_READWRITE>
  <EMWEB_IF ID=USMWEB_IF_MAX_CP_CONFIG_REACHED>
  document.forms[0].Add.disabled = true;
  </EMWEB_IF>
 <EMWEB_ELSE>
  disableAll();
  document.forms[0].Refresh.disabled = false;
 </EMWEB_IF>
}

function cpConfig_check()
{
  count = 0;
  for (var i=0; i<document.forms[0].elements.length; i++)
  {
    if (document.forms[0].elements[i].checked == true)
	{
      count++;
	}
  }
 <EMWEB_IF ID=USMWEB_MORE_THAN_ONE_CP_CONFIG>
  document.forms[0].Delete.disabled = false;
 </EMWEB_IF>
}

function cpConfig_name_check()
{
  if (document.forms[0].cpConfig_name.value.length == 0)
    alert("Error: Please enter a valid CP Configuration name.");
  else
    document.forms[0].submit();
}

function delete_check()
{
  count = 0;
  for (var i=0; i<document.forms[0].elements.length; i++)
  {
    if (document.forms[0].elements[i].checked == true)
    {
      if (i == 0)
      {
        alert("Error! Default CP Configuration cannot be deleted.");
        return false;
      }
      else
        count++;
    }
  }

  if (count == 1)
    var prompt = window.confirm("Are you sure you want to delete the CP configuration?");
  else
    var prompt = window.confirm("Are you sure you want to delete these CP configurations?");

  if (prompt)
  {
    document.forms[0].refresh_in_progress.value = 1;
    document.forms[0].refresh_key.value = 1;
    document.forms[0].submit();
  }
}
</script>
</HEAD>

<BODY class="bodyframeattributes" onload="check_error()">
<FORM method="post" EMWEB_NAME="cpCfg">

<!-- ----------------------------------------------------------------------- -->
<!--         Tabbed Navigation                                               -->
<!-- ----------------------------------------------------------------------- -->
emweb:/USMWEB_TABS_CP_CONFIGURATION?0;

<!-- ----------------------------------------------------------------------- -->
<!--         Web page header                                                 -->
<!-- ----------------------------------------------------------------------- -->
emweb:/USMWEB_SECURITY_PAGE_HEADER_1ST_GET?1952;   <!-- Includes page title          -->
emweb:/USMWEB_SECURITY_PAGE_HEADER_2ND_GET?2752;   <!-- Includes help page link      -->


<TABLE CLASS="tablecontent" emweb:/USMWEB_TABLE_CONTENT_ALIGN;>

  <TR>
  <TD>
  <TABLE cellpadding="0" cellspacing="0" width="100%">

  <THEAD>
  <TR>
      <TH nowrap></TH> <!-- checkbox -->
      <TH class="datatableheading">emweb:/USMWEB_SECURITY_GET_NLS_STRING?1350;</TH> <!-- Configuration -->
      <TH class="datatableheading">emweb:/USMWEB_SECURITY_GET_NLS_STRING?11122;</TH> <!-- Mode -->
      <TH class="datatableheading">emweb:/USMWEB_SECURITY_GET_NLS_STRING?1548;</TH> <!-- Protocol -->
      <TH class="datatableheading">emweb:/USMWEB_SECURITY_GET_NLS_STRING?27129;</TH> <!-- Verification -->
      <TH class="datatableheading">emweb:/USMWEB_SECURITY_GET_NLS_STRING?27130;</TH> <!-- Languages -->
  </TR>
  </THEAD>

  <EMWEB_REPEAT name=cpConfigs EMWEB_MAX=256 C='return usmCPConfigListCount();'>
  <TR align="center">
  <TR>
  <TD emweb:/USMWEB_BUTTON_ALIGN; nowrap><input type="checkbox" name="cpConfigChk" value="0" onclick="cpConfig_check()"></TD>
      <EMWEB_STRING C='
      static cpId_t cpId;

      if (ewsContextRepetition(ewsContext) == 0)
        cpId = 0;
      if (usmDbCpdmCPConfigNextGet(cpId, &cpId) == L7_SUCCESS)
        return usmWebCPConfigurationGet(cpId);
      return L7_NULLPTR;
      '>
  <TD><input type="hidden" name="cpConfig_id" EMWEB_TYPE=DECIMAL_UINT value="0"></TD>
  </TR>
  </EMWEB_REPEAT>

  <TR><TD>&nbsp;</TD></TR>

  <TR>
  <TD nowrap width="1%"></TD>
  <TD align="left" colspan="3" nowrap><BR>
      <input class="inputfield" type="text" name="cpConfig_name" size="33" MAXLENGTH=32>
      <input type="submit" name="Add" value="Add">
  </TD>
  </TR>

  <TR>
  <TD colspan=6 emweb:/USMWEB_BUTTON_ALIGN;><BR>
    <EMWEB_IF ID=USMWEB_MORE_THAN_ONE_CP_CONFIG>
    <input class="buttonattributes" type="submit" name="Delete" value="Delete" onclick='delete_check()' disabled>
    </EMWEB_IF>
    <input class="buttonattributes" type="submit" name="Refresh" value="Refresh">
  </TD>
  </TR>

  </TABLE>
  </TD>
  </TR>

</TABLE>

<INPUT TYPE="hidden" NAME="err_flag" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT value="">
<INPUT TYPE="hidden" NAME="err_msg" SIZE="128" MAXLENGTH="127">
<INPUT TYPE="hidden" NAME="refresh_in_progress" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" NAME="refresh_key" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT>

<!-- ----------------------------------- -->
<!--         Web page footer             -->
<!-- ----------------------------------- -->
 emweb:/USMWEB_PAGE_FOOTER_GET;

<!-- ----------------------------------- -->
<!--     Check Read/Write Privileges     -->
<!-- ----------------------------------- -->
<EMWEB_IF ID=USMWEB_IF_READWRITE>
<EMWEB_ELSE>
<script type='text/javascript' language='JavaScript'>
  disableAll();
  document.forms[0].Refresh.disabled = false;
</script>
</EMWEB_IF>

</FORM>
</BODY>
</HTML>

