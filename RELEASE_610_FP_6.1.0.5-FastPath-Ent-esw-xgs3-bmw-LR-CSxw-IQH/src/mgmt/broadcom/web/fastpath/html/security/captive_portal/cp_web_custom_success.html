<EMWEB_IF ID=USMWEB_IF_LVL_HDR_NOT_REQ>
<!--
/*********************************************************************
*
* (C) Copyright Broadcom Corporation 2001-2007
*
**********************************************************************
*
* @filename  cp_web_custom_success.html
*
* @purpose   HTML iframe content
*
* @comments  None
*
* @create    1/06/2009
*
* @author    darsen
*
* @end
*
*********************************************************************/
-->
</EMWEB_IF>
emweb:/USMWEB_PAGE_DTD_HEADER_GET;
<HTML>
<HEAD>
   emweb:/USMWEB_PAGE_META_DATA_GET; <!-- Style Sheet link and Meta data     -->
</HEAD>

<BODY CLASS="tablecontentnowidth" onload="onLoad();">

<script type='text/javascript' src="/scripts/PopupWindow.js"></script>
<script type='text/javascript' src="/scripts/cp_web_custom.js"></script>

<script type="text/javascript" language="JavaScript">

<EMWEB_IF C='return (usmWebCPWebFormObjectEnabled(ewsContext,CP_FORM_OBJ_USER_LOGOUT))?"":NULL;'>
var fLogoutEnabled = true;
<EMWEB_ELSE>
var fLogoutEnabled = false;
</EMWEB_IF>

function onLoad()
{
  var h = "210px";
  checkError();
  setDirty(SUCCESS_PAGE,false);

  if (!fLogoutEnabled)
  {
    document.getElementById('logout_success_branding_label').style.color = DISABLE_COLOR;
    document.getElementById('logout_success_background_label').style.color = DISABLE_COLOR;
    document.getElementById('logout_success_browser_label').style.color = DISABLE_COLOR;
    document.getElementById('logout_success_title_label').style.color = DISABLE_COLOR;
    document.getElementById('logout_success_instruct_label').style.color = DISABLE_COLOR;
    document.getElementById('logout_success_background_label').title = logoutDisabledNote;
    document.getElementById('logout_success_browser_label').title = logoutDisabledNote;
    document.getElementById('logout_success_title_label').title = logoutDisabledNote;
    document.getElementById('logout_success_instruct_label').title = logoutDisabledNote;
  }
  document.getElementById('cp_success_branding_image').disabled = true;
  document.getElementById('logout_success_branding_label').title = globalNote;
  if (currentDPI>defaultDPI) h = "250px"; // attempt to fudge msie DPI scaling
  parent.document.getElementById('page_frame').height = h;
}

function translate()
{
  setDirty(SUCCESS_PAGE,false);
  document.forms[0].cp_logout_success_browser_title_hex.value = l2h(document.forms[0].cp_logout_success_browser_title.value);
  document.forms[0].cp_logout_success_page_title_hex.value    = l2h(document.forms[0].cp_logout_success_page_title.value);
  document.forms[0].cp_logout_success_instruct_hex.value      = l2h(document.forms[0].cp_logout_success_instruct_text.value);
  document.forms[0].cp_logout_success_image.value = document.forms[0].sel_logout_success_image.options[document.forms[0].sel_logout_success_image.selectedIndex].text;
}

function showPreview()
{
  var url = "";
  var widthHeight = "";
  var title = "";

  url = "cp_success.html?p1="+CP_PREVIEW;
  url += "&p2=" + document.forms[0].cpId.value;
  url += "&p3=" + document.forms[0].webId.value;
  widthHeight = "resizable=1,width=320,height=230";
  title = SUCCESS_PAGE;

  window.open(url,title,widthHeight);
}

//******************************************************************************
//* Purpose: Instantiate the ImagePicker object and set its properties
//* Return:  none
//******************************************************************************
var ip = new ImagePicker(); // DIV style
ip.autoHide();

//******************************************************************************
//* Purpose: Save the params as global and set the pop position because MSIE
//* has a problem with the Z position.
//* Return:  none
//******************************************************************************
function popupImageActivate(vis,val,src)
{
  ipVisual = vis;
  ipValue = val;

  ip.clear();
  var sel = document.getElementById(ipVisual);
  for (var i=0; i<sel.length; i++)
  {
    var val = sel.options[i].value;
    if (val != NO_SELECTION)
    {
	  var b = ((val == ACCOUNTING_IMAGE) ||
               (val == BACKGROUND_IMAGE)  ||
               (val == BRANDING_IMAGE))?true:false;
	  if (b)
	  {
        ip.add("/images/" + val);
	  }
	  else
	  {
        ip.add("/filesystem/ramcp/" + val);
	  }
    }
  }

  ip.run();
  ip.show(src);
}

//******************************************************************************
//* Purpose: This function is overwritten and called from the ImagePicker object
//* Return:  none
//******************************************************************************
function pickImage(image)
{
  var imageName = image.slice(image.lastIndexOf('/')+1);
  var selObj = document.getElementById(ipVisual);
  
  for (var i=0; i<selObj.length; i++)
  {
    if (selObj.options[i].value == imageName)
	{
	  selObj.selectedIndex = i;
    }
  }
  setDirty(SUCCESS_PAGE,true);
}

</script>

<SCRIPT LANGUAGE="JavaScript">ip.writeDiv()</SCRIPT>

<FORM CLASS="tablecontent" method="post" ENCTYPE="multipart/form-data" EMWEB_NAME="cpWebCustomSuccess">

<table align="center"><tr><td>
<TABLE CLASS="tablecontent" align=CENTER>
  <TR>
    <td class="rowidentifierattributes" id="logout_success_background_label" nowrap>Background Image:</td>
    <td colspan="3" class="rowdataattributes" >
      <table class="rowdataattributes">
        <TR>
        <td class="rowdataattributes" nowrap><EMWEB_STRING C='return usmWebCPImageFileSelect(ewsContext,CP_GET_ID_LOGOUT_SUCCESS_BACKGROUND_IMAGE);'>
          <input style="width: 20px;" value="..." onChange="setDirty(SUCCESS_PAGE,true);" onClick="popupImageActivate('sel_logout_success_image','','btn_suc_img');return false;" name="btn_suc_img" id="btn_suc_img" title="Press for image pick list." type="button"></td>

        <td class="rowidentifierattributes" id="logout_success_branding_label" nowrap>Branding Image:</td><td class="rowdataattributes" nowrap><input class="buttonattributes" id="cp_success_branding_image" name="cp_success_branding_image" SIZE="29" maxlength="512" value="" type="text"></td>
        </TR>
      </table>
    </td>
  </tr>
  <TR>
    <td class="rowidentifierattributes" id="logout_success_browser_label">Browser Title:</td><td colspan="3" class="rowdataattributes"><input class="buttonattributes" name="cp_logout_success_browser_title" onchange="setDirty(SUCCESS_PAGE,true);" SIZE="85" maxlength="512" value="" type="text"></td>
  </tr>      
  <TR>
    <td class="rowidentifierattributes" id="logout_success_title_label">Title:</td><td colspan="3" class="rowdataattributes"><input class="buttonattributes" name="cp_logout_success_page_title" onchange="setDirty(SUCCESS_PAGE,true);" SIZE="85" maxlength="512" value="" type="text"></td>
  </tr>      
  <TR>
    <td class="rowidentifierattributes" id="logout_success_instruct_label">Content:</td><td colspan="3" class="rowdataattributes"><input class="buttonattributes" name="cp_logout_success_instruct_text" onchange="setDirty(SUCCESS_PAGE,true);" SIZE="85" maxlength="1024" value="" type="text"></td>
  </tr>

  <TR>
    <TD colspan="4" emweb:/USMWEB_BUTTON_ALIGN;><BR>
      <EMWEB_IF ID=USMWEB_IF_READWRITE>
      <INPUT CLASS="buttonattributes" TYPE="button" ID="Clear" NAME="Clear" VALUE="Clear" onclick="clearForm();">
      <INPUT CLASS="buttonattributes" TYPE="button" ID="Success" NAME="Success" VALUE="Preview" onclick="showPreview(this);">
      <INPUT CLASS="buttonattributes" TYPE="submit" ID="Submit" NAME="Submit" VALUE="Submit" onclick="translate();">
      <EMWEB_ELSE>
      <INPUT CLASS="buttonattributes" TYPE="submit" ID="Refresh" NAME="Refresh" VALUE="Refresh">
      </EMWEB_IF>
    </TD>
  </TR>
</table>
</TD></TR></table>

<INPUT TYPE="hidden" NAME="err_flag" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT VALUE="">
<INPUT TYPE="hidden" NAME="err_msg" SIZE="128" MAXLENGTH="127">
<INPUT TYPE="hidden" NAME="refresh_in_progress" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" NAME="refresh_key" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" NAME="cpId" VALUE="0" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" NAME="webId" VALUE="0" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" name="cp_logout_success_browser_title_hex" MAXLENGTH="512">
<INPUT TYPE="hidden" name="cp_logout_success_page_title_hex" MAXLENGTH="512">
<INPUT TYPE="hidden" name="cp_logout_success_instruct_hex" MAXLENGTH="1024">
<INPUT TYPE="hidden" name="cp_logout_success_image" SIZE="32" MAXLENGTH="32">
</FORM>
</BODY>
</HTML>

