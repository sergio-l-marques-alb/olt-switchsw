

Copyright (C) 1992-2006 by SNMP Research, Incorporated.

This software is furnished under a license and may  be  used  and
copied only in accordance with the terms of such license and with
the inclusion of the above copyright notice. This software or any
other copies thereof may not be provided or otherwise made avail-
able to any other person.  No  title  to  and  ownership  of  the
software is hereby transferred.

The information in this software is  subject  to  change  without
notice  and  should  not  be  construed  as  a commitment by SNMP
Research, Incorporated.

Restricted Rights Legend:
Use, duplication, or disclosure by the Government is subject to
restrictions as set forth in subparagraph (c)(1)(ii) of the Rights
in Technical Data and Computer Software clause at DFARS 252.227-7013;
subparagraphs (c)(4) and (d) of the Commercial Computer
Software-Restricted Rights Clause, FAR 52.227-19; and in similar
clauses in the NASA FAR Supplement and other corresponding
governmental regulations.



PROPRIETARY NOTICE

This software is an unpublished work subject to a confidentiality
agreement  and  is  protected  by copyright and trade secret law.
Unauthorized copying, redistribution or other use of this work is
prohibited.

The above notice of copyright on this source  code  product  does
not  indicate  any  actual or intended publication of such source
code.





























Sun Release 4.1                                                 1






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



NAME
     postmosy - MOSY post processor for agents


SYNOPSIS
     postmosy [ -o base | -c string | -f configfile ]  [  options
     ... ] [ *.def ]

     postmosy [ -o base ] [ -inputinfo ] [ *info.dat ]

     postmosy [ -mergeinfo ] [ *info.dat ]


DESCRIPTION
     The  postmosy  program  reads  the  concatenated  output  of
     mosy(l) and generates several files used for developing SNMP
     compliant agents.  Files generated  by  mosy(l)  (which  are
     input  files  to  postmosy  ) end with the extension `.def'.
     Zero, one, or many .def files may be supplied on the command
     line.   If no .def files are given postmosy reads from stan-
     dard input.

     Using  all  of  the  default  settings,  postmosy  generates
     snmpdefs.h, snmpinfo.dat, snmpoid.c, snmpsupp.h, snmptype.h,
     and snmppart.h.  Except for snmpinfo.dat, which  is  a  data
     file  for  management  applications,  all of these files are
     used to compile SNMP Research agents.

     All files generated by postmosy have  a  common  base  name,
     which is `snmp' by default but can be changed.

OPTIONS
     -agent
          Generate system independent (v_)  method  routines  and
          system dependent (k_) stub method routines.  These rou-
          tines are modified by the agent developer to  implement
          the MIB in the agent.

     -ansi
          Generate ANSI standard function declarations.

     -argsused
          Print ARGSUSED before generated functions.

     -c string
          Provide one line of configuration  information  on  the
          command  line.   The contents of string may be the same
          as any one line of configfile (refer to the -f option).
          This  method  of  configuration  can be used to compile
          only selected portions of the MIB.  This option  should
          not be used together with the -f or -o options.




Sun Release 4.1      Last change: 8 May 1996                    1






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



     -cache
          Add simple caching to  the  system  independent  method
          routines.  This is the default.

     -const
          Declare  the  storage   space   in   <base>part.h   and
          <base>oid.c as const.

     -f configfile
          Read configuration information  from  configfile.  This
          method  of  configuration  can  be used to compile only
          selected portions of the MIB, or it can be used to dis-
          tribute  output across multiple sets of files with dif-
          ferent base  names.   Because  the  configuration  file
          specifies  a  base  name  for output files, this option
          should not be used together with the -c or -o options.

     -include <filename>
          Generate a line in the k_<base>.stb file in the form of
          `#include  "filename"'.   If  this argument is supplied
          more than once, a line will be generated for  only  the
          last filename.

     -init
          Generate k_initialize() and k_terminate() functions  in
          the k_<base>.stb output file.

     -inputinfo
          Read files in the format of snmpinfo.dat and merge  the
          contents  to  create  a  <base>info.dat file.  Only the
          specified input files are read.

     -intel
          Move strings in <base>-mib.h and  <base>part.h  out  of
          DGROUP on Intel 808x processors.  This option cannot be
          used with the -const option.

     -late
          Generate code  to  perform  instance  registration  for
          EMANATE.

     -light <filename>
          Generate  output  consistent  with  the  usage  of  the
          -DLIGHT  flag  in  the agent.  This option reduces code
          size by removing  name-to-OID  translation  information
          from the output.

     -long
          Add `L' to D_ macro values in <base>defs.h.

     -mergeinfo
          Read files in the format of snmpinfo.dat and merge  the



Sun Release 4.1      Last change: 8 May 1996                    2






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



          contents  to create a <base>info.dat file.  In addition
          to  the   specified   input   files,   also   read   in
          snmpinfo.dat.

     -no_undo
          Do not generate undo method routines.

     -nocache
          Do not add simple caching  to  the  system  independent
          method routines.

     -nodefval
          Do not use in  the  k_<family>_set_defaults()  function
          the value of the DEFVAL clause from the MIB.

     -noinit
          Do not generate k_initialize() and k_terminate()  func-
          tions in the k_<base>.stb output file.

     -o base
          Change the base name of the output files.  The  default
          is  `snmp'.   This  option  should not be used together
          with the -c or -f options.

     -offset
          Use the SR_OFFSET macro defined in  snmpd.h  to  reduce
          the  code  size  in  the system independent method rou-
          tines.  This macro works correctly  only  on  operating
          systems  where the sizes of pointers and long types are
          identical.

     -os  Turn  on  all  flags  which  will  optimize  code  size
          (-nocache, -offset, and -noundo).

     -parser
          Use  table-driven  parser  code  for  initializing  MIB
          tables.

     -per_file_init
          Generate k_<base>_initialize()  and  k_<base>_terminate
          instead  of  k_initialize()  and  k_terminate().   This
          feature is useful to avoid name collision when multiple
          k_<base>.c files are linked together.

     -priority #
          Set the value of the priority field in  the  ObjectInfo
          structure  of <base>oid.c to #. The default priority is
          zero.

     -read_create
          Add #define  <family>_READ_CREATE  in  v_<base>.stb  so
          that  the  default  is  read-create  rather  than  than



Sun Release 4.1      Last change: 8 May 1996                    3






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



          read-write for tables.  This is  useful  for  compiling
          some  SNMPv1  MIBs,  since  SNMPv1  has  no read-create
          ACCESS clause.

     -row_status
          Use  RowStatus  TEXTUAL-CONVENTION  support   routines.
          Using  this  option provides a complete, working imple-
          mentation of the method routines  for  read-create  MIB
          tables.

     -search_table
          Generate method routines which use wrappers around  the
          table manipulation functions in lookup.c.

     -short
          Names are limited to 31 characters (useful  for  old  C
          compilers).

     -snmpmibh
          Generate the <base>-mib.h file.  In  previous  versions
          of postmosy, this file was generated by default.

     -storage_type
          Use StorageType TEXTUAL-CONVENTION support routines.

     -stubs_only
          Generate only the v_<base>.stb and k_<base>.stb files.

     -test_and_incr
          Use TestAndIncr TEXTUAL-CONVENTION support routines.

     -traps
          Generate  functions  for   sending   traps.    If   the
          NOTIFICATION-TYPE  macro in the MIB contains an OBJECTS
          clause, or if the TRAP-TYPE macro in the MIB contains a
          VARIABLES  clause,  the  VarBind  list  for the trap is
          built automatically.  The functions generated  by  this
          option send traps by calling do_trap(3).

     -userpart
          Include U_<family>  in  the  <base>type.h  file.   This
          option adds a macro to the structure defintion for each
          MIB family.  The macro can be used to add  user-defined
          internally-available data to conceptual tables.


ENVIRONMENT
     The following environment variable affects the  behavior  of
     postmosy.

     SR_MGR_CONF_DIR
          This  variable  changes  the  location  where  postmosy



Sun Release 4.1      Last change: 8 May 1996                    4






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



          expects  to  find  the snmpinfo.dat file.  This file is
          accessed when the -mergeinfo option is in effect.


FILES
     *.def
          MIB definitions files.  These files  are  generated  by
          mosy(l) and are valid input files for postmosy.

     <base>defs.h
          Contains macros for enumerated MIB object values in the
          form of `#define D_<object>_<enumeration> value'.

     <base>info.dat
          Contains name-to-OID translation  information  for  the
          MIB.   This  is  a  data  file which can be merged with
          snmpinfo.dat using the -mergeinfo option.  Merging this
          file  with  snmpinfo.dat allows management applications
          to accept the names of new MIB variables on the command
          line.

     <base>-mib.h
          Contains name-to-OID translation  information  for  the
          MIB.   This is a C source code file intended for use in
          SNMP manager  station  application  development.   This
          file is generated by the -snmpmibh option.

     <base>oid.c
          Contains information about  each  object  in  the  MIB,
          including OID structure, the object identifier in ASCII
          format (if -light is not used), MAX-ACCESS (ACCESS  for
          SNMPv1),  family  offset,  processing priority (EMANATE
          only), and associated  method  routine  pointers.   The
          format  of  the  file  is that of an initializer for an
          array of C data structures.

     <base>part.h
          Contains  data  structure   definitions   or   external
          declarations  (depending  on  the  #ifdef settings) for
          components of the OID for each object in the MIB,  with
          names in the form of `ID<object>'; also contains macros
          for each object in the  form  of  `#define  LN_<object>
          <length>'.

     <base>supp.h
          Contains macros for leaf objects in the MIB in the form
          of  `#define  I_<object>  <family offset>'.  If a macro
          from  this  file  is  undefined  in   undefs.h   by   a
          C-preprocessor  directive  `#undef I_<object>', no sup-
          port for the MIB  object  will  be  compiled  into  the
          agent.




Sun Release 4.1      Last change: 8 May 1996                    5






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



     <base>trap.stb
          Contains automatically-generated functions for  sending
          traps,     with     names     in     the     form    of
          send_<alarmName>_trap() and  i_send_<alarmName>_trap().
          This file is generated by the -traps option.

     <base>type.h
          Contains a typedef definition  of  a  structure  (named
          <family>_t) for each family of objects in the MIB; also
          contains prototypes for  system  dependent  and  system
          independent method routines.

     snmpinfo.dat
          The file containing name-to-OID translation information
          which is used by SNMP Research management applications.
          On UNIX systems, the file is normally  located  in  the
          directory  /etc/srconf/mgr/.  (On  systems delivered by
          Siemens Nixdorf, the location is  /etc/snmp/mgr.)  This
          location  can  be  changed  by  setting the environment
          variable SR_MGR_CONF_DIR.


SEE ALSO
     premosy(l), mosy(l), do_trap(3), RFCs 1155, 1157, 1212,  and
     1902-1908.


DIAGNOSTICS
     postmosy: open for read failed:
          This message indicates that one of the input files does
          not  exist  or  that  the file permissions do not allow
          postmosy to read one of the the input files.

     postmosy: bad input line:
          This message indicates that the input does not  consist
          entirely of MIB definitions.

     postmosy: process_data(), Couldn't find parent:
          This message indicates that the input does not  contain
          enough information to allow postmosy to compile the MIB
          defintions.  Usually, this is because the MIB  contains
          an  IMPORTS  clause to reference an external MIB defin-
          tion, and  the  .def  file  containing  the  referenced
          object or macro is not supplied.  Try adding v2-tc.def,
          v2-smi.def, or mib-2.def to the list of input files.

     postmosy: check_names: Duplicate name with different OID's:
          This message indicates that there is a conflict between
          objects definitions in the input.

     MakeOIDFromDot failed:
          This message will occur when using the -f option if the
          configuration  file  contains the English name of a MIB
          variable which does  not  appear  in  any  of  the  MIB



Sun Release 4.1      Last change: 8 May 1996                    6






POSTMOSY(l)       MISC. REFERENCE MANUAL PAGES        POSTMOSY(l)



          definitions  (*.def) files.  Try using additional input
          files, or change the name of the offending MIB variable
          from  English to the equivalent numeric OID representa-
          tion.

     truncating ... to ...
          This message indicates that a macro, variable, or func-
          tion  name in the output is being reduced to 31 charac-
          ters because the -short option is in effect.


LIMITATIONS
     Some features require the input .def files to be created  by
     a  version  of  mosy(l),  which  has  been  enhanced by SNMP
     Research.








































Sun Release 4.1      Last change: 8 May 1996                    7



