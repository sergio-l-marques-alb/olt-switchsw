<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
    ******************************************************
    DBAL Hard-Logic Logical Tables:
    This xml contains the hard-logic logical DB for the DBAL.
    The data is loaded to the device during init process
    ******************************************************

    DB Rules:
    *********
--><AppDbCatalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../hard_logic_schema.xsd">

    <AppDB Name="FMQ_CREDIT_WEIGHT_CONFIG" Valid="DNX_DATA.fabric.general.is_supported">  
        <OneLineDescription>Configure the distribution of credits between FMQ classes, Lower value means better priority.</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="WFQ_EN" Type="BOOL"/>
                <Field Name="CLASS_0_WEIGHT" Size="5" Type="UINT"/>
                <Field Name="CLASS_1_WEIGHT" Size="5" Type="UINT"/>
                <Field Name="CLASS_2_WEIGHT" Size="5" Type="UINT"/>
            </Result>
            <TableLabels>J2P_NOTREV IQS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="WFQ_EN">
                    <Access>
                        <Register Name="IPS_BFMC_CLASS_CONFIGr">
                            <HwField Name="BFMC_WFQ_ENf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="CLASS_0_WEIGHT">
                    <Access> <!-- field name doesn't match class index -->
                        <Register Name="IPS_BFMC_CLASS_CONFIGr">
                            <HwField Name="BFMC_CLASS_2_WEIGHTf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="CLASS_1_WEIGHT">
                    <Access> <!-- field name doesn't match class index -->
                        <Register Name="IPS_BFMC_CLASS_CONFIGr">
                            <HwField Name="BFMC_CLASS_1_WEIGHTf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="CLASS_2_WEIGHT">
                    <Access> <!-- field name doesn't match class index -->
                        <Register Name="IPS_BFMC_CLASS_CONFIGr">
                            <HwField Name="BFMC_CLASS_0_WEIGHTf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>
    
    <AppDB Name="FMQ_SHAPER_CONFIG" Valid="DNX_DATA.fabric.general.is_supported">  
        <OneLineDescription>Configure the rate generated by the FMC (Fabric MultiCast) credit generators.</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="FMQ_SHAPER_TYPE"/>
            </Key>
            <Result>
                <Field Name="CREDIT_RATE" Size="26" Type="UINT"/>
                <Field Name="MAX_BURST" Size="6" Type="UINT"/>
            </Result>
            <TableLabels>J2P_NOTREV IQS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="CREDIT_RATE">
                    <Access>
                        <KeyCondition Enum="TOP_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_TOP_SHAPER_CONFIGr">
                            <HwField Name="FMC_TOP_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="ROOT_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_SHAPER_CONFIGr">
                            <HwField Name="FMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="GUARANTEED_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_GFMC_SHAPER_CONFIGr">
                            <HwField Name="GFMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="BE_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_BFMC_SHAPER_CONFIGr">
                            <HwField Name="BFMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="MAX_BURST">
                    <Access>
                        <KeyCondition Enum="TOP_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_TOP_SHAPER_CONFIGr">
                            <HwField Name="FMC_TOP_MAX_BURSTf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="ROOT_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_SHAPER_CONFIGr">
                            <HwField Name="FMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="GUARANTEED_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_GFMC_SHAPER_CONFIGr">
                            <HwField Name="GFMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="BE_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_BFMC_SHAPER_CONFIGr">
                            <HwField Name="BFMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
        <AppToPhyDbMapping Device="J2C_A0">
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="CREDIT_RATE">                    
                    <Access>
                        <KeyCondition Enum="ROOT_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_SHAPER_CONFIGr">
                            <HwField Name="FMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="GUARANTEED_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_GFMC_SHAPER_CONFIGr">
                            <HwField Name="GFMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="BE_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_BFMC_SHAPER_CONFIGr">
                            <HwField Name="BFMC_MAX_CRDT_RATEf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="MAX_BURST">                    
                    <Access>
                        <KeyCondition Enum="ROOT_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_FMC_SHAPER_CONFIGr">
                            <HwField Name="FMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="GUARANTEED_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_GFMC_SHAPER_CONFIGr">
                            <HwField Name="GFMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Enum="BE_SHAPER" Field="FMQ_SHAPER_TYPE" Type="EQUAL_TO"/>
                        <Register Name="IPS_BFMC_SHAPER_CONFIGr">
                            <HwField Name="BFMC_MAX_BURSTf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>
    
    <AppDB Name="FMQ_GENERAL_CONFIG" Valid="DNX_DATA.fabric.general.is_supported">  
        <OneLineDescription>FMQ General settings.</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="IS_ENHANCED_MODE" Type="BOOL"/>
            </Result>
            <TableLabels>J2P_NOTREV IQS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="IS_ENHANCED_MODE">
                    <Access>
                        <Register Name="IPS_IPS_GENERAL_CONFIGURATIONSr">
                            <HwField Name="FMC_CREDITS_FROM_SCHf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>
    
    <AppDB Name="FMQ_ENHANCED_MODE_CONFIG" Valid="DNX_DATA.fabric.general.is_supported">  
        <OneLineDescription>FMQ enhanced scheduler mode configurations.</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CORE_ID"/>
                <Field Name="FMQ_ENHANCED_PORT_IDX" Size="2" Type="UINT"/>
            </Key>
            <Result>
                <Field Name="IS_HR_ID_VALID" Type="BOOL"/>
                <Field Name="HR_ID"/>
            </Result>
            <TableLabels>J2P_NOTREV IQS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="DPC"/>
            <FieldMapping>
                <Field Name="IS_HR_ID_VALID">
                    <Access>
                        <KeyCondition Field="FMQ_ENHANCED_PORT_IDX" Type="LOWER_THAN" Value="2"/>
                        <Register Name="SCH_SCH_FABRIC_MULTICAST_PORT_CONFIGURATION_REGISTER_0r">
                            <DataOffset Formula="#KEY_VALUE(FMQ_ENHANCED_PORT_IDX)*16+12"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Field="FMQ_ENHANCED_PORT_IDX" Type="BIGGER_THAN" Value="1"/>
                        <Register Name="SCH_SCH_FABRIC_MULTICAST_PORT_CONFIGURATION_REGISTER_1r">
                            <DataOffset Formula="#KEY_VALUE(FMQ_ENHANCED_PORT_IDX)*16-32+12"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="HR_ID">
                    <Access>
                        <KeyCondition Field="FMQ_ENHANCED_PORT_IDX" Type="LOWER_THAN" Value="2"/>
                        <Register Name="SCH_SCH_FABRIC_MULTICAST_PORT_CONFIGURATION_REGISTER_0r">
                            <DataOffset Formula="#KEY_VALUE(FMQ_ENHANCED_PORT_IDX)*16"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Field="FMQ_ENHANCED_PORT_IDX" Type="BIGGER_THAN" Value="1"/>
                        <Register Name="SCH_SCH_FABRIC_MULTICAST_PORT_CONFIGURATION_REGISTER_1r">
                            <DataOffset Formula="#KEY_VALUE(FMQ_ENHANCED_PORT_IDX)*16-32"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>
    
</AppDbCatalog>
