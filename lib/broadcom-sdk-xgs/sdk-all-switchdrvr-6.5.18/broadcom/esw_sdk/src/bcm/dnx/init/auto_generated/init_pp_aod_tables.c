/** \file init_pp_aod_tables.c
 * AOD table configurations
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 */
/*
 * $Id: $
 $Copyright: (c) 2019 Broadcom.
 Broadcom Proprietary and Confidential. All rights reserved.$
 *
 */

#ifdef BSL_LOG_MODULE
#error "BSL_LOG_MODULE redefined"
#endif
#define BSL_LOG_MODULE BSL_LS_BCMDNX_INITSEQDNX

#include "init_pp_aod_tables.h"
#include <bcm/types.h>
#include <bcm/init.h>
#include <soc/dnx/utils/dnx_pp_programmability_utils.h>
#include <soc/memory.h>
#include <soc/feature.h>
#include <soc/types.h>
#include <include/shared/utilex/utilex_str.h>
#include <include/shared/dbx/dbx_file.h>
#include <include/shared/dbx/dbx_xml.h>
#include <soc/dnx/dnx_data/auto_generated/dnx_data_aod.h>
#include <soc/dnx/dnx_data/auto_generated/dnx_data_pemla_soc.h>
#include <soc/dnx/dbal/dbal.h>
#include <soc/dnx/dbal/dbal_string_apis.h>

shr_error_e
dnx_pp_automatic_tables_init(
    int unit)
{
    int index;
    uint32 entry_handle_id;
    int enum_value;

    SHR_FUNC_INIT_VARS(unit);
    DBAL_FUNC_INIT_VARS(unit);

    SHR_IF_ERR_EXIT(DBAL_HANDLE_ALLOC(unit, DBAL_TABLE_ERPP_FORWARD_CODE_SELECTION, &entry_handle_id));

    for(index = 0; index < 64; index++)
    {
        const dnx_data_aod_tables_ERPP_FORWARD_CODE_SELECTION_t* table;
        int soc_value = dnx_data_pemla_soc.soc.system_headers_mode_get(unit);

        table = dnx_data_aod.tables.ERPP_FORWARD_CODE_SELECTION_get(unit, index, soc_value);
        if(table->valid)
        {
            dbal_entry_key_field32_set(unit, entry_handle_id, DBAL_FIELD_INDEX, index);
            dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_VALID, INST_SINGLE, table->valid);
            if (table->FAI_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FAI, INST_SINGLE, table->FAI);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FAI_MASK, INST_SINGLE, table->FAI_mask);
            }
            if (table->FWD_Layer_Qualifier_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_QUALIFIER, INST_SINGLE, table->FWD_Layer_Qualifier);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_QUALIFIER_MASK, INST_SINGLE, table->FWD_Layer_Qualifier_mask);
            }
            if (table->FWD_Layer_Type_valid)
            {
                if (table->FWD_Layer_Type_mask == 31)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "LAYER_TYPES", table->FWD_Layer_Type, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_TYPE, INST_SINGLE, enum_value);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_TYPE_MASK, INST_SINGLE, table->FWD_Layer_Type_mask);
            }
            if (table->FWD_code_port_profile_valid)
            {
                if (table->FWD_code_port_profile_mask == 3)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "EGRESS_FWD_CODE_PORT_PROFILE", table->FWD_code_port_profile, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_CODE_PORT_PROFILE, INST_SINGLE, enum_value);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_CODE_PORT_PROFILE_MASK, INST_SINGLE, table->FWD_code_port_profile_mask);
            }
            if (table->TM_Action_Type_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_TM_ACTION_TYPE, INST_SINGLE, table->TM_Action_Type);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_TM_ACTION_TYPE_MASK, INST_SINGLE, table->TM_Action_Type_mask);
            }
            if (table->ingress_trapped_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_INGRESS_TRAPPED, INST_SINGLE, table->ingress_trapped);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_INGRESS_TRAPPED_MASK, INST_SINGLE, table->ingress_trapped_mask);
            }
            if (table->is_Applet_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_APPLET, INST_SINGLE, table->is_Applet);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_APPLET_MASK, INST_SINGLE, table->is_Applet_mask);
            }
            if (table->is_TDM_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_TDM, INST_SINGLE, table->is_TDM);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_TDM_MASK, INST_SINGLE, table->is_TDM_mask);
            }
            if (table->Egress_FWD_Code_valid)
            {
                SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "EGRESS_FWD_CODE", table->Egress_FWD_Code, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_EGRESS_FWD_CODE, INST_SINGLE, enum_value);
            }
            SHR_IF_ERR_EXIT(dbal_entry_commit(unit, entry_handle_id, DBAL_COMMIT));
        }
    }

    SHR_IF_ERR_EXIT(DBAL_HANDLE_CLEAR(unit, DBAL_TABLE_ETPP_FORWARD_CODE_SELECTION, entry_handle_id));

    for(index = 0; index < 64; index++)
    {
        const dnx_data_aod_tables_ETPP_FORWARD_CODE_SELECTION_t* table;
        int soc_value = dnx_data_pemla_soc.soc.system_headers_mode_get(unit);

        table = dnx_data_aod.tables.ETPP_FORWARD_CODE_SELECTION_get(unit, index, soc_value);
        if(table->valid)
        {
            dbal_entry_key_field32_set(unit, entry_handle_id, DBAL_FIELD_INDEX, index);
            dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_VALID, INST_SINGLE, table->valid);
            if (table->ACE_Value_valid)
            {
                if (table->ACE_Value_mask == 3)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "ETPP_FWD_CODE_ACE_CTXT_VALUE", table->ACE_Value, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_ACE_VALUE, INST_SINGLE, enum_value);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_ACE_VALUE_MASK, INST_SINGLE, table->ACE_Value_mask);
            }
            if (table->FAI_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FAI, INST_SINGLE, table->FAI);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FAI_MASK, INST_SINGLE, table->FAI_mask);
            }
            if (table->FWD_Layer_Qualifier_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_QUALIFIER, INST_SINGLE, table->FWD_Layer_Qualifier);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_QUALIFIER_MASK, INST_SINGLE, table->FWD_Layer_Qualifier_mask);
            }
            if (table->FWD_Layer_Type_valid)
            {
                if (table->FWD_Layer_Type_mask == 31)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "LAYER_TYPES", table->FWD_Layer_Type, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_TYPE, INST_SINGLE, enum_value);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_LAYER_TYPE_MASK, INST_SINGLE, table->FWD_Layer_Type_mask);
            }
            if (table->FWD_code_port_profile_valid)
            {
                if (table->FWD_code_port_profile_mask == 3)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "EGRESS_FWD_CODE_PORT_PROFILE", table->FWD_code_port_profile, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_CODE_PORT_PROFILE, INST_SINGLE, enum_value);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_FWD_CODE_PORT_PROFILE_MASK, INST_SINGLE, table->FWD_code_port_profile_mask);
            }
            if (table->TM_Action_Type_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_TM_ACTION_TYPE, INST_SINGLE, table->TM_Action_Type);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_TM_ACTION_TYPE_MASK, INST_SINGLE, table->TM_Action_Type_mask);
            }
            if (table->ingress_trapped_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_INGRESS_TRAPPED, INST_SINGLE, table->ingress_trapped);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_INGRESS_TRAPPED_MASK, INST_SINGLE, table->ingress_trapped_mask);
            }
            if (table->is_Applet_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_APPLET, INST_SINGLE, table->is_Applet);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_APPLET_MASK, INST_SINGLE, table->is_Applet_mask);
            }
            if (table->is_TDM_valid)
            {
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_TDM, INST_SINGLE, table->is_TDM);
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_IS_TDM_MASK, INST_SINGLE, table->is_TDM_mask);
            }
            if (table->Egress_FWD_Code_valid)
            {
                SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "EGRESS_FWD_CODE", table->Egress_FWD_Code, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_EGRESS_FWD_CODE, INST_SINGLE, enum_value);
            }
            SHR_IF_ERR_EXIT(dbal_entry_commit(unit, entry_handle_id, DBAL_COMMIT));
        }
    }

    SHR_IF_ERR_EXIT(DBAL_HANDLE_CLEAR(unit, DBAL_TABLE_EGRESS_PER_LAYER_PROTOCOL, entry_handle_id));

    for(index = 0; index < 32; index++)
    {
        const dnx_data_aod_tables_EGRESS_PER_LAYER_PROTOCOL_t* table;
        int soc_value = dnx_data_pemla_soc.soc.system_headers_mode_get(unit);

        table = dnx_data_aod.tables.EGRESS_PER_LAYER_PROTOCOL_get(unit, index, soc_value);
        if(table->valid)
        {
            if (table->Layer_Types_valid)
            {
                if (table->Layer_Types_mask == 31)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "LAYER_TYPES", table->Layer_Types, &enum_value));
                dbal_entry_key_field32_set(unit, entry_handle_id, DBAL_FIELD_LAYER_TYPES, enum_value);
            }
            if (table->ERPP_1st_Parser_Parser_Context_valid)
            {
                SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "ERPP_1ST_PARSER_PARSER_CONTEXT", table->ERPP_1st_Parser_Parser_Context, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_ERPP_1ST_PARSER_PARSER_CONTEXT, INST_SINGLE, enum_value);
            }
            SHR_IF_ERR_EXIT(dbal_entry_commit(unit, entry_handle_id, DBAL_COMMIT));
        }
    }

    SHR_IF_ERR_EXIT(DBAL_HANDLE_CLEAR(unit, DBAL_TABLE_EGRESS_PARSING_CONTEXT_MAP_JR1_MODE, entry_handle_id));

    for(index = 0; index < 32; index++)
    {
        const dnx_data_aod_tables_EGRESS_PARSING_CONTEXT_MAP_JR1_MODE_t* table;
        int soc_value = dnx_data_pemla_soc.soc.system_headers_mode_get(unit);

        table = dnx_data_aod.tables.EGRESS_PARSING_CONTEXT_MAP_JR1_MODE_get(unit, index, soc_value);
        if(table->valid)
        {
            if (table->JR_FWD_CODE_valid)
            {
                if (table->JR_FWD_CODE_mask == 15)
                    enum_value = 0;
                else
                    SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "JR_FWD_CODE", table->JR_FWD_CODE, &enum_value));
                dbal_entry_key_field32_set(unit, entry_handle_id, DBAL_FIELD_JR_FWD_CODE, enum_value);
            }
            if (table->ERPP_1st_Parser_Parser_Context_valid)
            {
                SHR_IF_ERR_EXIT(dnx_dbal_fields_enum_dbal_value_get(unit, "ERPP_1ST_PARSER_PARSER_CONTEXT", table->ERPP_1st_Parser_Parser_Context, &enum_value));
                dbal_entry_value_field32_set(unit, entry_handle_id, DBAL_FIELD_ERPP_1ST_PARSER_PARSER_CONTEXT, INST_SINGLE, enum_value);
            }
            SHR_IF_ERR_EXIT(dbal_entry_commit(unit, entry_handle_id, DBAL_COMMIT));
        }
    }


exit:
    DBAL_FUNC_FREE_VARS;
    SHR_FUNC_EXIT;
}
