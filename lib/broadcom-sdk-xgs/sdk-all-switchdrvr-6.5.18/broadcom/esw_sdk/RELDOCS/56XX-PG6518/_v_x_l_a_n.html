<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: VXLAN Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">VXLAN Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>BCM56640 provides VXLAN functionality. BCM VXLAN APIs allow application developers to manage BROADCOM VXLAN features.</p>
<h1><a class="anchor" id="vxlan_overview"></a>
VXLAN Overview</h1>
<p>VXLAN is a L2 VPN technology targeted for Data-Center communication between Virtual Machines (VM) assigned to the same customer(Tenant) that are distributed in various racks in the Data-Center. L2VPN over IP/UDP tunnels can provide E-LAN (similar to VPLS). With VXLAN the Ethernet packets are encapsulated in UDP tunnels over an IP network. VXLAN uses UDP.Source_Port as multiplexing field for multiplexing multiple VPNs into the same UDP Tunnel.</p>
<p>In E-LAN, Ethernet frames of interest are also identified by incoming port plus packet header information. Ethernet frames are switched into one or more VXLAN Tunnels based on the MAC DA lookup. At the end of Tunnel, forwarding of Ethernet frames after Tunnel decapsulation is based on the VXLAN-VNID and Tunnel lookup and frames are again forwarded based on MAC-DA lookup.</p>
<p>VXLAN VPN can be of type ELAN.</p>
<p>For ELAN, a VPN is similar to a VLAN, which identifies a group of physical ports to be included in a broadcast domain. However, instead of physical ports, a ELAN VPN identifies a group of "virtual-ports" to be included in a broadcast domain. In the VXLAN APIs, a "virtual-port" is called an VXLAN port (see description below). The VPN ID is used to qualify MAC DA lookups within the VPN.</p>
<p>E-LINE service is not supported by VXLAN. E-LINE service API for VXLAN is deprecated.</p>
<h1><a class="anchor" id="vxlan_data_types"></a>
VXLAN Data Types</h1>
<ul>
<li>bcm_vpn_t is the ID that uniquely identifies Layer-2 VPN instance. bcm_vpn_t is defined as bcm_vlan_t so it can be used in APIs with bcm_vlan_t parameters (for example, bcm_l2_addr_add can be used to add ELAN L2 entries using a ELAN bcm_vpn_t value). BCM_VXLAN_VPN_INVALID specifies an Invalid VPN Instance. The VPN type can be ELAN (point-to-multipoint L2 VPN). A VPN is assigned a unique ID which is returned in the vpn field. For ELAN VPNs, the multicast group(s) for broadcast and unknown unicast/multicast must first be created using the bcm_multicast_* APIs. VXLAN VPN can be associated with a Service vnid field during VPN creation(with flag=BCM_VXLAN_VPN_WITH_VPNID).</li>
</ul>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>VXLAN VPN flags</caption>
<tr>
<td>BCM_VXLAN_VPN_ELINE </td><td>Deprecated, not supported  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_ELAN </td><td>Create ELAN VPN  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_WITH_ID </td><td>Create VPN with specified ID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_WITH_VPNID </td><td>Create VPN with specified ServiceID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_TAGGED </td><td>Create VPN with Service Tag mode  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_ADD </td><td>Create VPN to Add SD-TAG Vlan  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_REPLACE </td><td>Create VPN to Replace SD-TAG Vlan not TPID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_DELETE </td><td>Create VPN to Delete SD-TAG Vlan  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_TPID_REPLACE </td><td>Create VPN to Replace Vlan and TPID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_PRI_TPID_REPLACE </td><td>Create VPN to replace Vlan, Vlan-Pri, Vlan-Cfi and TPID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_VLAN_PRI_REPLACE </td><td>Create VPN to replace Vlan, Vlan-Pri and Vlan-Cfi  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_PRI_REPLACE </td><td>Create VPN to replace Vlan-Pri and Vlan-Cfi  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_SERVICE_TPID_REPLACE </td><td>Create VPN to replace TPID  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_REPLACE </td><td>Replace attributes of an existed VPN  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_UNKNOWN_UCAST_REPLACE </td><td>Replace unknown unicast mc-group of an existed VPN  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_UNKNOWN_MCAST_REPLACE </td><td>Replace unknown multicast mc-group of an existed VPN  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_BCAST_REPLACE </td><td>Replace broadcast mc-group of an existed VPN  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_TUNNEL_BASED_VNID </td><td>Create a VPN supporting network VP per remote VTEP(or tunnel based network VP)  </td></tr>
<tr>
<td>BCM_VXLAN_VPN_INVALID </td><td>Invalid VXLAN VPN  </td></tr>
</table>
<ul>
<li>bcm_vxlan_vpn_config_t structure can be used for configuring VXLAN vpn.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__vxlan__vpn__config__s.html">bcm_vxlan_vpn_config_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* BCM_VXLAN_VPN_xxx. */</span></div><div class="line">    <a class="code" href="group__types.html#gad0476041b742ee817043d5d0c99fc2ac">bcm_vpn_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#ab4aa203386fefc77212e8a50b58d7ca5">vpn</a>;                      <span class="comment">/* VXLAN VPN */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#aa20ab9327bdbab432a6e9e2168399524">vnid</a>;                        <span class="comment">/* VNID */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;                      <span class="comment">/* Packet Priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;                      <span class="comment">/* Packet CFI */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a1fff9352b8c83e37662b5abfa0bda831">egress_service_tpid</a>;         <span class="comment">/* Service TPID */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a1932bbe3be97a39a126950ed7442974a">egress_service_vlan</a>;     <span class="comment">/* Service VLAN */</span></div><div class="line">    <a class="code" href="group__types.html#ga0f3f07b8f11cb4e625b0f42d6cc7f94c">bcm_multicast_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a114da9007e9014c9b8cb11206e0e0163">broadcast_group</a>;</div><div class="line">    <a class="code" href="group__types.html#ga0f3f07b8f11cb4e625b0f42d6cc7f94c">bcm_multicast_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a23da875b7522ca342116c784be3cdcc1">unknown_unicast_group</a>;</div><div class="line">    <a class="code" href="group__types.html#ga0f3f07b8f11cb4e625b0f42d6cc7f94c">bcm_multicast_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#aea986011b6e84795ff6689a580e315ae">unknown_multicast_group</a>;</div><div class="line">    <a class="code" href="structbcm__vlan__protocol__packet__ctrl__s.html">bcm_vlan_protocol_packet_ctrl_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#a21488e97491ed200184d5b34530706b1">protocol_pkt</a>; <span class="comment">/* Protocol packet control */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#ab90165cd927a9ab4ab1e613e95852ade">vlan</a>;                    <span class="comment">/* Outer VLAN */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#ad96aba428436fa396c40bc69caf2352e">match_port_class</a>;       <span class="comment">/* local port vlan domain */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__vpn__config__s.html#aea00e0368bc7cbd11afe1136214eeeba">default_vlan</a>;            <span class="comment">/* default VLAN for untag payload*/</span></div><div class="line">} <a class="code" href="vxlan_8h.html#a55fdaf9bc7a70784b2bafbf1f61dd2d1">bcm_vxlan_vpn_config_t</a>;</div></div><!-- fragment --><p><a class="anchor" id="bcm_vxlan_port_t"></a></p><ul>
<li>The bcm_vxlan_port_t structure describes a VXLAN virtual port used for creating VXLAN Network endpoints.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__vxlan__port__s.html">bcm_vxlan_port_s</a> {</div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__vxlan__port__s.html#a64fd6f036b88f02024164551ec453287">vxlan_port_id</a>;          <span class="comment">/* GPORT identifier. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__vxlan__port__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* BCM_VXLAN_PORT_xxx. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__vxlan__port__s.html#a93ec8bd3b1e35ff73e12191664f035d8">if_class</a>;                    <span class="comment">/* Interface class ID. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__vxlan__port__s.html#a15df83dbc2cffdaeb851d30a1966ee46">int_pri</a>;                     <span class="comment">/* Internal Priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__port__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;                      <span class="comment">/* Packet Priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__port__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;                      <span class="comment">/* Packet CFI */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__vxlan__port__s.html#a1fff9352b8c83e37662b5abfa0bda831">egress_service_tpid</a>;         <span class="comment">/* Service Vlan TPID Value */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__port__s.html#a1932bbe3be97a39a126950ed7442974a">egress_service_vlan</a>;     <span class="comment">/* SD-TAG Vlan ID. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__vxlan__port__s.html#a2f2ea211666cb634a9f37c3222bc3bf1">mtu</a>;                         <span class="comment">/* MTU */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__vxlan__port__s.html#a8f0cfc3ce404244cbad3da9c68645a02">match_port</a>;             <span class="comment">/* Match port / trunk */</span></div><div class="line">    <a class="code" href="vxlan_8h.html#a2a17bf8a08f6675971475f414599a711">bcm_vxlan_port_match_t</a> <a class="code" href="structbcm__vxlan__port__s.html#a5af2a19bd38ca8027f82810b5eb81df6">criteria</a>;    <span class="comment">/* Match criteria */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__port__s.html#ad22679e36d7259c4d88d606c80d6d4c5">match_vlan</a>;              <span class="comment">/* Outer VLAN ID to match. */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__vxlan__port__s.html#ad4878e6cfd724f3e83cb9fab60ae73d9">match_inner_vlan</a>;        <span class="comment">/* Inner VLAN ID to match. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__vxlan__port__s.html#a65d19308b7cfba4f48673118203c96ec">egress_tunnel_id</a>;       <span class="comment">/* Tunnel Initiator ID */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__vxlan__port__s.html#aaa055f6854e2e724f5690475c8ae6dc0">match_tunnel_id</a>;        <span class="comment">/* Tunnel Terminator ID */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__vxlan__port__s.html#abb332a7a074df33554ed9da8218f56b4">egress_if</a>;                 <span class="comment">/* VXLAN egress object. */</span></div><div class="line">    <a class="code" href="group__types.html#ga356b17d1510b1781318bb0f840405e28">bcm_switch_network_group_t</a> <a class="code" href="structbcm__vxlan__port__s.html#af6d0ee687a1817417e66796f5af67a99">network_group_id</a>; <span class="comment">/* Switch split horizon network group ID this VXLAN port belongs to*/</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__vxlan__port__s.html#ae0f3a8319d260386ef0ad80c714ef5a2">qos_map_id</a>;                     <span class="comment">/* QoS Mapped priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__port__s.html#a45d77d83a880a0679364371c3e3b99a2">tunnel_pkt_pri</a>;               <span class="comment">/* Tunnel Packet Priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__vxlan__port__s.html#ab5925773a3806142e5195d74b55b1910">tunnel_pkt_cfi</a>;               <span class="comment">/* Tunnel Packet CFI */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__vxlan__port__s.html#aa20ab9327bdbab432a6e9e2168399524">vnid</a>;                        <span class="comment">/* VXLAN packet VNID. */</span></div><div class="line">} <a class="code" href="vxlan_8h.html#a39fc842d07b4d6d9b072d2d194e43132">bcm_vxlan_port_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>VXLAN port flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_VXLAN_PORT_WITH_ID </td><td>Create VXLAN port with specified ID  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_DROP </td><td>Drop BC/UUC/UMC packets on VXLAN destination virtual port  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_NETWORK </td><td>Network facing VXLAN interface  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_COUNTED </td><td>Maintain packet/Byte counts  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_REPLACE </td><td>Replace existing VXLAN entry  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_INT_PRI_SET </td><td>Use Specified pri for internal priority  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_INT_PRI_MAP </td><td>Use specified exp_map for internal priority  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_EGRESS_TUNNEL </td><td>Specified Egress tunnel is valid  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_TAGGED </td><td>Service tag mode  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_ADD </td><td>Add SD-tag  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_REPLACE </td><td>Replace VLAN not TPID  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_DELETE </td><td>Delete VLAN Tag  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_TPID_REPLACE </td><td>Replace VLAN and TPID  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_PRI_TPID_REPLACE </td><td>Replace VLAN, VLAN-PRI, VLAN-CFI and TPID (CFI remark is disabled if pkt_cfi == -1)  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_VLAN_PRI_REPLACE </td><td>Replace VLAN, VLAN-PRI and VLAN-CFI (CFI remark is disabled if pkt_cfi == -1)  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_PRI_REPLACE </td><td>Replace VLAN-PRI and VLAN-CFI (CFI remark is disabled if pkt_cfi == -1)  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SERVICE_TPID_REPLACE </td><td>Replace TPID only  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MULTICAST </td><td>Create Multicast-only VXLAN Tunnel  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_DEFAULT </td><td>VXLAN Default Network Port  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_ENABLE_VLAN_CHECKS </td><td>Enable stp check on ingress physical port, only for access VP derived from VLAN_XLATE  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_SHARE </td><td>Create shared multicast VXLAN port which could be shared by multiple next hops  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_ENCAP_LOCAL </td><td>Enable egress HiGig proxy and encap VXLAN tunnel on local device  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_TUNNEL_QOS_MAP </td><td>Use QoS mapped priority for egress Tunnel packet priority control  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_TUNNEL_OUTER_VLAN_DELETE </td><td>Delete Tunnel Outer VLAN Tag  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_TUNNEL_INNER_VLAN_DELETE </td><td>Delete Tunnel Inner VLAN Tag  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_UDP_SRC_PORT_RANGE_ENABLE </td><td>UDP source port range checking for Entropy  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_VPN_BASED </td><td>To specify the VP is per VPN based  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_LOOPBACK </td><td>Loopback facing interface for 2-pass RIOT  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_NO_SPLIT_HORIZON_EGRESS </td><td>Disable split horizon in egress on network port  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_NO_SPLIT_HORIZON_INGRESS </td><td>Disable split horizon in ingress on network port when RIOT is disabled  </td></tr>
</table>
<p>VXLAN port is a "virtual-port" that can be added to an L2 VPN. VXLAN port can be:</p><ul>
<li>VXLAN Tunnel endpoint (identified by Tunnel-SIP and VXLAN VNID)</li>
<li>A physical port (identified by any combination of physical port, outer VLAN, inner VLAN)</li>
</ul>
<p>With ELAN, VXLAN ports that are added to the L2 VPN are part of the L2 flooding domain (similar to physical ports added to a VLAN). Each VXLAN port has a unique GPORT identifier, vxlan_port_id, that is allocated by the SDK when vxlan port is added to a VPN. VXLAN port consists of ingress and egress parameters. The ingress parameters are the "match criteria", which are used to associate incoming packets with VXLAN port based on incoming physical port and/or packet header information. The bcm_vxlan_port_match_t types define which information is used as match criteria. The match_tunnel_id is used to specify the VXLAN Tunnel terminator. A match_tunnel is constructed using VXLAN Tunnel terminator API.</p>
<p>For devices that Virtual Port(VP) is hardware resource like bcm56850, BCM_VXLAN_PORT_SHARE is considered to used to save the Next Hop(NH) resource due to the 1 to 1 mapping between VP and NH. For devices that VP is not hardware resource like bcm53570, BCM_VXLAN_PORT_VPN_BASED is considered to used to indicate a network VP is non-sharing since there is no hardware resource issue and the sharing VP for network side is not necessary.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>VXLAN Port Match Criteria</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_INVALID </td><td>Invalid value  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_NONE </td><td>No source match criteria  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_PORT </td><td>{Module, Port} or Trunk  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_PORT_VLAN </td><td>Mod/port/trunk + outer VLAN  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_PORT_INNER_VLAN </td><td>Mod/port/trunk + inner VLAN  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_PORT_VLAN_STACKED </td><td>Mod/port/trunk + outer/inner VLAN  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_VLAN_PRI </td><td>Mod/port/trunk + VLAN-PRI + VLAN-CFI  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_SHARE </td><td>Match shared logical port  </td></tr>
<tr>
<td>BCM_VXLAN_PORT_MATCH_PORT_ITAG </td><td>Mod/port/trunk + inner VLAN tag  </td></tr>
</table>
<p>The egress parameters specify the destination and outgoing packet information for the VXLAN port. The destination can be a mod/port/trunk or VXLAN tunnel. The egress_if parameter is used to specify VXLAN Egress Object. If the destination is VXLAN tunnel, egress_if must be a valid egress object. An egress object for VXLAN tunnel is constructed by calling L3 Egress APIs. The egress_tunnel_id is used to specify the VXLAN Tunnel. An egress tunnel is constructed using VXLAN Tunnel Initiator API.</p>
<ul>
<li>bcm_vxlan_stat_t is an enumerated type that defines the types of statistics that can be extracted per vxlan vp/vpn index.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="vxlan_8h.html#a3b23ce19a304ae4bf3b3d9dff5f7b081">bcm_vxlan_stat_e</a> {</div><div class="line">    <a class="code" href="vxlan_8h.html#a3b23ce19a304ae4bf3b3d9dff5f7b081a0ea321741dc3f8b7da0c46d56b74faea">bcmVxlanInPackets</a>,</div><div class="line">    <a class="code" href="vxlan_8h.html#a3b23ce19a304ae4bf3b3d9dff5f7b081a8a30616f94fc69618f349738db5fb447">bcmVxlanOutPackets</a>,</div><div class="line">    <a class="code" href="vxlan_8h.html#a3b23ce19a304ae4bf3b3d9dff5f7b081a4b7968b421ab1339f6cf49cf10ae6e18">bcmVxlanInBytes</a>,</div><div class="line">    <a class="code" href="vxlan_8h.html#a3b23ce19a304ae4bf3b3d9dff5f7b081ab8589238869f8527cc1c88c67576021d">bcmVxlanOutBytes</a></div><div class="line">} <a class="code" href="vxlan_8h.html#a5c532d80286886c8c08602ac106d8871">bcm_vxlan_stat_t</a>;</div></div><!-- fragment --><ul>
<li>bcm_vxlan_dip_stat_t is an enumerated type that defines the types of statistics that can be extracted per vxlan dip.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="vxlan_8h.html#a63669e9e2fdf081380bc434c99bf31ff">bcm_vxlan_dip_stat_e</a> {</div><div class="line">    <a class="code" href="vxlan_8h.html#a63669e9e2fdf081380bc434c99bf31ffabd663d63721c8583c2e43df8389a9ed5">bcmVxlanDipInPackets</a>,</div><div class="line">    <a class="code" href="vxlan_8h.html#a63669e9e2fdf081380bc434c99bf31ffae4fc8be911e128c2dcc441834c792f07">bcmVxlanDipInBytes</a></div><div class="line">} <a class="code" href="vxlan_8h.html#a77f9521a427e257fd7258fd96b9e3bbe">bcm_vxlan_dip_stat_t</a>;</div></div><!-- fragment --><ul>
<li>bcm_tunnel_initiator_t structure can be used for configuring tunnel initiator.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__tunnel__initiator__s.html">bcm_tunnel_initiator_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* Configuration flags. */</span></div><div class="line">    <a class="code" href="tunnel_8h.html#afefa281f0ba349d980774ca3f75e8e0d">bcm_tunnel_type_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a58ea1eba78c2716f23988e1b5256f1db">type</a>;             <span class="comment">/* Tunnel type. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__tunnel__initiator__s.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>;                            <span class="comment">/* Tunnel header TTL. */</span></div><div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a090a7216684abfbd1b42287fcd43979c">dmac</a>;                     <span class="comment">/* Destination MAC address. */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a72576020cbd42b08debe20ce8d478261">dip</a>;                       <span class="comment">/* Tunnel header DIP (IPv4). */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#acee6e61559ffe678bc7bee506ba9f595">sip</a>;                       <span class="comment">/* Tunnel header SIP (IPv4). */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a8e328b6303dd4f97f83e0900346575de">sip6</a>;                     <span class="comment">/* Tunnel header SIP (IPv6). */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#ae8fe5193bc4e5013c8183d7d8d09bc74">dip6</a>;                     <span class="comment">/* Tunnel header DIP (IPv6). */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a647730c93bbddceace3e92e5e567a90b">flow_label</a>;                  <span class="comment">/* Tunnel header flow label (IPv6). */</span></div><div class="line">    <a class="code" href="tunnel_8h.html#ab39bd3b8ec6112cfcb46c088214f1e58">bcm_tunnel_dscp_select_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#acc12740d43a0a8fa561bdfc013faf383">dscp_sel</a>;  <span class="comment">/* Tunnel header DSCP select. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__tunnel__initiator__s.html#a139f7aad5397431a4e30fd2787c29dc5">dscp</a>;                           <span class="comment">/* Tunnel header DSCP value. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__tunnel__initiator__s.html#af4e436ef14c2727a04f3046b12ba76ac">dscp_map</a>;                       <span class="comment">/* DSCP-map ID. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a5a96766f0392a925142d225830a597fa">tunnel_id</a>;              <span class="comment">/* Tunnel ID */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a36e2b1075a56c6c23ec5555b27bff470">udp_dst_port</a>;                <span class="comment">/* Destination UDP port */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a5aeb16066884baecd9b18fac7be10c92">udp_src_port</a>;                <span class="comment">/* Source UDP port */</span></div><div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#aa9cfdbc5d4fca65e6c81837a7e2dfc6c">smac</a>;                     <span class="comment">/* WLAN outer MAC */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__tunnel__initiator__s.html#a5f8594e356005c64e4a2625755b6c849">mtu</a>;                            <span class="comment">/* WLAN MTU */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#ab90165cd927a9ab4ab1e613e95852ade">vlan</a>;                    <span class="comment">/* Tunnel VLAN */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a32ad75ce30562c526f5b504fbb0187c1">tpid</a>;                        <span class="comment">/* Tunnel TPID */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;                      <span class="comment">/* Tunnel priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;                      <span class="comment">/* Tunnel CFI */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a91b23878ac80fd9fbea2d026f99b8ad5">ip4_id</a>;                      <span class="comment">/* IPv4 ID. */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a2edc7e9c625922cb74cf1981c2f66519">l3_intf_id</a>;                <span class="comment">/* l3 Interface ID. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__tunnel__initiator__s.html#a8797d60467977b8702526105de761922">span_id</a>;                     <span class="comment">/* Erspan Span ID. */</span></div><div class="line">} <a class="code" href="tunnel_8h.html#aaf11c224cb6954b19984cfd46d13a098">bcm_tunnel_initiator_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>VxLan tunnel initiator flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_TUNNEL_INIT_USE_INNER_DF </td><td>Copy DF from inner header.  </td></tr>
<tr>
<td>BCM_TUNNEL_INIT_IPV4_SET_DF </td><td>Set DF bit in outer header if inner header is IPv4  </td></tr>
<tr>
<td>BCM_TUNNEL_INIT_IPV6_SET_DF </td><td>Set DF bit in outer header if inner header is IPv6  </td></tr>
<tr>
<td>BCM_TUNNEL_REPLACE </td><td>Update existing tunnel  </td></tr>
</table>
<ul>
<li>bcm_tunnel_terminator_t structure can be used for configuring tunnel terminator.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__tunnel__terminator__s.html">bcm_tunnel_terminator_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* Configuration flags. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__terminator__s.html#ad438502529c89960df022009b514e66f">multicast_flag</a>;              <span class="comment">/* VXLAN Multicast trigger flags. */</span></div><div class="line">    <a class="code" href="group__types.html#ga75bff066bcf4665db211170f0f49e58e">bcm_vrf_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#ad90cb6ae1111a34aeb9f39fbd7445efd">vrf</a>;                      <span class="comment">/* Virtual router instance. */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#acee6e61559ffe678bc7bee506ba9f595">sip</a>;                       <span class="comment">/* SIP for tunnel header match. */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a72576020cbd42b08debe20ce8d478261">dip</a>;                       <span class="comment">/* DIP for tunnel header match. */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a02da5847e0921ccdb7d7c4a6866ccd50">sip_mask</a>;                  <span class="comment">/* Source IP mask. */</span></div><div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#aba02c38a2cd73535fa53edfedc6532c3">dip_mask</a>;                  <span class="comment">/* Destination IP mask. */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a8e328b6303dd4f97f83e0900346575de">sip6</a>;                     <span class="comment">/* SIP for tunnel header match (IPv6). */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#ae8fe5193bc4e5013c8183d7d8d09bc74">dip6</a>;                     <span class="comment">/* DIP for tunnel header match (IPv6). */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a320413061e483655a0f5dfcd9ff2c160">sip6_mask</a>;                <span class="comment">/* Source IP mask (IPv6). */</span></div><div class="line">    <a class="code" href="group__types.html#ga40bc5eab76a137a39d5fff98d823094a">bcm_ip6_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#aed9f436b96212530971c53c0f93caa5e">dip6_mask</a>;                <span class="comment">/* Destination IP mask (IPv6). */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__terminator__s.html#ac8788a471c933f95325f6788e31836ef">udp_dst_port</a>;                <span class="comment">/* UDP dst port for UDP packets. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__tunnel__terminator__s.html#abc0df707647b7be0f9ce511b9ff53c4c">udp_src_port</a>;                <span class="comment">/* UDP src port for UDP packets */</span></div><div class="line">    <a class="code" href="tunnel_8h.html#afefa281f0ba349d980774ca3f75e8e0d">bcm_tunnel_type_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a58ea1eba78c2716f23988e1b5256f1db">type</a>;             <span class="comment">/* Tunnel type */</span></div><div class="line">    <a class="code" href="group__types.html#ga6e9f69e8948f73d9da295756c2ce581d">bcm_pbmp_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a2d0320a04a4ec0284ade6a3600544b7f">pbmp</a>;                    <span class="comment">/* Port bitmap for this tunnel */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#ab90165cd927a9ab4ab1e613e95852ade">vlan</a>;                    <span class="comment">/* The VLAN ID for IPMC lookup or WLAN</span></div><div class="line"><span class="comment">                                           tunnel */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a4d72a581ad50303033d3b4cd63ab54e1">remote_port</a>;            <span class="comment">/* Remote termination */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a5a96766f0392a925142d225830a597fa">tunnel_id</a>;              <span class="comment">/* Tunnel id */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__tunnel__terminator__s.html#afb43724358a2930f11effd8bbb6cdf71">if_class</a>;                       <span class="comment">/* L3 interface class this tunnel. */</span></div><div class="line">    <a class="code" href="group__types.html#ga0f3f07b8f11cb4e625b0f42d6cc7f94c">bcm_multicast_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a4568255a6fca642871c55ef3d1a1c029">failover_mc_group</a>;  <span class="comment">/* MC group used for bi-cast. */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a7d5e95597de4672dda1ccf15830b2102">ingress_failover_id</a>; <span class="comment">/* 1+1 protection. */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a5814080f31ea8ec26e594e85df149197">failover_id</a>;         <span class="comment">/* Failover Object Identifier for</span></div><div class="line"><span class="comment">                                           protected tunnel. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a921e2ea274fedf53f7cbc76122706e1c">failover_tunnel_id</a>;     <span class="comment">/* Failover Tunnel ID. */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__tunnel__terminator__s.html#a26f0b489d20808503a050fed0988907a">tunnel_if</a>;                 <span class="comment">/* hierarchical interface. */</span></div><div class="line">} <a class="code" href="tunnel_8h.html#a63fc57d642f521481fb6656630e99fda">bcm_tunnel_terminator_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>VxLan tunnel terminator flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_TUNNEL_TERM_TUNNEL_WITH_ID </td><td>Create tunnel with ID  </td></tr>
<tr>
<td>BCM_TUNNEL_TERM_UDP_CHECKSUM_ENABLE </td><td>Drop pkts with non-zero UDP checksum  </td></tr>
<tr>
<td>BCM_TUNNEL_TERM_TUNNEL_DEACTIVATE </td><td>Use to deactivate tunnel terminator  </td></tr>
</table>
<p>The following multicast_flag can only be used in bcm_vxlan_tunnel_terminator_update API to provides a trigger mechanism to update multicast BUD state per VXLAN Tunnel terminator. These multicast flags can not used in bcm_vxlan_tunnel_initiator_create API.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>VXLAN Tunnel terminator Multicast flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_VXLAN_MULTICAST_TUNNEL_STATE_BUD_ENABLE </td><td>Enable BUD Multicast state  </td></tr>
<tr>
<td>BCM_VXLAN_MULTICAST_TUNNEL_STATE_BUD_DISABLE </td><td>Disable BUD Multicast state  </td></tr>
</table>
<h1><a class="anchor" id="vxlan_apis"></a>
VXLAN APIs</h1>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ae4e3b64b2885305096060cf20ced3f49" title="Initialize VXLAN VPN config structure.">bcm_vxlan_vpn_config_t_init(bcm_vxlan_vpn_config_t* info)</a>  </td><td>Initialize VXLAN VPN config structure.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a1fbc9bfbf7ffbc3b10cf97753e5078e4" title="Create or update VXLAN VPN. When create a VXLAN VPN: If use BCM_VXLAN_VPN_WITH_VPNID,...">bcm_vxlan_vpn_create(int unit, bcm_vxlan_vpn_config_t* info)</a>  </td><td><p class="starttd">Create or update VXLAN VPN.</p>
<p class="intertd">When create a VXLAN VPN: If use BCM_VXLAN_VPN_WITH_VPNID, both VFI and VNID will be created. If not use flag BCM_VXLAN_VPN_WITH_VPNID, only VFI will be created.</p>
<p class="endtd">When update an exist VXLAN VPN(BCM_VXLAN_VPN_REPLACE should be used): If use both BCM_VXLAN_VPN_REPLACE and BCM_VXLAN_VPN_WITH_VPNID, both VFI and VNID will be created. If only use BCM_VXLAN_VPN_REPLACE, the VNID will be removed. If the flex counter is attached to the VPN, the previous flex counter information can be kept.   </p>
</td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#af3c7b2223ccc745ea2015d4efb1a0576" title="Destroy VXLAN VPN.">bcm_vxlan_vpn_destroy(int unit, bcm_vpn_t l2vpn)</a>  </td><td>Destroy VXLAN VPN.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a44215d5ecdf5172564e6f4bcf7ac6f56" title="Destroy VXLAN VPN.">bcm_vxlan_vpn_destroy_all(int unit)</a>  </td><td>Destroy VXLAN VPN.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#afd39ec9943e9535f7919fb3ffd2328ca" title="Get VXLAN VPN.">bcm_vxlan_vpn_get(int unit, bcm_vpn_t l2vpn, bcm_vxlan_vpn_config_t* info)</a>  </td><td>Get VXLAN VPN.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#af8bf6e7004f4680804f1bf8ca4caa32a" title="Traverse all valid VXLAN VPN entries and call the supplied callback routine.">bcm_vxlan_vpn_traverse(int unit, bcm_vxlan_vpn_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all valid VXLAN VPN entries and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#aa132a95bcbe64852aa19f13b1008af17" title="Traverse all valid VXLAN port and call the supplied callback routine.">bcm_vxlan_port_traverse(int unit, bcm_vxlan_port_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all valid VXLAN port and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a55b8df2a34ad463352cdd28cf1a1c5fc" title="Initialize the BCM VXLAN subsystem.">bcm_vxlan_init(int unit)</a>  </td><td>Initialize the BCM VXLAN subsystem.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#abac5d3dea3b872234662d9338ea37eaa" title="Detach the BCM VXLAN subsystem.">bcm_vxlan_cleanup(int unit)</a>  </td><td>Detach the BCM VXLAN subsystem.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a5f4f89adcbc2874f51bea07a328c4093" title="Create VXLAN Tunnel Initiator.">bcm_vxlan_tunnel_initiator_create(int unit, bcm_tunnel_initiator_t* info)</a>  </td><td>Create VXLAN Tunnel Initiator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#aa3689d6808b84e195b076e404b9e5490" title="Delete VXLAN Tunnel Initiator.">bcm_vxlan_tunnel_initiator_destroy(int unit, bcm_gport_t vxlan_tunnel_id)</a>  </td><td>Delete VXLAN Tunnel Initiator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a4ecc837bae2f5a4150fb4770c4a2de1d" title="Get VXLAN Tunnel Initiator.">bcm_vxlan_tunnel_initiator_get(int unit, bcm_tunnel_initiator_t* info)</a>  </td><td>Get VXLAN Tunnel Initiator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a1b195d593042d6f84c3b417bd009aec6" title="Traverse VXLAN Tunnel initiator.">bcm_vxlan_tunnel_initiator_traverse(int unit, bcm_tunnel_initiator_traverse_cb cb, void* user_data)</a>  </td><td>Traverse VXLAN Tunnel initiator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a5d21569548941fa1d21208775d0b41c2" title="Create VXLAN Tunnel terminator.">bcm_vxlan_tunnel_terminator_create(int unit, bcm_tunnel_terminator_t* info)</a>  </td><td>Create VXLAN Tunnel terminator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a1c3a4f1376addfc5e17fd4942c5dc1d1" title="Delete VXLAN Tunnel terminator.">bcm_vxlan_tunnel_terminator_destroy(int unit, bcm_gport_t vxlan_tunnel_id)</a>  </td><td>Delete VXLAN Tunnel terminator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a8770a7496ec629d07a13c1ff0f1d696a" title="Update multicast/active state per VXLAN Tunnel terminator.">bcm_vxlan_tunnel_terminator_update(int unit, bcm_tunnel_terminator_t* info)</a>  </td><td>Update multicast/active state per VXLAN Tunnel terminator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a3277231028c4bfe54d932a0a3e9043e7" title="Get VXLAN Tunnel terminator.">bcm_vxlan_tunnel_terminator_get(int unit, bcm_tunnel_terminator_t* info)</a>  </td><td>Get VXLAN Tunnel terminator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a91edb5afc89d5abed1b8ef0b940f748d" title="Traverse VXLAN Tunnel terminator.">bcm_vxlan_tunnel_terminator_traverse(int unit, bcm_tunnel_terminator_traverse_cb cb, void* user_data)</a>  </td><td>Traverse VXLAN Tunnel terminator.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a194f7614734443ad8ab0c1bac2a68f21">bcm_vxlan_port_t_init(bcm_vxlan_port_t* vxlan_port)</a>  </td><td>Initialize VXLAN port structure.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#aca440a46a58e813743b2819d3c513abe" title="bcm_vxlan_port_add adds a Access or Network VXLAN port">bcm_vxlan_port_add(int unit, bcm_vpn_t l2vpn, bcm_vxlan_port_t* vxlan_port)</a>  </td><td>bcm_vxlan_port_add adds a Access or Network VXLAN port   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a142aaffb70ac18abb66d982a450f7e2d" title="bcm_vxlan_port_delete VXLAN port from VXLAN network.">bcm_vxlan_port_delete(int unit, bcm_vpn_t l2vpn, bcm_gport_t vxlan_port_id)</a>  </td><td>bcm_vxlan_port_delete VXLAN port from VXLAN network.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a9318a37e5ffef49d70e02c3d42df94bc" title="bcm_vxlan_port_delete VXLAN port from VXLAN network.">bcm_vxlan_port_delete_all(int unit, bcm_vpn_t l2vpn)</a>  </td><td>bcm_vxlan_port_delete VXLAN port from VXLAN network.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a784629dd476f387eb166b9d1eab713dc" title="Get VXLAN port information.">bcm_vxlan_port_get(int unit, bcm_vpn_t l2vpn, bcm_vxlan_port_t* vxlan_port)</a>  </td><td>Get VXLAN port information.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a785c1a83c04fff787928951657bac31c" title="Get all VXLAN port information.">bcm_vxlan_port_get_all(int unit, bcm_vpn_t l2vpn, int port_max, bcm_vxlan_port_t* port_array, int* port_count)</a>  </td><td>Get all VXLAN port information.   </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ad5f2ef3f5cb126da5ca65292c4895470" title="Attach counters entries to the given vxlan vp/vpn index.">bcm_vxlan_stat_attach(int unit, bcm_gport_t port, bcm_vpn_t vpn, uint32 stat_counter_id)</a>  </td><td>Attach counters entries to the given vxlan vp/vpn index   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#afa24591b3fe887214c19375675785d7e" title="Detach counters entries to the given vxlan vp/vpn index.">bcm_vxlan_stat_detach(int unit, bcm_gport_t port, bcm_vpn_t vpn)</a>  </td><td>Detach counters entries to the given vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a5a20f99ec7a647a5ddf578fa953c05e4" title="Get counter statistic values for a vxlan vp/vpn index.">bcm_vxlan_stat_counter_get(int unit, bcm_gport_t port, bcm_vpn_t vpn, bcm_vxlan_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Get counter statistic values for a vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ae4ddf77e6861a15987fe3b865e32d3cd" title="Force an immediate counter update and retrieve counter statistic values for a vxlan vp/vpn index.">bcm_vxlan_stat_counter_sync_get(int unit, bcm_gport_t port, bcm_vpn_t vpn, bcm_vxlan_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Force an immediate counter update and retrieve counter statistic values for a vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ab41f4fe2704eddf8bb380a9d947a74ce" title="Set counter statistic values for a vxlan vp/vpn index.">bcm_vxlan_stat_counter_set(int unit, bcm_gport_t port, bcm_vpn_t vpn, bcm_vxlan_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Set counter statistic values for a vxlan vp/vpn index   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ab4b8cb7b544f78f80921a66c2843c4dc" title="Enable/Disable collection of statistics on the indicated port or vpn.">bcm_vxlan_stat_enable_set(int unit, bcm_gport_t port, bcm_vpn_t vpn, int enable)</a>  </td><td>Enable/Disable collection of statistics on the indicated port or vpn   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#acc31742a27fc42fc0512adc0b48c00c2" title="Get multiple counter statistic values for multiple vxlan vp/vpn index.">bcm_vxlan_stat_multi_get(int unit, bcm_gport_t port, bcm_vpn_t vpn, int nstat, bcm_vxlan_stat_t* stat_arr, uint64* value_arr)</a>  </td><td>Get multiple counter statistic values for multiple vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a6532020f33ff6bfac7c685ea58f5b8b6" title="Get 32bit multiple counter statistic values for multiple vxlan vp/vpn index.">bcm_vxlan_stat_multi_get32(int unit, bcm_gport_t port, bcm_vpn_t vpn, int nstat, bcm_vxlan_stat_t* stat_arr, uint32* value_arr)</a>  </td><td>Get 32bit multiple counter statistic values for multiple vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a9999aa0c474b385521e3901102720684" title="Set multiple counter statistic values for multiple vxlan vp/vpn index.">bcm_vxlan_stat_multi_set(int unit, bcm_gport_t port, bcm_vpn_t vpn, int nstat, bcm_vxlan_stat_t* stat_arr, uint64* value_arr)</a>  </td><td>Set multiple counter statistic values for multiple vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#ab5317995a93d33b904b321207b1e55bd" title="Set 32bit multiple counter statistic values for multiple vxlan vp/vpn index.">bcm_vxlan_stat_multi_set32(int unit, bcm_gport_t port, bcm_vpn_t vpn, int nstat, bcm_vxlan_stat_t* stat_arr, uint32* value_arr)</a>  </td><td>Set 32bit multiple counter statistic values for multiple vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a0792bc3cca7d9f43f3a6b7677c62ae6f" title="Get stat counter ID associated with given vxlan vp/vpn index.">bcm_vxlan_stat_id_get(int unit, bcm_gport_t port, bcm_vpn_t vpn, bcm_vxlan_stat_t stat, uint32* stat_counter_id)</a>  </td><td>Get stat counter ID associated with given vxlan vp/vpn index.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#aad5bf2cc92264921e0e0784a93746bc2" title="Attach counters entries to a given VXLAN DIP.">bcm_vxlan_dip_stat_attach(int unit, bcm_ip_t vxlan_dip, uint32 stat_counter_id)</a>  </td><td>Attach counters entries to a given VXLAN DIP.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#af34c712ffa46e7710c4dc8fb018ea983" title="Detach counters entries to a given VXLAN DIP.">bcm_vxlan_dip_stat_detach(int unit, bcm_ip_t vxlan_dip)</a>  </td><td>Detach counters entries to a given VXLAN DIP.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#af8444bcdee55d8bb924eb4322d09b005" title="Get the specified counter statistic for a given VXLAN DIP.">bcm_vxlan_dip_stat_counter_get(int unit, bcm_ip_t vxlan_dip, bcm_vxlan_dip_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Get the specified counter statistic for a given VXLAN DIP.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a49dfd60399e56fca1f9a1d378a33f101" title="Set the specified counter statistic for a given VXLAN DIP.">bcm_vxlan_dip_stat_counter_set(int unit, bcm_ip_t vxlan_dip, bcm_vxlan_dip_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Set the specified counter statistic for a given VXLAN DIP.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a0cd7502bfb0c1b1126c36840cf640953" title="Get 64-bit counter value for multiple VXLAN DIP statistic types.">bcm_vxlan_dip_stat_multi_get(int unit, bcm_ip_t vxlan_dip, int nstat, bcm_vxlan_dip_stat_t* stat_arr, uint64* value_arr)</a>  </td><td>Get 64-bit counter value for multiple VXLAN DIP statistic types.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a2f13c86ffe97edddf90efa5a3aab26c4" title="Get 32-bit counter value for multiple VXLAN DIP statistic types.">bcm_vxlan_dip_stat_multi_get32(int unit, bcm_ip_t vxlan_dip, int nstat, bcm_vxlan_dip_stat_t* stat_arr, uint32* value_arr)</a>  </td><td>Get 32-bit counter value for multiple VXLAN DIP statistic types.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a91c2917b4427c734e7aeb6709d7634e1" title="set 64-bit counter value for multiple VXLAN DIP statistic types.">bcm_vxlan_dip_stat_multi_set(int unit, bcm_ip_t vxlan_dip, int nstat, bcm_vxlan_dip_stat_t* stat_arr, uint64* value_arr)</a>  </td><td>set 64-bit counter value for multiple VXLAN DIP statistic types.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a26485efd2d913378064d9a3ffa47af49" title="set 32-bit counter value for multiple VXLAN DIP statistic types.">bcm_vxlan_dip_stat_multi_set32(int unit, bcm_ip_t vxlan_dip, int nstat, bcm_vxlan_dip_stat_t* stat_arr, uint32* value_arr)</a>  </td><td>set 32-bit counter value for multiple VXLAN DIP statistic types.   </td></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a25b3ddb76be75a29ab044b437ac389bd" title="Retrieve associated stat counter for a given VXLAN DIP.">bcm_vxlan_dip_stat_id_get(int unit, bcm_ip_t vxlan_dip, bcm_vxlan_dip_stat_t stat, uint32* stat_counter_id)</a>  </td><td>Retrieve associated stat counter for a given VXLAN DIP.   </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Invalid VXLAN VNI</caption>
<tr>
<td>BCM_VXLAN_VNI_INVALID </td><td>Invalid VXLAN VNI  </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="vxlan_8h.html#a5e89f5d554edba077e6664e1fc0a2551" title="Traverse local identifier (vsi or vrf) with VNI mapping.">bcm_vxlan_network_domain_config_traverse(int unit, bcm_vxlan_network_domain_config_additional_info_t* additional_info, bcm_vxlan_network_domain_config_traverse_cb cb, void* user_data)</a>  </td><td>Traverse local identifier (vsi or vrf) with VNI mapping.   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2019 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
