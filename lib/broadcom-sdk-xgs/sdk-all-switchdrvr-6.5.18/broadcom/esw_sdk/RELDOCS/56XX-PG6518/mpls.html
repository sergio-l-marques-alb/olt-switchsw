<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: MPLS Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MPLS Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>StrataXGS III provides MPLS functionality. The BCM MPLS APIs allow application developers to manage the Broadcom MPLS features.</p>
<h1><a class="anchor" id="mpls_overview"></a>
MPLS Overview</h1>
<p>StrataXGS III MPLS support can be broken down into two categories, Layer-2 and Layer-3 MPLS.</p>
<p>L2 MPLS consists of point-to-point Virtual Private Wire Service (VPWS) and point-to-multipoint Virtual Private LAN Service (VPLS) Ethernet transport services.</p>
<p>In VPWS, Ethernet frames are mapped into a MPLS pseudowire based on incoming port plus packet header information. At the end of a pseudowire, forwarding of Ethernet frames after MPLS decapsulation is based on the MPLS label lookup.</p>
<p>In VPLS, Ethernet frames of interest are also identified by incoming port plus packet header information. Ethernet frames are switched into one or more MPLS pseudowires based on the MAC DA lookup. At the end of a pseudowire, frames again are switched based on MAC DA lookup.</p>
<p>L3 MPLS deals with the establishment of MPLS tunnels. At the MPLS tunnel initiation point, packets entering the tunnel are encapsulated with an MPLS header (label PUSH operation). IPv4 and IPv6 packets can be directed into an MPLS tunnel based on the DIP lookup. Along the path of the MPLS tunnel, MPLS label SWAP, PUSH, PHP, and POP operations are supported. At the end of an MPLS tunnel, forwarding of IPv4 and IPv6 packets is based on DIP lookup. Virtual routing tables are supported for the DIP lookup.</p>
<p>In the MPLS APIs, the concept of VPN is introduced. A VPN can be of type VPLS, VPWS, or L3:</p>
<p>For VPLS, a VPN is similar to a VLAN, which identifies a group of physical ports to be included in a broadcast domain. However, instead of physical ports, a VPLS VPN identifies a group of "virtual-ports" to be included in a broadcast domain. In the MPLS APIs, a "virtual-port" is called an MPLS port (see description below). The VPN ID is used to qualify MAC DA lookups in VPLS.</p>
<p>For VPWS, a VPN consists of two MPLS ports. Packets arriving on one MPLS port are sent directly out the other MPLS port.</p>
<p>L3 VPNs are used to identify a virtual routing table. When creating an L3 VPN, a VRF must be specified. At the end of a MPLS tunnel, the IPv4 or IPv6 DIP lookup is qualified by VRF associated with the L3 VPN.</p>
<h1><a class="anchor" id="mpls_data_types"></a>
MPLS Data Types</h1>
<ul>
<li>bcm_mpls_label_t is the standard MPLS label.</li>
<li>bcm_vpn_t is the ID that uniquely identifies a layer 2 or layer 3 VPN instance. bcm_vpn_t is defined as bcm_vlan_t so it can be used in APIs with bcm_vlan_t parameters (for example, bcm_l2_addr_add can be used to add VPLS L2 entries using a VPLS bcm_vpn_t value). BCM_MPLS_VPxS_VPN_INVALID specifies an Invalid VPN Instance.</li>
<li>The bcm_mpls_exp_map_t structure contains information used when setting or getting a MPLS EXP map. For incoming MPLS packets, an ingress EXP map is used to to map MPLS EXP value to internal priority and color. For outgoing MPLS packets, an egress EXP map is used to map the internal priority and color to an EXP value. On some devices, the egress EXP map is also used to set the 802.1p priority and CFI values for outgoing MPLS packets.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mpls__exp__map__s.html">bcm_mpls_exp_map_s</a> {</div><div class="line">    <span class="keywordtype">int</span>           <a class="code" href="structbcm__mpls__exp__map__s.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;    <span class="comment">/* Internal priority */</span></div><div class="line">    <a class="code" href="group__types.html#ga24111d898bb4ee4a12793dfa40c3a79d">bcm_color_t</a>   <a class="code" href="structbcm__mpls__exp__map__s.html#aa6237919183657a4dff521eb0076d310">color</a>;       <span class="comment">/* Color */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>         <a class="code" href="structbcm__mpls__exp__map__s.html#a520aa2d12f714b08b5bc9a17fcfeac1c">dscp</a>;        <span class="comment">/* Diff Serv Code Point */</span></div><div class="line">    <span class="keywordtype">int</span>           <a class="code" href="structbcm__mpls__exp__map__s.html#a28a48b62e5550cb9f3be77913be56f45">exp</a>;         <span class="comment">/* EXP value */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>         pkt_prio;    <span class="comment">/* Packet priority value */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>         <a class="code" href="structbcm__mpls__exp__map__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;     <span class="comment">/* Packet CFI value */</span></div><div class="line">} <a class="code" href="group__mpls.html#ga72bf22a9c38e6b0bee86cc0dad2e3381">bcm_mpls_exp_map_t</a>;</div></div><!-- fragment --><ul>
<li>The bcm_mpls_egress_label_t structure describes the MPLS label header values (label, EXP, TTL) and QOS options. This is used when pushing/swapping a standard 4-byte MPLS header (for DNX devices, see bcm_mpls_tunnel_switch_create and bcm_mpls_tunnel_initiator_create APIs. For other devices, see bcm_mpls_tunnel_switch_add and bcm_mpls_tunnel_initiator_set APIs).In DNX devices, in case of bcm_mpls_tunnel_initiator_create, action operation can be set explicitly using action field. Indication to use action operation is done by setting flag BCM_MPLS_EGRESS_LABEL_ACTION_VALID. When set, action is being taken from action field.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mpls__egress__label__s.html">bcm_mpls_egress_label_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>                   <a class="code" href="structbcm__mpls__egress__label__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>; <span class="comment">/* BCM_MPLS_EGRESS_LABEL_* */</span></div><div class="line">    <a class="code" href="group__types.html#ga7f4890ec7a6446a0a6c0cb66ed180627">bcm_mpls_label_t</a>         <a class="code" href="structbcm__mpls__egress__label__s.html#a495962e21fcf2d06b0e391c37fb6fbe4">label</a>;</div><div class="line">    <span class="keywordtype">int</span>                      <a class="code" href="structbcm__mpls__egress__label__s.html#ae0f3a8319d260386ef0ad80c714ef5a2">qos_map_id</a>;</div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>                    <a class="code" href="structbcm__mpls__egress__label__s.html#a28a48b62e5550cb9f3be77913be56f45">exp</a>;</div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>                    <a class="code" href="structbcm__mpls__egress__label__s.html#ae02775d2432ca36401c2953643720b4b">ttl</a>;</div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>                    <a class="code" href="structbcm__mpls__egress__label__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;</div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>                    <a class="code" href="structbcm__mpls__egress__label__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;</div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a>                 <a class="code" href="structbcm__mpls__egress__label__s.html#aff50af007d002d5a1b460617ce5778b4">tunnel_id</a>; <span class="comment">/* Tunnel Interface */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a>                 <a class="code" href="structbcm__mpls__egress__label__s.html#a2edc7e9c625922cb74cf1981c2f66519">l3_intf_id</a>; <span class="comment">/* l3 Interface ID */</span></div><div class="line">    <a class="code" href="group__mpls.html#gae367ad12885f3c969030801dc4b317dc">bcm_mpls_egress_action_t</a> <a class="code" href="structbcm__mpls__egress__label__s.html#ad9f31855e4726967b9d13fd4f828fdd5">action</a>; <span class="comment">/* MPLS label action, relevant when BCM_MPLS_EGRESS_LABEL_ACTION_VALID is set. */</span></div><div class="line">    <span class="keywordtype">int</span>                      <a class="code" href="structbcm__mpls__egress__label__s.html#aebb0941f927587f6b1abaf1377889606">ecn_map_id</a>; <span class="comment">/* ECN map identifier */</span></div><div class="line">    <span class="keywordtype">int</span>                      <a class="code" href="structbcm__mpls__egress__label__s.html#a63454cf5d2d93f409f10de4a918135e6">int_cn_map_id</a>; <span class="comment">/* ecn map id for INT_CN to EXP mapping for L2 MPLS non-ip payload traffic */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a>           <a class="code" href="structbcm__mpls__egress__label__s.html#a82f0a1ecf72433781d1626299f46d79b">egress_failover_id</a>; <span class="comment">/* Failover object index for Egress Protection. */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a>                 <a class="code" href="structbcm__mpls__egress__label__s.html#a87ad6c3cdeefd1ef90b3fc32916f4ea7">egress_failover_if_id</a>; <span class="comment">/* Failover MPLS Tunnel identifier for Egress Protection. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__egress__label__s.html#af6ad039dbf5967db3b9664ea9267d81a">outlif_counting_profile</a>;        <span class="comment">/* Out LIF counting profile */</span></div><div class="line">    <a class="code" href="group__mpls.html#gacdfd69cbf049f54f5b8a289760382005">bcm_mpls_special_label_push_type_t</a> <a class="code" href="structbcm__mpls__egress__label__s.html#abfd7226967cb6f67db6adfbd61590c08">spl_label_push_type</a>; <span class="comment">/* Special label push type */</span></div><div class="line">    <a class="code" href="group__types.html#gac194ee55cb8607173582fe38916d00f2">bcm_encap_access_t</a> <a class="code" href="structbcm__mpls__egress__label__s.html#af61d186e026b2901545b506c57cf2998">encap_access</a>;    <span class="comment">/* Encapsulation Access stage */</span></div><div class="line">} <a class="code" href="group__mpls.html#ga03ae98115d8fe07819b25db1e123a427">bcm_mpls_egress_label_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS tunnel initiator options</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_TUNNEL_ENCAP_OPTIONS_WITH_ID </td><td>ID is provided  </td></tr>
<tr>
<td>BCM_MPLS_TUNNEL_ENCAP_OPTIONS_REPLACE </td><td>Replace the existing entry  </td></tr>
</table>
<div class="fragment"><div class="line"><span class="comment">/* MPLS tunnel initiator structure. */</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mpls__tunnel__encap__s.html">bcm_mpls_tunnel_encap_s</a> {</div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__tunnel__encap__s.html#a5a96766f0392a925142d225830a597fa">tunnel_id</a>;              <span class="comment">/* Tunnel ID. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__tunnel__encap__s.html#a4c0c65f5137fb86610b43afa827b9d73">num_labels</a>;                     <span class="comment">/* Number of labels to be added. */</span></div><div class="line">    <a class="code" href="structbcm__mpls__egress__label__s.html">bcm_mpls_egress_label_t</a> <a class="code" href="structbcm__mpls__tunnel__encap__s.html#a8b09efa4a7692568cb3118d54104777b">label_array</a>[BCM_MPLS_EGRESS_LABEL_MAX]; <span class="comment">/* Label info. */</span></div><div class="line">} <a class="code" href="group__mpls.html#gabc2df580effa9d76f4da875453f4ffe3">bcm_mpls_tunnel_encap_t</a>;</div></div><!-- fragment --><ul>
<li>The bcm_mpls_stat_info_t structure describes the MPLS label stat information values (number of entries, index, values) and specify type such as byets or packets. This is used when getting/setting counter statistics.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mpls__stat__info__s.html">bcm_mpls_stat_info_s</a> {</div><div class="line">    <a class="code" href="group__mpls.html#gac1331e4772f9e6b379984547a31f753d">bcm_mpls_stat_t</a>  <a class="code" href="structbcm__mpls__stat__info__s.html#a33b72812c80cdc4eab9fa2bf4d003826">stat</a>; <span class="comment">/* To specify In/Out Bytes/Pkts */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>           <a class="code" href="structbcm__mpls__stat__info__s.html#af840659e3354755ef32b3c08a0e3d8e2">num_entries</a>; <span class="comment">/* Number of Counter Entries */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>           *<a class="code" href="structbcm__mpls__stat__info__s.html#a9106c8f433e5f039fab5533d1fc57658">counter_indexes</a>; <span class="comment">/* Pointer to Counter indexes */</span></div><div class="line">    <a class="code" href="structbcm__stat__value__s.html">bcm_stat_value_t</a> *<a class="code" href="structbcm__mpls__stat__info__s.html#ac55195676dac0d33cf154110bdc89e7a">counter_values</a>; <span class="comment">/* Pointer to counter values */</span></div><div class="line">} <a class="code" href="group__mpls.html#ga4b7880009e4d68176a19c34c479841df">bcm_mpls_stat_info_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Egress Label Flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_TTL_SET </td><td>Set the outgoing label TTL to the specified TTL value.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_TTL_COPY </td><td>Copy the incoming packet's TTL value to the outgoing label TTL.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_TTL_DECREMENT </td><td>Copy the incoming packet's TTL value - 1 to the outgoing label TTL.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_EXP_SET </td><td>Set the outgoing label EXP to the specified EXP value.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_EXP_REMARK </td><td>Set the outgoing label EXP using the specified EXP map ID (qos_map_id) {internal priority, color}-to-EXP mapping   </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_EXP_COPY </td><td>Copy the incoming packet's EXP value to the outgoing label EXP.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PRI_SET </td><td>Set the outgoing label pri/cfi to the specified pri/cfi values (only if the pushed/swapped label is the top-most label).This set requires outgoing label EXP to be set as BCM_MPLS_EGRESS_LABEL_EXP_SET.   </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PRI_REMARK </td><td>Set the outgoing label pri/cfi using the specified EXP map ID (qos_map_id) {internal priority, color}-to-PRI/CFI mapping (only if the pushed/swapped label is the top-most label). This set requires outgoing label EXP to be set and must not be BCM_MPLS_EGRESS_LABEL_EXP_SET.   </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_DROP </td><td>Drop all traffic egressing out with this label.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PHP_IPV4 </td><td>Next header is IPv4, relevant for PHP action.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PHP_IPV6 </td><td>Next header is IPv6, relevant for PHP action.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PHP_L2 </td><td>Next header is Ethernet, relevant for PHP action.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ENTROPY_ENABLE </td><td>Enable Entropy for outgoing Tunnel-label and PW-label.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ENTROPY_INDICATION_ENABLE </td><td>Add Entropy Indication label for outgoing Tunnel-label  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ACTION_VALID </td><td>When set action is taken from action field.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_REPLACE </td><td>Replace existing entry.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_WITH_ID </td><td>Add using the specified ID.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_IML </td><td>Label is EVPN Implicit Multicast.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_WIDE </td><td>Set wide entry in egress.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_IML </td><td>Label is EVPN Implicit Multicast.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PROTECTION </td><td>Mark Egress Protection existence.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_PRESERVE </td><td>Indicate that ingress MPLS label used for swapping is preserved. So the egress label equals the ingress label. And there will be no need to set the egress label when this flag is set.   </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_EVPN </td><td>Create an EVPN tunnel.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ECN_TO_EXP_MAP </td><td>Use a specified ECN_TO_EXP mapping to derive MPLS EXP.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_INT_CN_TO_EXP_MAP </td><td>Use a specified INT_CN_TO_EXP mapping to derive MPLS EXP.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ECN_EXP_MAP_TRUST </td><td>Trust IP_ECN/INT_CN_TO_EXP mapping on VC or tunnel. It can be used with BCM_MPLS_EGRESS_LABEL_ECN_TO_EXP_MAP to trust this mapping on VC or Tunnel.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_ROE_BARE_MPLS </td><td>Encapsulate ROE frame with MPLS labels without inner L2 headers.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_VIRTUAL_EGRESS_POINTED </td><td>Indicate MPLS egress tunnel is pointed from EEDB only and not from FWD/ACL Dbs.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_LABEL_CONTROL_WORD </td><td>Outgoing EVPN labels use control word.  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Egress Actions</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_EGRESS_ACTION_SWAP </td><td>Incoming MPLS label is swapped.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_ACTION_PHP </td><td>Incoming label is popped and packet is sent directly out the specified port.   </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_ACTION_PUSH </td><td>Encapsulate with a MPLS header.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_ACTION_NOP </td><td>No operation.  </td></tr>
<tr>
<td>BCM_MPLS_EGRESS_ACTION_SWAP_OR_PUSH </td><td>Incoming MPLS label is swapped or pushed according to user and network configuration.  </td></tr>
</table>
<ul>
<li>The bcm_mpls_port_t structure describes an MPLS port (or "virtual-port") used for L2 MPLS VPNs (VPWS and VPLS VPNs):</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mpls__port__s.html">bcm_mpls_port_s</a> {</div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#ae487609c3c5e3f3c954054da83afc34b">mpls_port_id</a>;           <span class="comment">/* GPORT identifier. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__mpls__port__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* BCM_MPLS_PORT_xxx. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__mpls__port__s.html#a9e558b14122793cfe22e8f340eeeab04">flags2</a>;                      <span class="comment">/* BCM_MPLS_PORT2_xxx. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#afb43724358a2930f11effd8bbb6cdf71">if_class</a>;                       <span class="comment">/* Interface class ID. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#a6cba4d48420068404421436e5b783a99">exp_map</a>;                        <span class="comment">/* Incoming EXP map ID. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#a802cbbe822a00332f210c777da8a0e9a">int_pri</a>;                        <span class="comment">/* Internal priority. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__mpls__port__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;                      <span class="comment">/* Packet priority */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__mpls__port__s.html#a9d02907c7f4901f53eea486052421b70">pkt_cfi</a>;                      <span class="comment">/* Packet CFI */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__mpls__port__s.html#a425591b9d5d30bd9c4485b300bb9a878">service_tpid</a>;                <span class="comment">/* Service VLAN TPID value. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#a56da6f3a91f2f6d38953ef7c66fa78b2">port</a>;                   <span class="comment">/* Match port and/or egress port. */</span></div><div class="line">    <a class="code" href="group__mpls.html#ga769b6d2704a4914dd102965298a1a551">bcm_mpls_port_match_t</a> <a class="code" href="structbcm__mpls__port__s.html#a18f6803bdafb10707a1ec15fafde0fae">criteria</a>;     <span class="comment">/* Match criteria. */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__mpls__port__s.html#ad22679e36d7259c4d88d606c80d6d4c5">match_vlan</a>;              <span class="comment">/* Outer VLAN ID to match. */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__mpls__port__s.html#ad4878e6cfd724f3e83cb9fab60ae73d9">match_inner_vlan</a>;        <span class="comment">/* Inner VLAN ID to match. */</span></div><div class="line">    <a class="code" href="group__types.html#ga7f4890ec7a6446a0a6c0cb66ed180627">bcm_mpls_label_t</a> <a class="code" href="structbcm__mpls__port__s.html#a9eccc4850274e24cd8ff416123a95be4">match_label</a>;       <span class="comment">/* VC label to match. */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__mpls__port__s.html#a1fa46e353d8d6d93f5d5d9b86c2b4101">egress_tunnel_if</a>;          <span class="comment">/* MPLS tunnel egress object. */</span></div><div class="line">    <a class="code" href="structbcm__mpls__egress__label__s.html">bcm_mpls_egress_label_t</a> <a class="code" href="structbcm__mpls__port__s.html#ad4c30ef30e4a40267077b9e86ec29264">egress_label</a>; <span class="comment">/* Outgoing VC label. */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__mpls__port__s.html#a1932bbe3be97a39a126950ed7442974a">egress_service_vlan</a>;     <span class="comment">/* Service VLAN to Add/Replace. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__mpls__port__s.html#a4c2fb99520d88252461a6102dc5615e0">pw_seq_number</a>;               <span class="comment">/* Initial-value of Pseudowire Sequence number */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__mpls__port__s.html#a399a9c2e57c84182ae4d633fb9340f11">encap_id</a>;                  <span class="comment">/* Encap Identifier. */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a> <a class="code" href="structbcm__mpls__port__s.html#a5814080f31ea8ec26e594e85df149197">failover_id</a>;         <span class="comment">/* Failover Object Identifier. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#a337241a0bfc580988a19fd881340ad16">failover_port_id</a>;       <span class="comment">/* Failover MPLS Port Identifier. */</span></div><div class="line">    <a class="code" href="group__types.html#ga252d53447d82acf3fb573f1918e7f251">bcm_policer_t</a> <a class="code" href="structbcm__mpls__port__s.html#a143d6b42473f4c7f524f7980b2f02ee3">policer_id</a>;           <span class="comment">/* Policer ID to be associated with the</span></div><div class="line"><span class="comment">                                           MPLS gport */</span></div><div class="line">    <a class="code" href="group__types.html#ga0f3f07b8f11cb4e625b0f42d6cc7f94c">bcm_multicast_t</a> <a class="code" href="structbcm__mpls__port__s.html#a4568255a6fca642871c55ef3d1a1c029">failover_mc_group</a>;  <span class="comment">/* MC group used for bi-cast. */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a> <a class="code" href="structbcm__mpls__port__s.html#ab951513a180a10302c63eacf0a92a0b9">pw_failover_id</a>;      <span class="comment">/* Failover Object Identifier for PW failover. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#afb305e48cf54303f0c484300dd235b03">pw_failover_port_id</a>;    <span class="comment">/* Failover MPLS Port Identifier for PW failover. */</span></div><div class="line">    <a class="code" href="group__mpls.html#gac27d5bb06bedcd2a3e874dd94217a4de">bcm_mpls_port_control_channel_type_t</a> <a class="code" href="structbcm__mpls__port__s.html#a7a6169fac8f9edb5a3705437eea18428">vccv_type</a>; <span class="comment">/* Indicate VCCV Control Channel */</span></div><div class="line">    <a class="code" href="group__types.html#ga356b17d1510b1781318bb0f840405e28">bcm_switch_network_group_t</a> <a class="code" href="structbcm__mpls__port__s.html#af6d0ee687a1817417e66796f5af67a99">network_group_id</a>; <span class="comment">/* Switch split horizon network group ID this MPLS port belongs to */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__mpls__port__s.html#ace38d6cd562a5c6b6e7d5e6111d9f649">match_subport_pkt_vid</a>;   <span class="comment">/* LLTAG VLAN ID to match. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#a5a96766f0392a925142d225830a597fa">tunnel_id</a>;              <span class="comment">/* Tunnel ID pointing to Ingress LSP. */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#a400128711c4a459d9f5fab3bf60bd964">per_flow_queue_base</a>;    <span class="comment">/* Base queue of the per flow queue set.</span></div><div class="line"><span class="comment">                                           Actual queue is decided based on</span></div><div class="line"><span class="comment">                                           internal priority and qos map. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#ae0f3a8319d260386ef0ad80c714ef5a2">qos_map_id</a>;                     <span class="comment">/* QOS map identifier. */</span></div><div class="line">    <a class="code" href="group__types.html#gaf273a2d08ebc6fc3e5d0319aeb414ceb">bcm_failover_t</a> <a class="code" href="structbcm__mpls__port__s.html#a82f0a1ecf72433781d1626299f46d79b">egress_failover_id</a>;  <span class="comment">/* Failover object index for Egress Protection */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__mpls__port__s.html#ae3f72cfd7fc07a5c19332a7911b9f235">egress_failover_port_id</a>; <span class="comment">/* Failover MPLS Port identifier for Egress Protection */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#aebb0941f927587f6b1abaf1377889606">ecn_map_id</a>;                     <span class="comment">/* ECN map identifier */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__mpls__port__s.html#a32ede4d3c0e19268e9f68cb14e7b60bf">class_id</a>;                    <span class="comment">/* Class ID */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__mpls__port__s.html#a141df895d0d9cd46b2cf87085a82d205">egress_class_id</a>;             <span class="comment">/* Egress Class id for mpls flow. if application passes class id here, then</span></div><div class="line"><span class="comment">                                           class id will not be picked from egress_tunnel_if egress object.</span></div><div class="line"><span class="comment">                                           else SDK will use class id passed in egress_tunnel_if egress object.</span></div><div class="line"><span class="comment">                                           Duplication of class ids are not allowed. User cannot pass same class</span></div><div class="line"><span class="comment">                                           id in egress object and egress_class_id. please pass class id in egress</span></div><div class="line"><span class="comment">                                           object if user wants to have same class id. value 0 is reserved */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#a54d09c2ea30d38c9258f758ed92989af">inlif_counting_profile</a>;         <span class="comment">/* In LIF counting profile */</span></div><div class="line">    <a class="code" href="structbcm__mpls__egress__label__s.html">bcm_mpls_egress_label_t</a> <a class="code" href="structbcm__mpls__port__s.html#ad521cc471b482210e55ed862cf2f15e0">egress_tunnel_label</a>; <span class="comment">/* A mpls tunnel to be binded with the pwe */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__mpls__port__s.html#a02215f7f7c51c45fe344e3a5cf47598c">nof_service_tags</a>;               <span class="comment">/* Number of Service-Tags expected on Native-ETH header */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="l3_8dox.html#a1d9cec84dc3f8dfdc08564fc3be34a50">stat_id</a>;                     <span class="comment">/* Object statistics ID */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="l3_8dox.html#abe2aabf6e50c105312162baf807eba95">stat_pp_profile</a>;                <span class="comment">/* Statistics ID and profile */</span></div><div class="line">    <a class="code" href="group__types.html#ga7f4890ec7a6446a0a6c0cb66ed180627">bcm_mpls_label_t</a> <a class="code" href="structbcm__mpls__port__s.html#afec988f1692d10b073e1ec6de49ce35f">context_label</a>;     <span class="comment">/* Ingress match - context label */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="structbcm__mpls__port__s.html#a00cb6b3a07b7a89e643a866eb85fd0cc">ingress_if</a>;                <span class="comment">/* Ingress match - context interface */</span></div><div class="line">} <a class="code" href="group__mpls.html#gaa2dd67e93aa30cd83fcf816a8014ea4c">bcm_mpls_port_t</a>;</div></div><!-- fragment --><p>An MPLS port is a "virtual-port" that can be added to an L2 VPN. An MPLS port can be:</p><ul>
<li>An MPLS pseudowire (identified by MPLS VC label)</li>
<li>A physical port (identified by any combination of physical port, outer VLAN, inner VLAN) In VPLS, MPLS ports that are added to the L2 VPN are part of the L2 flooding domain (similar to physical ports added to a VLAN). In VPWS, two MPLS ports are added to make the point-to-point connection. Each MPLS port has a unique GPORT identifier, mpls_port_id, that is allocated by the SDK when the MPLS port is added to a VPN. An MPLS port consists of ingress and egress parameters. The ingress parameters are the "match criteria", which are used to associate incoming packets with an MPLS port based on incoming physical port and/or packet header information. The bcm_mpls_port_match_t types define which information is used as match criteria.</li>
</ul>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port Match Criteria</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_INVALID </td><td>Invalid value  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_NONE </td><td>No source match criteria  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT </td><td>{Module, Port} or Trunk  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN </td><td>Mod/port/trunk + outer VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_INNER_VLAN </td><td>Mod/port/trunk + inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN_STACKED </td><td>Mod/port/trunk + outer/inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_VLAN_PRI </td><td>Mod/port/trunk + VLAN-PRI + VLAN-CFI  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL </td><td>Ingress MPLS VC label  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_PORT </td><td>Ingress MPLS VC label + mod/port/trunk  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_VLAN </td><td>Ingress MPLS VC label + VLAN  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_SUBPORT_PKT_VID, </td><td>Mod/port/trunk + LLTAG VLAN ID.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_SUBPORT_PKT_VID_OUTER_VLAN </td><td>Mod/port/trunk + LLTAG VLAN ID + outer VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_SUBPORT_PKT_VID_INNER_VLAN </td><td>Mod/port/trunk + LLTAG VLAN ID + inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_SHARE </td><td>Multiple match criteria share one MPLS logical port  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN_TAG </td><td>Mod/port/trunk + outer VLAN-PRI + outer VLAN-CFI + outer VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_INNER_VLAN_TAG </td><td>Mod/port/trunk + inner VLAN-PRI + inner VLAN-CFI + inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_VLAN </td><td>Outer VLAN only  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_CONTEXT_LABEL </td><td>Context MPLS label + VC label.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_L3_INGRESS_INTF </td><td>L3 interface ID + VC label.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_PORT_GROUP </td><td>MPLS label + port group.  </td></tr>
</table>
<p>If match criteria type BCM_MPLS_IF_MATCH_NONE is selected, the Field Processor can be used to assign the MPLS port for a packet (see bcmFieldActionIncomingMplsPortSet field action API).</p>
<p>If match criteria type BCM_MPLS_PORT_MATCH_VLAN_PRI is selected, then the 4 MSB bits of bcm_mpls_port_t field match_vlan to be encoded with VLAN_PRI and VLAN_CFI.</p>
<p>If match criteria type BCM_MPLS_PORT_MATCH_PORT_VLAN_TAG is selected, then the 4 MSB bits of bcm_mpls_port_t field match_vlan to be encoded with VLAN_PRI and VLAN_CFI and 12 LSB bits with outer vlan id value.</p>
<p>If match criteria type BCM_MPLS_PORT_MATCH_PORT_INNER_VLAN_TAG is selected, then the 4 MSB bits of bcm_mpls_port_t field match_inner_vlan to be encoded with VLAN_PRI and VLAN_CFI and 12 LSB bits with inner vlan id value.</p>
<p>The following table indicates which parameters are valid for each match criteria:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port Match Criteria Parameters</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_INVALID </td><td>NONE  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_NONE </td><td>NONE  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT </td><td>port  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN </td><td>port, outer VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_INNER_VLAN </td><td>Mod/port/trunk, inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN_STACKED </td><td>port, VLAN ID, inner_vlan ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_VLAN_PRI </td><td>port, VLAN-PRI, VLAN-CFI  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL </td><td>label  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_PORT </td><td>label, port  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_LABEL_VLAN </td><td>label, VLAN  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_VLAN_TAG </td><td>Mod/port/trunk, outer VLAN-PRI, outer VLAN-CFI, outer VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_PORT_INNER_VLAN_TAG </td><td>Mod/port/trunk, inner VLAN-PRI, inner VLAN-CFI, inner VLAN ID  </td></tr>
<tr>
<td>BCM_MPLS_PORT_MATCH_VLAN </td><td>Outer VLAN only  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port VCCV Type</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>bcmMplsPortControlChannelNone </td><td>No VCCV Channel  </td></tr>
<tr>
<td>bcmMplsPortControlChannelAch </td><td>ACH Control Channel  </td></tr>
<tr>
<td>bcmMplsPortControlChannelRouterAlert </td><td>MPLS Router Alert Channel  </td></tr>
<tr>
<td>bcmMplsPortControlChannelTtl </td><td>MPLS PW Label with TTL = 1  </td></tr>
<tr>
<td>bcmMplsPortControlChannelGalUnderPw </td><td>GAL label under MPLS PW Label  </td></tr>
</table>
<p>The egress parameters specify the destination and outgoing packet information for the MPLS port. The destination can be a mod/port/trunk or MPLS tunnel. The egress_tunnel_if parameter is used to specify the MPLS tunnel. If the destination is an MPLS tunnel, egress_tunnel_if must be a valid egress object. An egress object for an MPLS tunnel is constructed by calling the following APIs (this is described in more detail in the L3 MPLS section):</p>
<ul>
<li><a class="el" href="group__l3.html#ga7eb14ad0c0eb6e15808642fa0b1c2c0d" title="Create a new L3 interface.">bcm_l3_intf_create()</a></li>
<li><a class="el" href="group__mpls.html#ga6e579c050dd40e7efecda9b2d4bf87a9" title="Set the MPLS tunnel initiator parameters for an L3 interface.">bcm_mpls_tunnel_initiator_set()</a> (or bcm_mpls_tunnel_initiator_create for DNX devices)</li>
<li><a class="el" href="group__l3.html#gab453a205af5926f23ec35e44e991dea6" title="Create an Egress forwarding object.">bcm_l3_egress_create()</a> If the destination is an MPLS tunnel, the mod/port/trunk from the tunnel egress object are used. If the destination is not an MPLS tunnel, the mod/port/trunk from the port parameter are used.</li>
</ul>
<p>The following is an example of two MPLS ports added to a VPWS VPN. In this example, all Ethernet frames arriving on port ge3 are sent to an MPLS pseudowire identified by MPLS VC label 100. All MPLS packets arriving from the pseudowire with MPLS VC label 100 are decapsulated and sent directly out port ge3.</p>
<p>MPLS port #1 parameters:</p><ul>
<li>criteria = BCM_MPLS_PORT_MATCH_PORT</li>
<li>port = ge3</li>
</ul>
<p>MPLS port #2 parameters:</p><ul>
<li>criteria = BCM_MPLS_PORT_MATCH_LABEL</li>
<li>flags = BCM_MPLS_PORT_EGRESS_TUNNEL (indicates egress_tunnel_if is valid)</li>
<li>label = 100 (incoming VC label)</li>
<li>egress_label = 100 (outgoing VC label)</li>
<li>egress_tunnel_if = &lt;egress object="" of="" mpls="" tunnel&gt;=""&gt;</li>
</ul>
<p>The if_class parameter can be used to aggregate a group of MPLS ports for classification purposes. The if_class value is simply an integer value provided by the caller which can later be used in the field processor classification.</p>
<p>For VPWS, packets sent over the MPLS pseudowire can optionally contain a 4-byte control word (added to the Ethernet frame before it is encapsulated with MPLS labels). When in-order delivery is required, a 16-bit sequence number is used in the control word. See flags description below.</p>
<p>Ethernet frames transported using VPWS and VPLS may use the 802.3 VLAN tag as a service delimiting tag (SD-tag) to distinguish traffic from different customers. The flags parameter is used to specify the SD-tag action for outgoing packets.</p>
<p>The following table describes the MPLS port flags:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port Flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_PORT_REPLACE </td><td>Used for updates of an existing MPLS port with the same criteria type  </td></tr>
<tr>
<td>BCM_MPLS_PORT_WITH_ID </td><td>Indicates mpls_port_id value is valid  </td></tr>
<tr>
<td>BCM_MPLS_PORT_ENCAP_WITH_ID </td><td>Use the specified encap ID to allocate and setup encapsulation.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_DROP </td><td>Drop all matching packets  </td></tr>
<tr>
<td>BCM_MPLS_PORT_NETWORK </td><td>Network-facing MPLS port. This is used to identify a port as network port and also used for split-horizon checks.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_CONTROL_WORD </td><td>Insert a 4-byte control word (VPWS)  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SEQUENCED </td><td>Insert a 16-bit sequence number in the control word (VPWS). Check for out-of-sequence packets.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_COUNTED </td><td>Maintain byte/packet counters per MPLS label  </td></tr>
<tr>
<td>BCM_MPLS_PORT_INT_PRI_SET </td><td>Indicates int_pri is valid and should be used for internal priority for packets. Also indicates that exp_map is valid and should be used for EXP-to-color mapping.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_INT_PRI_MAP </td><td>Indicates exp_map is valid and should be used for EXP-to-{internal priority, color} mapping for packets.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_COLOR_MAP </td><td>Indicates exp_map is valid and should be used for EXP-to-{color} mapping for packets.It should be used with BCM_MPLS_PORT_INT_PRI_SET together.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_EGRESS_TUNNEL </td><td>Destination is an MPLS tunnel (egress_tunnel_if points to a valid egress object)   </td></tr>
<tr>
<td>BCM_MPLS_PORT_NO_EGRESS_TUNNEL_ENCAP </td><td>Destination is an MPLS tunnel (egress_tunnel_if points to a valid egress object). This flag indicates not to encapsulate outer MAC but update MAC Address on the packet   </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_TAGGED </td><td>Indicates if the tag is service delimiting. Used to identify if a pseudowire is in tagged vs raw mode.   </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_ADD </td><td>Add an SD-tag if one is not already present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_REPLACE </td><td>Replace the existing SD-tag if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_DELETE </td><td>Delete the SD-tag if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_TPID_REPLACE </td><td>Replace the existing SD-tag and TPID if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_PRI_TPID_REPLACE </td><td>Replace the existing SD-tag, SD_tag-Priority and TPID if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_PRI_REPLACE </td><td>Replace the existing SD-tag and SD_tag-Priority if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_PRI_REPLACE </td><td>Replace the existing SD_tag-Priority if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_SERVICE_VLAN_TPID_REPLACE </td><td>Replace the existing SD_tag-TPID if one is present.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_INNER_VLAN_PRESERVE </td><td>Preserve the inner or customer VLAN tag.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_INNER_VLAN_ADD </td><td>Add a Native VLAN tag for untagged packets  </td></tr>
<tr>
<td>BCM_MPLS_PORT_EGRESS_UNTAGGED </td><td>Do not push a tag on egress from the MPLS port.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_FAILOVER </td><td>Indicates this port is a failover port.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_ENTROPY_ENABLE </td><td>Enable MPLS Entropy Label for L2-VPN.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_PW_FAILOVER </td><td>Indicates this pw is a redundant or failover pw.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_L3_FORWARD </td><td>If set then SKIP following Ethernet and forward packet according to next (L3) header.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_EXTENDED </td><td>If set then use the extended P2P service.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_WITH_GAL </td><td>OAMoGALoPWE is supported.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_LOCAL_PROTECTION </td><td>Local protection according to link status.  </td></tr>
<tr>
<td>BCM_MPLS_PORT_FORWARD_GROUP </td><td>Enable VLAN-Port property FORWARD_GROUP to MPLS-Port.  </td></tr>
</table>
<p>The following table describes an extension of MPLS port flags:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port Flags(2)</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_PORT2_INGRESS_ONLY </td><td>Indicates ingress settings  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_EGRESS_ONLY </td><td>Indicates egress settings  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_EGRESS_PROTECTION </td><td>Egress protection object  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_TUNNEL_PUSH_INFO </td><td>Allocate MPLS Push profile information  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_LEARN_ENCAP </td><td>Learning information is a pointer to encapsulation database entry  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_CASCADED </td><td>Set in case the mpls port is over overlay  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_INGRESS_WIDE </td><td>Set in case the mpls port eligible for additional data  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_TUNNEL_HEADER_EGRESS_VLAN_TRANSLATION </td><td>If set, MPLS tunnel header's VLAN will be translated; else, payload's VLAN will be translated.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_PROXY_MODE </td><td>Act as proxy mode, and do packet modifications for HG output port on VPWS/VPLS stacking mode.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_INGRESS_ENTROPY_ENABLE </td><td>If set, enables the termination of entropy label following the ingressing match label.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_ENCAP_OPTIMIZED </td><td>Indicate that FEC should be set as format C (EEI).  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_QOS_NONE </td><td>Indicate that no QOS configuration on the MPLS port.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_INGRESS_ECN_MAP </td><td>If set, indicate that an EXP TO ECN mapping should be added for VC label.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_KEEP_TTL </td><td>Retain incoming TTL by disabling decrement for MPLS flows.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_LEARN_ENCAP_EEI </td><td>Learning information is two pointers to encapsulation database entries. FEC should be set as format B(OutLIF).  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_OUTER_TTL </td><td>TTL flag used to indicate if TTL is taken from PIPE or UNIFORM.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_OUTER_EXP </td><td>QOS flag used to indicate if QOS is taken from PIPE or UNIFORM.  </td></tr>
<tr>
<td>BCM_MPLS_PORT2_SERVICE_CFI_REPLACE </td><td>Replace the existing SD_tag-CFI if one is present. Note that this flag takes effect only when BCM_MPLS_PORT_SERVICE_VLAN_PRI_TPID_REPLACE, BCM_MPLS_PORT_SERVICE_VLAN_PRI_REPLACE or BCM_MPLS_PORT_SERVICE_PRI_REPLACE is set.  </td></tr>
<tr>
<td>MPLS_PORT2_STAT_ENABLE </td><td>Indicates statistics enabled.  </td></tr>
<tr>
<td>MPLS_PORT2_INTERFACE_NAMESPACE </td><td>Indicate that MPLS Port is working in interface namespace.  </td></tr>
<tr>
<td>MPLS_PORT2_SW_FAILOVER </td><td>Use the software failover mechanism.  </td></tr>
</table>
<p>The following table describes MPLS traverse flags:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS traverse Flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MPLS_TRAVERSE_DELETE </td><td>Indicates to delete mpls port entries  </td></tr>
</table>
<p>The failover_id parameter is to be used only if MPLS FRR need to be enabled for VPWS/VPLS VPN. The failover_id must be created using the Failover APIs (Refer to the Failover section on the usage of Failover APIs). If the Service Provider MPLS port for Failover is added first using the bcm_mpls_port_add API. This API returns mpls_port_id, which must be passed as the input parameter within failover_port_id during the creation of Primary Service Provider MPLS port(s). The failover_id must be set during the creation of Primary Service Provider MPLS port(s). If the Primary Service Provider MPLS port is added first using the bcm_mpls_port_add API. This API returns mpls_port_id, which must be passed as the input parameter within failover_port_id during the creation of Service Provider MPLS port(s) for Failover. The failover_id and BCM_MPLS_PORT_FAILOVER flag must be set during the creation of Service Provider MPLS port(s) for Failover.</p>
<p>The network_group_id parameter is used only for devices supporting multiple split-horizon groups (BCM5645x devices, for example). This is used along with the flags = BCM_MPLS_PORT_NETWORK. The split-horizon group configuration for the given network_group_id can be done using API <a class="el" href="group__switch.html#bcm_switch_network_group_config_set">bcm_switch_network_group_config_set</a></p>
<h1><a class="anchor" id="mpls_failover"></a>
MPLS Failover</h1>
<p>Three scenarios are applicable for MPLS failover within SDK:</p><ul>
<li>Failover APIs for BCM56634</li>
<li>In place UPDATE through bcm_mpls_port_add and flags for BCM56624</li>
<li>Attach/Detach mechanism through bcm_mpls_port_add and flags for BCM56624</li>
</ul>
<p>Steps for Attach/Detach mechanism:</p><ul>
<li>bcm_mpls_port_add (unit, vpn, bcm_mpls_port_t *) to create Primary VPs</li>
<li>bcm_mpls_port_add (unit, BCM_MPLS_VPxS_VPN_INVALID, bcm_mpls_port_t *) to create the Backup VP. As the Backup VP is created without a VPN (vpn = BCM_MPLS_VPxS_VPN_INVALID), the packets match SVP with INVALID Entry_type. By default, these packets are trapped to CPU. <a class="anchor" id="Upon"></a>Primary VP failure, Detach Primary VP from VPN bcm_mpls_port_add (unit, BCM_MPLS_VPxS_VPN_INVALID, bcm_mpls_port_t *) flags=BCM_MPLS_PORT_WITH_ID <a class="anchor" id="For"></a>VPLS, delete all MAC address within VFI using bcm_l2_replace () API <a class="anchor" id="Attach"></a>the Backup VP to VPN bcm_mpls_port_add (unit, vpn, bcm_mpls_port_t *) flags=BCM_MPLS_PORT_WITH_ID</li>
</ul>
<h1><a class="anchor" id="mpls_generic_apis"></a>
Generic MPLS APIs</h1>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga8237f27439e5984d16085f8f51437d86" title="Initialize the MPLS port structure.">bcm_mpls_port_t_init(bcm_mpls_port_t* mpls_port)</a>  </td><td>Initialize the MPLS port structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gac6bc9093c11c0fa3e736e812ba8d806e" title="Initialize the MPLS VPN config structure.">bcm_mpls_vpn_config_t_init(bcm_mpls_vpn_config_t* info)</a>  </td><td>Initialize the MPLS VPN config structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga77fd031d54d9d444d1785eb9e95fdff6" title="Initialize the MPLS egress label structure.">bcm_mpls_egress_label_t_init(bcm_mpls_egress_label_t* label)</a>  </td><td>Initialize the MPLS egress label structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga5be0534cba5cfa6210e4c9eb493a782a" title="Initialize the MPLS tunnel switch structure.">bcm_mpls_tunnel_switch_t_init(bcm_mpls_tunnel_switch_t* info)</a>  </td><td>Initialize the MPLS tunnel switch structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf76c837b341c251d82085d019afb3385" title="Initialize MPLS Entropy label identifier structure.">bcm_mpls_entropy_identifier_t_init(bcm_mpls_entropy_identifier_t* info)</a>  </td><td>Initialize MPLS Entropy label identifier structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga33217ac7a61ca7636d6d7f6c4e49ae00" title="Initialize the MPLS EXP map structure.">bcm_mpls_exp_map_t_init(bcm_mpls_exp_map_t* exp_map)</a>  </td><td>Initialize the MPLS EXP map structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga69b410e7448b188c7a803720f9e40923" title="Initialize the BCM MPLS subsystem.">bcm_mpls_init(int unit)</a>  </td><td>Initialize the BCM MPLS subsystem.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf83133ed9889e72f0d871245f4834328" title="Detach the MPLS software module.">bcm_mpls_cleanup(int unit)</a>  </td><td>Detach the MPLS software module.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gad4661ab65a7ee76d9237f74b420a7897" title="Add an MPLS Entropy Label Identifier.">bcm_mpls_entropy_identifier_add(int unit, uint32 options, bcm_mpls_entropy_identifier_t* info)</a>  </td><td>Add an MPLS Entropy Label Identifier.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga61f7ef74be570f7ead717a36c1ed4107" title="Delete an MPLS Entropy Label Identifier.">bcm_mpls_entropy_identifier_delete(int unit, bcm_mpls_entropy_identifier_t* info)</a>  </td><td>Delete an MPLS Entropy Label Identifier.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaea06034d0bcecf15971321c45d003321" title="Delete all MPLS Entropy Label Identifiers.">bcm_mpls_entropy_identifier_delete_all(int unit)</a>  </td><td>Delete all MPLS Entropy Label Identifiers.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga66eb3adf86e1fbda8c7d99ed8b4be3f1" title="Get information about an MPLS Entropy Label Identifier.">bcm_mpls_entropy_identifier_get(int unit, bcm_mpls_entropy_identifier_t* info)</a>  </td><td>Get information about an MPLS Entropy Label Identifier.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gadad9a75603ed0305f3695effc363e096" title="Traverse all valid MPLS entropy label identifier entries and call the supplied callback routine.">bcm_mpls_entropy_identifier_traverse(int unit, bcm_mpls_entropy_identifier_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all valid MPLS entropy label identifier entries and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaef15959a435d482da62a14208d514b7d" title="Create an MPLS EXP map instance.">bcm_mpls_exp_map_create(int unit, uint32 flags, int* exp_map_id)</a>  </td><td>Create an MPLS EXP map instance.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gabf7bb6701a197a2f1ed6fb3e455be16d" title="Destroy an MPLS EXP map instance.">bcm_mpls_exp_map_destroy(int unit, int exp_map_id)</a>  </td><td>Destroy an MPLS EXP map instance.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga5fec706f06added9b02ff4a33c965cd6" title="Set the EXP mapping parameters for the specified EXP map.">bcm_mpls_exp_map_set(int unit, int exp_map_id, bcm_mpls_exp_map_t* exp_map)</a>  </td><td>Set the EXP mapping parameters for the specified EXP map.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga7dc0a33d63aac1e55bc90783de069efb" title="Get the EXP mapping parameters for the specified EXP map.">bcm_mpls_exp_map_get(int unit, int exp_map_id, bcm_mpls_exp_map_t* exp_map)</a>  </td><td>Get the EXP mapping parameters for the specified EXP map.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga2f78d5af39912b388346602b45b71064" title="Create an MPLS VPN.">bcm_mpls_vpn_id_create(int unit, bcm_mpls_vpn_config_t* info)</a>  </td><td>Create an MPLS VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga0b02e38dd3739fee05bca8dbfc5a1845" title="Destroy an MPLS VPN.">bcm_mpls_vpn_id_destroy(int unit, bcm_vpn_t vpn)</a>  </td><td>Destroy an MPLS VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga82cdf09d60808817a5fe1a1b53d25c23" title="Destroy an MPLS VPN.">bcm_mpls_vpn_id_destroy_all(int unit)</a>  </td><td>Destroy an MPLS VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga6f5329ab7182c0a1f4df5ae099bf4d91" title="Get an MPLS VPN.">bcm_mpls_vpn_id_get(int unit, bcm_vpn_t vpn, bcm_mpls_vpn_config_t* info)</a>  </td><td>Get an MPLS VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf1e4bf9eff41b0a2c54dfe60a23d56cf" title="Traverse all valid MPLS VPN entries and call the supplied callback routine.">bcm_mpls_vpn_traverse(int unit, bcm_mpls_vpn_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all valid MPLS VPN entries and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gab474e7471ef360d0d1234bfde18f8683" title="Add an MPLS port to an L2 VPN.">bcm_mpls_port_add(int unit, bcm_vpn_t vpn, bcm_mpls_port_t* mpls_port)</a>  </td><td>Add an MPLS port to an L2 VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga135b4aec0abee95494648db5dbd41b56" title="Delete an MPLS port from an L2 VPN.">bcm_mpls_port_delete(int unit, bcm_vpn_t vpn, bcm_gport_t mpls_port_id)</a>  </td><td>Delete an MPLS port from an L2 VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gae515a5a68706ed663ec59d2b5dd71941" title="Delete an MPLS port from an L2 VPN.">bcm_mpls_port_delete_all(int unit, bcm_vpn_t vpn)</a>  </td><td>Delete an MPLS port from an L2 VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga1ac9c7259feb121a795efaf45e46d16d" title="Get an MPLS port from an L2 VPN.">bcm_mpls_port_get(int unit, bcm_vpn_t vpn, bcm_mpls_port_t* mpls_port)</a>  </td><td>Get an MPLS port from an L2 VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gae997d399ff089e92c3e70f1f65d0f9c0" title="Get all MPLS ports from an L2 VPN.">bcm_mpls_port_get_all(int unit, bcm_vpn_t vpn, int port_max, bcm_mpls_port_t* port_array, int* port_count)</a>  </td><td>Get all MPLS ports from an L2 VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga9c973b41733580cd21da7631bda5ef29" title="Enable/disable statistics collection for MPLS label or MPLS gport.">bcm_mpls_label_stat_enable_set(int unit, bcm_mpls_label_t label, bcm_gport_t port, int enable)</a>  </td><td>Enable/disable statistics collection for MPLS label or MPLS gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga1ad188529e2e672710fea081c0819398" title="Get MPLS Stats.">bcm_mpls_label_stat_get(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint64* val)</a>  </td><td>Get MPLS Stats.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga29ee7d58ab38806e398ae1f16cedd43c" title="Get MPLS Stats.">bcm_mpls_label_stat_get32(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32* val)</a>  </td><td>Get MPLS Stats.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gac12dbdb1894507ced66c169bab44c71e" title="Force an immediate counter update and retrieve MPLS Stats.">bcm_mpls_label_stat_sync_get(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint64* val)</a>  </td><td>Force an immediate counter update and retrieve MPLS Stats.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaaf283b0aed3f2a128ad920dc9a10db78" title="Force an immediate counter update and retrieve MPLS Stats.">bcm_mpls_label_stat_sync_get32(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32* val)</a>  </td><td>Force an immediate counter update and retrieve MPLS Stats.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga944a275c21af8c67c4e583103d796ffc" title="Clear MPLS Stats.">bcm_mpls_label_stat_clear(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat)</a>  </td><td>Clear MPLS Stats.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga7de135d48eda9bf842c0ca7fc1ecca03" title="Attach counters entries to the given MPLS label and gport.">bcm_mpls_label_stat_attach(int unit, bcm_mpls_label_t label, bcm_gport_t port, uint32 stat_counter_id)</a>  </td><td>Attach counters entries to the given MPLS label and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaa9d935869d72ad281c60968bc4a918a6" title="Detach counters entries to the given MPLS label and gport.">bcm_mpls_label_stat_detach(int unit, bcm_mpls_label_t label, bcm_gport_t port)</a>  </td><td>Detach counters entries to the given MPLS label and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gab80548aa46ca31d8f0efc47ddc768866" title="Get counter statistic values for specific MPLS label and gport.">bcm_mpls_label_stat_counter_get(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Get counter statistic values for specific MPLS label and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga87f9d6cb2946876a2f5a8edd856ee9b5" title="Force an immediate counter update and retrieve counter statistic values for specific MPLS label and g...">bcm_mpls_label_stat_counter_sync_get(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Force an immediate counter update and retrieve counter statistic values for specific MPLS label and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga229d3f5ac8152b012fb4d01c245c00a0" title="Set counter statistic values for specific MPLS label and gport.">bcm_mpls_label_stat_counter_set(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Set counter statistic values for specific MPLS label and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gabd688ad436f7727144dd44969c6cbfb2" title="Get stat counter ID associated with given MPLS label and gport.">bcm_mpls_label_stat_id_get(int unit, bcm_mpls_label_t label, bcm_gport_t port, bcm_mpls_stat_t stat, uint32* stat_counter_id)</a>  </td><td>Get stat counter ID associated with given MPLS label and gport.   </td></tr>
</table>
<h1><a class="anchor" id="mpls_l3_apis"></a>
L3 MPLS APIs</h1>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga6e579c050dd40e7efecda9b2d4bf87a9" title="Set the MPLS tunnel initiator parameters for an L3 interface.">bcm_mpls_tunnel_initiator_set(int unit, bcm_if_t intf, int num_labels, bcm_mpls_egress_label_t* label_array)</a>  </td><td>Set the MPLS tunnel initiator parameters for an L3 interface.   </td></tr>
<tr>
<td>bcm_mpls_tunnel_intiator_create()  </td><td>Set the MPLS tunnel initiator parameters for an L3 interface.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf19d9d91378e445c33fc6263bc067785" title="Traverse valid MPLS label egress entries, as per input flags, and call the supplied callback routine.">bcm_mpls_tunnel_initiator_traverse(int unit, bcm_mpls_tunnel_initiator_traverse_info_t* additional_info, bcm_mpls_tunnel_initiator_traverse_cb cb, void* user_data)</a>  </td><td>Traverse valid MPLS label egress entries, as per input flags, and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga1ca034f3ff544f0816e5bfa9203d18ab" title="Clear the MPLS tunnel initiator parameters for an L3 interface.">bcm_mpls_tunnel_initiator_clear(int unit, bcm_if_t intf)</a>  </td><td>Clear the MPLS tunnel initiator parameters for an L3 interface.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaa70af97eb336b860372002f521917a95" title="Clear all MPLS tunnel initiator information.">bcm_mpls_tunnel_initiator_clear_all(int unit)</a>  </td><td>Clear all MPLS tunnel initiator information.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga3c641794a48d82dee90e5439f8111caa" title="Get the MPLS tunnel initiator parameters from an L3 interface.">bcm_mpls_tunnel_initiator_get(int unit, bcm_if_t intf, int label_max, bcm_mpls_egress_label_t* label_array, int* label_count)</a>  </td><td>Get the MPLS tunnel initiator parameters from an L3 interface.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga8321f90ddd3b3ce94ac4cf0d1488dbae" title="Initialize the MPLS tunnel encap structure.">bcm_mpls_tunnel_encap_t_init(bcm_mpls_tunnel_encap_t* tunnel_encap)</a>  </td><td>Initialize the MPLS tunnel encap structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gae0f3d4d19b559b251452f88dcd309cb0" title="Create the MPLS tunnel initiator.">bcm_mpls_tunnel_encap_create(int unit, uint32 options, bcm_mpls_tunnel_encap_t* tunnel_encap)</a>  </td><td>Create the MPLS tunnel initiator.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga27921c6f6fa9add40ac7be9e92bd65bc" title="Get the MPLS tunnel initiator.">bcm_mpls_tunnel_encap_get(int unit, bcm_mpls_tunnel_encap_t* tunnel_encap)</a>  </td><td>Get the MPLS tunnel initiator.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga344ee78374a664f8534e49bd128c8e0b" title="Destroy the MPLS tunnel initiator.">bcm_mpls_tunnel_encap_destroy(int unit, bcm_gport_t tunnel_id)</a>  </td><td>Destroy the MPLS tunnel initiator.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga7f9560adbe7fe5fb0ca636a1b3091a47" title="Destroy all MPLS tunnel initiators.">bcm_mpls_tunnel_encap_destroy_all(int unit)</a>  </td><td>Destroy all MPLS tunnel initiators.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga624d586c28cdd6183d652863d80a6d07" title="Add an MPLS label entry.">bcm_mpls_tunnel_switch_add(int unit, bcm_mpls_tunnel_switch_t* info)</a>  </td><td>Add an MPLS label entry.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga53b6660ad87c420d729031946e5aac13" title="Add an MPLS label entry.">bcm_mpls_tunnel_switch_create(int unit, bcm_mpls_tunnel_switch_t* info)</a>  </td><td>Add an MPLS label entry.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga6136e15e0d0234c6939d602db1b11b2e" title="Delete an MPLS label entry.">bcm_mpls_tunnel_switch_delete(int unit, bcm_mpls_tunnel_switch_t* info)</a>  </td><td>Delete an MPLS label entry.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga2cad5ed835b458b3f79b6da310c55ca9" title="Delete all MPLS label entries.">bcm_mpls_tunnel_switch_delete_all(int unit)</a>  </td><td>Delete all MPLS label entries.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gafc6fe559e62ca12876285cb1f882ffa1" title="Get an MPLS label entry.">bcm_mpls_tunnel_switch_get(int unit, bcm_mpls_tunnel_switch_t* info)</a>  </td><td>Get an MPLS label entry.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga46fd0b408f7cc9450898153f754414d1" title="Traverse all valid MPLS label entries and call the supplied callback routine.">bcm_mpls_tunnel_switch_traverse(int unit, bcm_mpls_tunnel_switch_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all valid MPLS label entries and call the supplied callback routine.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gad553e5c482b1c3f5166b9c00dd352d43" title="Attach statistics entity to the MPLS tunnel derived from the given L3 Egress interface.">bcm_mpls_tunnel_stat_attach(int unit, bcm_if_t intf_id, uint32 stat_counter_id)</a>  </td><td>Attach statistics entity to the MPLS tunnel derived from the given L3 Egress interface   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaa6357dc0787c7b9ca918a5d575c9c46a" title="Detach statistics entity to the MPLS tunnel derived from the given L3 Egress interface.">bcm_mpls_tunnel_stat_detach(int unit, bcm_if_t intf_id)</a>  </td><td>Detach statistics entity to the MPLS tunnel derived from the given L3 Egress interface.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaba1e6b430238741b9498a033c89e0d80" title="Get counter value for the specified MPLS statistic type and Tunnel interface derived from the given L...">bcm_mpls_tunnel_stat_counter_get(int unit, bcm_if_t intf_id, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Get counter value for the specified MPLS statistic type and Tunnel interface derived from the given L3 interface ID   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gad994c1013b7af32604a1777f80939148" title="Force an immediate counter update and retrieve the specified counter statistic for a MPLS tunnel.">bcm_mpls_tunnel_stat_counter_sync_get(int unit, bcm_if_t intf_id, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Force an immediate counter update and retrieve the specified counter statistic for a MPLS tunnel   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga304e138eb6435c96fbae6f217f6ddd14" title="Set the counter value for the specified MPLS statistic type and Tunnel interface derived derived from...">bcm_mpls_tunnel_stat_counter_set(int unit, bcm_if_t intf_id, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Set the counter value for the specified MPLS statistic type and Tunnel interface derived derived from the given L3 Interface ID.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gab1fe32f3d6a3a1e4d71fae56c2c0d699" title="Get stat counter ID associated with the MPLS tunnel derived from the given L3 interface ID.">bcm_mpls_tunnel_stat_id_get(int unit, bcm_if_t intf_id, bcm_mpls_stat_t stat, uint32* stat_counter_id)</a>  </td><td>Get stat counter ID associated with the MPLS tunnel derived from the given L3 interface ID.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga2ffebc25ad0ffccc7e6f0353b14e8041" title="Initialize the MPLS tunnel Stat info structure.">bcm_mpls_stat_info_t_init(bcm_mpls_stat_info_t* stat_info)</a>  </td><td>Initialize the MPLS tunnel Stat info structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga0f9236090ffb14202503b33f15a26971" title="Detach counter entry of the specific MPLS tunnel label pointed to by the given stat counter id.">bcm_mpls_tunnel_label_counter_id_detach(int unit, bcm_if_t intf_id, uint32 stat_counter_id)</a>  </td><td>Detach counter entry of the specific MPLS tunnel label pointed to by the given stat counter id.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga75cc7144d2ae6db938d56a629d216797" title="Get the specified counter statistics for the given MPLS Tunnel label and counter id associated with i...">bcm_mpls_tunnel_label_counter_id_stat_get(int unit, bcm_if_t intf_id, uint32 stat_counter_id, bcm_mpls_stat_info_t* stat_info)</a>  </td><td>Get the specified counter statistics for the given MPLS Tunnel label and counter id associated with it.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga40fda730617a616b9a86495b92c21dd9" title="Set the specified counter statistics for the given MPLS Tunnel label and counter id associated with i...">bcm_mpls_tunnel_label_counter_id_stat_set(int unit, bcm_if_t intf_id, uint32 stat_counter_id, bcm_mpls_stat_info_t* stat_info)</a>  </td><td>Set the specified counter statistics for the given MPLS Tunnel label and counter id associated with it.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga0fb6de3d09e39b40fda5a54716f2d230" title="Get the specified counter statistics for the given MPLS Tunnel label and counter id associated with i...">bcm_mpls_tunnel_label_counter_id_stat_sync_get(int unit, bcm_if_t intf_id, uint32 stat_counter_id, bcm_mpls_stat_info_t* stat_info)</a>  </td><td>Get the specified counter statistics for the given MPLS Tunnel label and counter id associated with it. SW accumulated counters are made in sync with the hw count.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga47a367ce4266375a88a893f8a456026e" title="Get the array of stat counter ids associated with the given MPLS tunnel interface....">bcm_mpls_tunnel_label_counter_id_num_get(int unit, bcm_if_t intf_id, int* num_counters, uint32* stat_counter_id)</a>  </td><td>Get the array of stat counter ids associated with the given MPLS tunnel interface. It can also provide the number of counter indexes associated with the MPLS tunnel.   </td></tr>
</table>
<h1><a class="anchor" id="mpls_ttl_processing"></a>
MPLS TTL Processing Models</h1>
<p>This section describes the usage of BCM MPLS API to accomplish various TTL processing models namely Uniform, Short Pipe and Pipe as per RFC 3443.</p>
<p>The flags BCM_MPLS_SWITCH_OUTER_TTL and BCM_MPLS_SWITCH_INNER_TTL mean use the ttl from outer or inner MPLS label (header) and decrement by 1 for the egress packet format. The egress format could either be IP or MPLS. The flag BCM_MPLS_EGRESS_LABEL_TTL_COPY used in LER and LSR (PHP and non-PHP) cases also means the same.</p>
<p>Ingress PE (Provider Edge) refers to the PE network entity or node where IP packets or Layer 2 frames are encapsulated with an MPLS header. There may be more than one MPLS label (header) on the outgoing packet. Tunnel Midpoint or Provider (P) node typically swaps the outer MPLS label with another MPLS label. Egress PE refers to the PE (Provider Edge) node where the outer MPLS label(s) is popped, and the inner payload is forwarded optionally based on L2 (MAC address) lookup or IP lookup. </p><pre class="fragment">- Ingress PE
</pre><p>API used is bcm_mpls_tunnel_initiator_create for DNX devices, bcm_mpls_tunnel_initiator_set for other devices. The flags described below need to set in the "flags" field of label_array[] param.</p><ul>
<li>Uniform: BCM_MPLS_EGRESS_LABEL_TTL_COPY + BCM_MPLS_EGRESS_LABEL_TTL_DECREMENT</li>
<li>Short Pipe: BCM_MPLS_EGRESS_LABEL_TTL_SET</li>
<li>Pipe: BCM_MPLS_EGRESS_LABEL_TTL_SET</li>
</ul>
<p>Tunnel Midpoint</p>
<p>API used is bcm_mpls_tunnel_switch_create for DNX devies, bcm_mpls_tunnel_switch_add for other devices. The following flags must be set in the "flags" field of "egress_label" (of bcm_mpls_tunnel_switch_t parameter).</p><ul>
<li>Uniform: BCM_MPLS_EGRESS_LABEL_TTL_DECREMENT (or default that is,, no TTL in flags)</li>
<li>Short Pipe: BCM_MPLS_EGRESS_LABEL_TTL_DECREMENT (or default that is,, no TTL in flags)</li>
<li>Pipe: BCM_MPLS_EGRESS_LABEL_TTL_DECREMENT (or default that is,, no TTL in flags)</li>
</ul>
<p>Penultimate to Egress PE (PHP)</p>
<p>API used is bcm_mpls_tunnel_switch_create for DNX devices, bcm_mpls_tunnel_switch_add for other devices. The following flags must be set in the flags field of "bcm_mpls_tunnel_switch_t" parameter.</p><ul>
<li>Uniform: BCM_MPLS_SWITCH_OUTER_TTL + BCM_MPLS_SWITCH_TTL_DECREMENT</li>
<li>Short Pipe: BCM_MPLS_SWITCH_INNER_TTL</li>
<li>Pipe: there is no Pipe model defined with PHP (only short pipe w/ &amp; w/o PHP).</li>
</ul>
<p>Egress PE</p>
<p>API used is bcm_mpls_tunnel_switch_create for DNX devices, bcm_mpls_tunnel_switch_add for other devices. The following flags must be set in the flags field of "bcm_mpls_tunnel_switch_t" parameter.</p><ul>
<li>Uniform: BCM_MPLS_SWITCH_OUTER_TTL + BCM_MPLS_SWITCH_TTL_DECREMENT</li>
<li>Short Pipe: BCM_MPLS_SWITCH_INNER_TTL + BCM_MPLS_SWITCH_TTL_DECREMENT</li>
<li>Pipe: BCM_MPLS_SWITCH_INNER_TTL + BCM_MPLS_SWITCH_TTL_DECREMENT</li>
</ul>
<h1><a class="anchor" id="mpls_stats_apis"></a>
Metro Ethernet Forum Statistics per MEF Port</h1>
<p>BCM88020 devices support statistics per MEF port. The following APIs can be used to retrieve that statistics.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>MPLS Port Counters</caption>
<tr>
<th>Counter type </th><th>Description  </th></tr>
<tr>
<td>MplsPortStatUnicastPackets </td><td>Unicast packets  </td></tr>
<tr>
<td>MplsPortStatUnicastBytes </td><td>Unicast bytes  </td></tr>
<tr>
<td>MplsPortStatNonUnicastPackets </td><td>Non-unicast packets  </td></tr>
<tr>
<td>MplsPortStatNonUnicastBytes </td><td>Non-unicast bytes  </td></tr>
<tr>
<td>MplsPortStatDropPackets </td><td>Dropped packets  </td></tr>
<tr>
<td>MplsPortStatDropBytes </td><td>Dropped bytes  </td></tr>
<tr>
<td>MplsPortStatFloodPackets </td><td>Flooded packets  </td></tr>
<tr>
<td>MplsPortStatFloodBytes </td><td>Flooded bytes  </td></tr>
<tr>
<td>MplsPortStatFloodDropPackets </td><td>Flood packets that got dropped  </td></tr>
<tr>
<td>MplsPortStatFloodDropBytes </td><td>Flood bytes that got dropped  </td></tr>
<tr>
<td>MplsPortStatGreenPackets </td><td>Packets marked green  </td></tr>
<tr>
<td>MplsPortStatGreenBytes </td><td>Bytes in packets marked green  </td></tr>
<tr>
<td>MplsPortStatYellowPackets </td><td>Packets marked yellow  </td></tr>
<tr>
<td>MplsPortStatYellowBytes </td><td>Bytes in packets marked yellow  </td></tr>
<tr>
<td>MplsPortStatRedPackets </td><td>Packets marked red  </td></tr>
<tr>
<td>MplsPortStatRedBytes </td><td>Bytes in packets marked red  </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga05f369d2ae03a143fecb4581483b9e76" title="Enable or disable collection of MPLS port statistics.">bcm_mpls_port_stat_enable_set(int unit, bcm_gport_t mpls_port, int enable)</a>  </td><td>Enable or disable collection of MPLS port statistics.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf7691218f614421967510b3a77a17f6b" title="Get the specified statistics per MPLS/MEF port.">bcm_mpls_port_stat_get(int unit, bcm_gport_t mpls_port, bcm_cos_t cos, bcm_mpls_port_stat_t stat, uint64* val)</a>  </td><td>Get the specified statistics per MPLS/MEF port.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga5c3ab5df6b5c51db06c099c85a4a0023" title="Get the specified statistics per MPLS/MEF port.">bcm_mpls_port_stat_get32(int unit, bcm_gport_t mpls_port, bcm_cos_t cos, bcm_mpls_port_stat_t stat, uint32* val)</a>  </td><td>Get the specified statistics per MPLS/MEF port.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga40bbbbed366c2de02e0f19eb8d37d636" title="Set the specified statistic to the indicated value.">bcm_mpls_port_stat_set(int unit, bcm_gport_t mpls_port, bcm_cos_t cos, bcm_mpls_port_stat_t stat, uint64 val)</a>  </td><td>Set the specified statistic to the indicated value.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga74256906eac25b41e7cc041376561507" title="Attach counters entries to the given MPLS gport and vpn.">bcm_mpls_port_stat_attach(int unit, bcm_vpn_t vpn, bcm_gport_t port, uint32 stat_counter_id)</a>  </td><td>Attach counters entries to the given MPLS gport and vpn   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gabdfbf1e49a3db0d03ad28a786922c169" title="Detach counters entries to the given MPLS port and vpn.">bcm_mpls_port_stat_detach(int unit, bcm_vpn_t vpn, bcm_gport_t port)</a>  </td><td>Detach counters entries to the given MPLS port and vpn   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga5c7b5bd73974b67a0fec5d52838dc4e5" title="Get counter statistic values for specific vpn and gport.">bcm_mpls_port_stat_counter_get(int unit, bcm_vpn_t vpn, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Get counter statistic values for specific vpn and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gacded201c80cd4e0e241746304bc49185" title="Force an immediate counter update and retrieve get counter statistic values for specific vpn and gpor...">bcm_mpls_port_stat_counter_sync_get(int unit, bcm_vpn_t vpn, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Force an immediate counter update and retrieve get counter statistic values for specific vpn and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga3c469a8019eecea135eada411eb9951b" title="Set counter statistic values for specific vpn and gport.">bcm_mpls_port_stat_counter_set(int unit, bcm_vpn_t vpn, bcm_gport_t port, bcm_mpls_stat_t stat, uint32 num_entries, uint32* counter_indexes, bcm_stat_value_t* counter_values)</a>  </td><td>Set counter statistic values for specific vpn and gport   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaaa683096da04247baf8ab41db6f704d3" title="Get stat counter ID associated with given MPLS gport and VPN.">bcm_mpls_port_stat_id_get(int unit, bcm_vpn_t vpn, bcm_gport_t port, bcm_mpls_stat_t stat, uint32* stat_counter_id)</a>  </td><td>Get stat counter ID associated with given MPLS gport and VPN.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga1aa01688f50a67d86f8705839454bde9" title="Set range of labels per in lif.">bcm_mpls_range_action_add(int unit, bcm_mpls_label_t label_low, bcm_mpls_label_t label_high, bcm_mpls_range_action_t* action)</a>  </td><td>Set range of labels per in lif.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga56851cd396c9dbccd8eeee3c60779306" title="Remove range of labels per in lif.">bcm_mpls_range_action_remove(int unit, bcm_mpls_label_t label_low, bcm_mpls_label_t label_high)</a>  </td><td>Remove range of labels per in lif.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf8180720e8bca7735b997a43c1107448" title="Get range of labels per in lif.">bcm_mpls_range_action_get(int unit, bcm_mpls_label_t label_low, bcm_mpls_label_t label_high, bcm_mpls_range_action_t* action)</a>  </td><td>Get range of labels per in lif.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga3c9bb7753fd3bc27fc352d8bf8c8db5e" title="Initialize the MPLS range action structure.">bcm_mpls_range_action_t_init(bcm_mpls_range_action_t* label)</a>  </td><td>Initialize the MPLS range action structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga870cbb4bfb997b9f0e29b672f41c1279" title="Initialize the MPLS special label push element structure.">bcm_mpls_special_label_push_element_t_init(bcm_mpls_special_label_push_element_t* element)</a>  </td><td>Initialize the MPLS special label push element structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gac0209225aca71e9982972fa6f2458936" title="Set push action from the element provided by user.">bcm_mpls_special_label_push_action_set(int unit, bcm_mpls_special_label_push_element_t* element, int push_action)</a>  </td><td>Set push action from the element provided by user.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga511e84877083f026e7e3240241ef8c82" title="Get push action from the element provided by user.">bcm_mpls_special_label_push_action_get(int unit, bcm_mpls_special_label_push_element_t* element, int* push_action)</a>  </td><td>Get push action from the element provided by user.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gaf4ed554f5def2e3f86b9b656b49e2fe1" title="Add Egress special labels.">bcm_mpls_special_label_egress_add(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t label_info)</a>  </td><td>Add Egress special labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gad21193bb79319021606e181b296c3bd4" title="Get Egress spceial labels.">bcm_mpls_special_label_egress_get(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t* label_info)</a>  </td><td>Get Egress spceial labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gabc7c828b503ce6bb999304757cb9df4e" title="Delete Egress Special Labels.">bcm_mpls_special_label_egress_delete(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t label_info)</a>  </td><td>Delete Egress Special Labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga7ceee99dbe0ed67a2af07c63c6c7fb27" title="Delete all Egress Special Labels.">bcm_mpls_special_label_egress_delete_all(int unit)</a>  </td><td>Delete all Egress Special Labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga619a31de06639bee37c10b407a2c7e76" title="Traverse all egress special labels and callback user provided callback.">bcm_mpls_special_label_egress_traverse(int unit, bcm_mpls_special_label_egress_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all egress special labels and callback user provided callback.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gabdf55e86795470547d45e4c9b2505428" title="Add Egress special labels.">bcm_mpls_special_label_identifier_add(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t label_info)</a>  </td><td>Add Egress special labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gac630d8d89982f98e9a85472cc7243093" title="Get Egress spceial labels.">bcm_mpls_special_label_identifier_get(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t* label_info)</a>  </td><td>Get Egress spceial labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga02d4a08cba76fcf63ddbd166e14d07bd" title="Delete Egress Special Labels.">bcm_mpls_special_label_identifier_delete(int unit, bcm_mpls_special_label_type_t label_type, bcm_mpls_special_label_t label_info)</a>  </td><td>Delete Egress Special Labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga5c94c6b1b7bcc4ff91f631dec6e5541b" title="Delete all Egress Special Labels.">bcm_mpls_special_label_identifier_delete_all(int unit)</a>  </td><td>Delete all Egress Special Labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga865042b39363a904bf4673a7b8f53152" title="Traverse all ingress special labels and callback user provided callback.">bcm_mpls_special_label_identifier_traverse(int unit, bcm_mpls_special_label_identifier_traverse_cb cb, void* user_data)</a>  </td><td>Traverse all ingress special labels and callback user provided callback.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga35fb95c7c481f87529aa518fb89a0d02" title="Add Egress special labels.">bcm_mpls_esi_encap_add(int unit, bcm_mpls_esi_info_t* esi_info)</a>  </td><td>Add Egress special labels.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga34c5320f5089d3cf7fa2fbe2d2412d5a" title="Get esi encap id.">bcm_mpls_esi_encap_get(int unit, bcm_mpls_esi_info_t* esi_info)</a>  </td><td>Get esi encap id.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga61a1a4857ede1443e9eaee63f738cd1a" title="Delete esi encap id values.">bcm_mpls_esi_encap_delete(int unit, bcm_mpls_esi_info_t* esi_info)</a>  </td><td>Delete esi encap id values.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga8e8c037eee0b887df3d977e8ec7c0660" title="Traverse routine for esi encap id.">bcm_mpls_esi_encap_traverse(int unit, bcm_mpls_esi_encap_traverse_cb cb, void* user_data)</a>  </td><td>Traverse routine for esi encap id.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#ga76068ecb56898134e00385fe7de1d91c" title="Initialize an Esi info structure.">bcm_mpls_esi_info_t_init(bcm_mpls_esi_info_t* esi_info)</a>  </td><td>Initialize an Esi info structure.   </td></tr>
<tr>
<td><a class="el" href="group__mpls.html#gac74de6ecfea69efa4bcd70717bc2bc8a" title="Traverse routine for port info.">bcm_mpls_port_traverse(int unit, bcm_mpls_port_traverse_info_t additional_info, bcm_mpls_port_traverse_cb trav_fn, void* user_data)</a>  </td><td>Traverse routine for port info.   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2019 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
