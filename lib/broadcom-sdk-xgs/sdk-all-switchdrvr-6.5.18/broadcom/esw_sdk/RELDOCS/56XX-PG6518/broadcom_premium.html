<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SDK API Guide: Premium API Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Premium API Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Checksum_validation"></a>
Checksum validation for IPv4 packets</h1>
<ul>
<li>Switch Control:</li>
</ul>
<table class="doxtable">
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>bcmSwitchIPv4DoNotVerifyIncomingChecksum </td><td>Allow incremental checksum update irrespective of the incoming value for IPv4 packets. 1 - Allow without verifying incoming checksum, 0 - Verify incoming checksum.   </td></tr>
</table>
<h1><a class="anchor" id="twamp_owamp"></a>
TWAMP/OWAMP</h1>
<ul>
<li>BCM Packet Flags 2:</li>
</ul>
<table class="doxtable">
<tr>
<th>Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_PKT_F2_TWAMP_OWAMP_TS </td><td>This flag indicates that the timestamp needs to be inserted in the packet for TWAMP/OWAMP Tx flow.   </td></tr>
</table>
<ul>
<li>Field qualifiers:</li>
</ul>
<table class="doxtable">
<tr>
<th>Name </th><th>Purpose </th></tr>
<tr>
<td>bcmFieldQualifyTimeStampTxPktType </td><td>Matches on Tx Timestamp packet type  </td></tr>
<tr>
<td>bcmFieldQualifySysHdrLocalDstport </td><td>Matches on System Header Local Destination port  </td></tr>
</table>
<ul>
<li>Field APIs:</li>
</ul>
<p>To match on Tx Timestamp packet type:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#gab27e68f815eeec8baebed15657807dd2" title="To match on Tx Timestamp packet type.">bcm_field_qualify_TimeStampTxPktType</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> <a class="code" href="l3_8dox.html#a53fec9518cfb2f8ebe1ff580a275a7c5">entry</a>,</div>
<div class="line">    <a class="code" href="group__field.html#ga6e93bc2f58fcd83f1e9d34880f76f91f">bcm_field_timestamp_transmit_pkt_type_t</a> ts_pkt_type)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ts_pkt_type</td><td>Timestamp packet type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_XXX</td><td>To get the qualified inputs on Tx Timestamp packet type:</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#gadaa66121dec4213402c0d5af608fe75d" title="To get the qualified inputs on Tx Timestamp packet type.">bcm_field_qualify_TimeStampTxPktType_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="group__field.html#ga6e93bc2f58fcd83f1e9d34880f76f91f">bcm_field_timestamp_transmit_pkt_type_t</a> *ts_pkt_type)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ts_pkt_type</td><td>Timestamp packet type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_XXX</td><td>To qualify on System Header Local Destination port:</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga6a758fc16ff899eace36f483e15b57a1" title="To qualify on System Header Local Destination port.">bcm_field_qualify_SysHdrLocalDstport</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="group__types.html#gad7e36a8d90f5765e8ca58770666c0860">bcm_port_t</a> data,</div>
<div class="line">    <a class="code" href="group__types.html#gad7e36a8d90f5765e8ca58770666c0860">bcm_port_t</a> mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>To get qualified inputs on System Header Local Destination port:</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga31b8fa83b5dbfcd87e61080c5343bdb7" title="To get qualified inputs on System Header Local Destination port.">bcm_field_qualify_SysHdrLocalDstport_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="group__types.html#gad7e36a8d90f5765e8ca58770666c0860">bcm_port_t</a> *data,</div>
<div class="line">    <a class="code" href="group__types.html#gad7e36a8d90f5765e8ca58770666c0860">bcm_port_t</a> *mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td></td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td></td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td></td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="ioam_draft"></a>
IOAM VER4 DRAFT COMPATIBILITY</h1>
<ul>
<li>Field qualifiers:</li>
</ul>
<table class="doxtable">
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>bcmFieldQualifyIOAMNameSpaceIdMatch </td><td>Matches on IOAM header Name Space ID match result  </td></tr>
<tr>
<td>bcmFieldQualifyIOAMPktOverflowed </td><td>Matches if IOAM header Overflow flag is not set  </td></tr>
<tr>
<td>bcmFieldQualifyIOAMRemainingLenValid </td><td>Matches if IOAM header Remaining Length field is greater than or equal to 8.  </td></tr>
</table>
<ul>
<li>IOAM related Egress Flow encap type of bcm_field_egress_flow_encap_t</li>
</ul>
<p>Note: Only values relevant for IOAM shown here: </p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="group__field.html#gade60705a185de4f561071011d337e36c">bcm_field_egress_flow_encap_e</a> {</div>
<div class="line">    <a class="code" href="group__field.html#ggade60705a185de4f561071011d337e36ca1dec134769b56c9690bae8cd8da559bb">bcmFieldEgressFlowEncapTwampOwampTxTimestamp</a> = 1, <span class="comment">/* Insert Timestamp for TWAMP/OWAMP</span></div>
<div class="line"><span class="comment">                                                            packet. */</span></div>
<div class="line">    <a class="code" href="group__field.html#ggade60705a185de4f561071011d337e36ca763c1b9f1f8516d167d9394e2f9e2174">bcmFieldEgressFlowEncapIOAMEnable</a> = 2, <span class="comment">/* IOAM Enable */</span></div>
<div class="line">    <a class="code" href="group__field.html#ggade60705a185de4f561071011d337e36caacdf76eb6ccbce27c385245bc23a47d9">bcmFieldEgressFlowEncapIOAMOverflowFlagSet</a> = 3, <span class="comment">/* Set Overflow bit in IOAM Flags */</span></div>
<div class="line">} <a class="code" href="group__field.html#gad3b5d215393fe3879acf45f6275fac99">bcm_field_egress_flow_encap_t</a>;</div>
</div><!-- fragment --><ul>
<li>Field APIs:</li>
</ul>
<p>To qualify on In-situ OAM header Name Space ID match result.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga848380d92d81c85e7c11ae5bde6a6039" title="To qualify on In-situ OAM header Name Space ID match result.">bcm_field_qualify_IOAMNameSpaceIdMatch</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>To get the qualified inputs on In-situ OAM header Name Space ID match result.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#gac3cdad968e9fdf3f7b4c7cc5b83a66e7" title="To get the qualified inputs on In-situ OAM header Name Space ID match result.">bcm_field_qualify_IOAMNameSpaceIdMatch_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>To qualify on In-situ OAM header Overflow flag.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga6cc8a2c33997dd1659f5dbba719699da" title="To qualify on In-situ OAM header Overflow flag.">bcm_field_qualify_IOAMPktOverflowed</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>To get the qualified inputs on In-situ OAM header Overflow flag.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga81e8d60fe27e0340854a2396c58818ff" title="To get the qualified inputs on In-situ OAM header Overflow flag.">bcm_field_qualify_IOAMPktOverflowed_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *mask)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>To qualify on In-situ OAM header valid Remaining Length</p>
<p>Data = 1 and Mask = 1 =&gt; match for Valid Remaining Length which is greater than or equal to 8. Data = 0 and Mask = 1 =&gt; match for Remaining Length which is less than 8.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#ga5bca1fb69c6ec70d4a272ac73b0a6208" title="To qualify on In-situ OAM header valid Remaining Length.">bcm_field_qualify_IOAMRemainingLenValid</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>To get qualified inputs on In-situ OAM header valid Remaining Length</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__field.html#gacae2c0004cdacce105d1864e8d98d5dc" title="To get qualified inputs on In-situ OAM header valid Remaining Length.">bcm_field_qualify_IOAMRemainingLenValid_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#ga893d1e7b91d025be21236240624f52e9">bcm_field_entry_t</a> entry,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *data,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *mask);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Field entry ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>Qualifier match mask </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_INIT</td><td>BCM unit not initialized </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="PHB_from_VFI"></a>
Derive PHB from VFI in decoupled mode.</h1>
<p>Assign a QOS mapping id to a VFI entry in TD3.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__qos.html#ga0ce34c45368de7867722601ec4137af9" title="bcm_qos_vpn_map_set">bcm_qos_vpn_map_set</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#gad0476041b742ee817043d5d0c99fc2ac">bcm_vpn_t</a> vpn,</div>
<div class="line">    <span class="keywordtype">int</span> ing_map,</div>
<div class="line">    <span class="keywordtype">int</span> egr_map)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">L2</td><td>VPN </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Qualifier match data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ingress</td><td>map_id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">egress</td><td>map_id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_BADID</td><td>map_id not valid </td></tr>
    <tr><td class="paramname">BCM_E_PARAM</td><td>Input parameter error </td></tr>
    <tr><td class="paramname">BCM_E_UNAVAIL</td><td>Feature unavailable </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<p>Retrieve the QOS mapping id from a VFI entry in TD3.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__qos.html#gad5ed70371f99519f85875806386541ad" title="bcm_qos_vpn_map_type_get">bcm_qos_vpn_map_type_get</a>(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="group__types.html#gad0476041b742ee817043d5d0c99fc2ac">bcm_vpn_t</a> vpn,</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="l3_8dox.html#a6d63ab79fe26b54cd710ffb5e5227fa3">flags</a>,</div>
<div class="line">    <span class="keywordtype">int</span> *<a class="code" href="tsn_8dox.html#aba515c7c1beb3b846fdbe883d7cdfc28">map_id</a>);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>Unit number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">L2</td><td>VPN </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td></td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">map_id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation completed successfully </td></tr>
    <tr><td class="paramname">BCM_E_PARAM</td><td>Input parameter error </td></tr>
    <tr><td class="paramname">BCM_E_UNAVAIL</td><td>Feature unavailable </td></tr>
    <tr><td class="paramname">BCM_E_NOT_FOUND</td><td>Entry ID not found</td></tr>
  </table>
  </dd>
</dl>
<table class="doxtable">
<tr>
<th>Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_QOS_MAP_INGRESS </td><td>set to retrieve ingress map_id; otherwise egress map_id  </td></tr>
<tr>
<td>BCM_QOS_MAP_L2 </td><td>set to retrieve L2 VPN map_id  </td></tr>
</table>
<h1><a class="anchor" id="MiM_decoupled_mode"></a>
MiM(Mac-in-Mac) decoupled mode</h1>
<ul>
<li>Added a new config variable mim_decoupled_mode to enable this new mode to replace the legacy operation mode. <table class="doxtable">
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>mim_decoupled_mode </td><td>In this mode, VFI and Source VP(SVP) can be derived seperately and VLAN can be assigned per VFI.   </td></tr>
</table>
</li>
</ul>
<ul>
<li>Added a new member to bcm_mim_vpn_config_t: <table class="doxtable">
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>default_vlan </td><td>Assign default vlan for the payload of the terminated tunnel packet. Value 0 means no change. Value is in a vlan tag format: pri/cfi/vlan.   </td></tr>
</table>
</li>
</ul>
<h1><a class="anchor" id="l3_large_nat"></a>
L3 Large Scale NAT</h1>
<p>This feature is available on Trident 3 devices. When this feature is enabled, the NAT egress translation is performed in higher capacity egress tables allowing a larger number of NAT translation entries. NAT translations for both unicast and multicast L3 flows and supported with this feature. It is configured using Exact Match entries, Field Processor rules, and the Large NAT API described below. The feature is enabled using the switch controls bcmSwitchL3UcLargeNATEnable and bcmSwitchL3McLargeNATEnable. For Large NAT to operate correctly, L3 must be enabled with the switch control bcmSwitchL3EgressMode.</p>
<h1><a class="anchor" id="large_nat_api"></a>
L3 Large Scale NAT API</h1>
<p>The Large NAT egress APIs are used to manage NAT packet translations on the egress. The packet translation is described using the bcm_l3_large_nat_egress_t structure. The IP addresses and L4 ports in the structure describe fields of the packet to be modified. The nat_class_id, intf_clas_id, and replication_id are entry lookup fields. A non-zero nat_class_id is required. This field is assigned in the ingress by a Field Processor (FP) rule or an Exact Match (EM) entry. The replication copy ID, is assigned by the Next-Hop entry, and identifies the multicast copy to be translated.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_s</a> {</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;           <span class="comment">/* See BCM_L3_LARGE_NAT_EGRESS_XXX flag definitions. */</span></div>
<div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#a191509591acacc875385b287022aa4ef">sip_addr</a>;      <span class="comment">/* Translated source IP. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#a3ea3e1ebd4d9a1d6f8d8d2cdc14801b2">src_port</a>;        <span class="comment">/* Source l4 port for NAPT */</span></div>
<div class="line">    <a class="code" href="group__types.html#gafb45fd06727fa45d83ce6f5e4c328378">bcm_ip_t</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#ae78fab191c395ab19788e4797934688c">dip_addr</a>;      <span class="comment">/* Translated dest IP. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#a0455db28edb082e466697123b76e36ad">dst_port</a>;        <span class="comment">/* Destination l4 port for NAPT */</span></div>
<div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__l3__large__nat__egress__s.html#a9b587596c173ad0b4e9d6681a68f082e">intf_class_id</a>;      <span class="comment">/* Overlay L3 interface class ID. Use with RIOT</span></div>
<div class="line"><span class="comment">                               flows only. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__l3__large__nat__egress__s.html#aeb434c1b67d761522ed57d7cba2e8858">nat_class_id</a>;    <span class="comment">/* NAT class ID assigned by ingress FP/EM. */</span></div>
<div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__l3__large__nat__egress__s.html#ad17a624af576f5a3541b0128b24d4ef1">replication_id</a>;     <span class="comment">/* Replication copy ID of multicast Egress object. */</span></div>
<div class="line">} <a class="code" href="nat_8h.html#a0077d17a1447e35ff9b1d2f01131d192">bcm_l3_large_nat_egress_t</a>;</div>
<div class="line"></div>
<div class="line">All <a class="code" href="field_8dox.html#af3337d4fa49ce105bff2eb93addc093c">IP</a> <a class="code" href="l3_8dox.html#ac1c4ccd8dabc16afc92790892dc513d4">addresses</a>, L4 ports <a class="code" href="l3_8dox.html#a8a337bcd5e4b0e95798c0ec014b9cc43">specified</a> <a class="code" href="l3_8dox.html#ae3dcaf11ca883f69add5c617e9e73953">in</a> <a class="code" href="l3_8dox.html#a8f24cc443e1a117ca2698ec0ade83953">the</a> <a class="code" href="l3_8dox.html#ac864a89c7eff540cfd54533ec05add74">structure</a> will <a class="code" href="field_8dox.html#af3fb28268b934fbcbd4442d6ff41c9dc">be</a> configured <a class="code" href="l3_8dox.html#a8f24cc443e1a117ca2698ec0ade83953">the</a> translation entry.</div>
</div><!-- fragment --><p>The flags field contains flags as defined in the following table. They are used to qualify the type of packet edit entry being added. The flags field could be a logical or of multiple of these flags.</p>
<p>BCM_L3_LARGE_NAT Flags</p>
<table class="doxtable">
<tr>
<th>BCM_L3_LARGE_NAT Egress Packet edit flags </th><th>Purpose  </th></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_SNAT </td><td>Entry is for SNAT  </td></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_DNAT </td><td>Entry is for DNAT  </td></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_NAPT </td><td>Entry is for NAPT (either source or destination)  </td></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_REPLACE </td><td>Replace existing entry  </td></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_MULTICAST </td><td>Entry is for Multicast  </td></tr>
<tr>
<td>BCM_L3_LARGE_NAT_EGRESS_MACDA_UPDATE </td><td>Update MACDA on Multicast NAT  </td></tr>
</table>
<p>The NAT egress API also provides a traverse function to walk thru all translation entries. A user-provided callback function is invoked which is defined as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="nat_8h.html#accdefe808ad18c7fca90e95010311b3e">bcm_l3_large_nat_egress_traverse_cb</a>)(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_t</a> *<a class="code" href="l3_8dox.html#a34c07c839c9d4dd4cc8b4a7dfa08ed3b">nat_info</a>,</div>
<div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div>
</div><!-- fragment --><p>bcm_l3_large_nat_egress_t_init</p>
<p>Initialize a bcm_l3_large_nat_egress_t structure.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nat_8h.html">bcm/nat.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="nat_8h.html#ac9e898927055f15b709f3159dd885e60" title="Initialize a bcm_l3_large_nat_egress_t structure.">bcm_l3_large_nat_egress_t_init</a>(<a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_t</a> *nat_info);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">nat_info</td><td>Egress object entry information</td></tr>
  </table>
  </dd>
</dl>
<p>Initializes a Large NAT packet edit egress object structure to default values. This function should be used to initialize any NAT egress structure prior to filling it out and passing it to an API function. This ensures that subsequent API releases may add new structure members to the bcm_l3_large_nat_egress_t structure, and bcm_l3_large_nat_egress_t_init will initialize the new members to correct default values.</p>
<p>bcm_l3_large_nat_egress_add</p>
<p>Add a NAT translation entry.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nat_8h.html">bcm/nat.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="nat_8h.html#a85ef1be85b1625e736deed7147cd9539" title="Add an egress NAT entry in the Egress Adaptation Table. If REPLACE flag is specified then update the ...">bcm_l3_large_nat_egress_add</a>(<span class="keywordtype">int</span> unit, <a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_t</a> *nat_info);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nat_info</td><td>packed edit info: Translated IP addresses/L4 ports, NAT class id, replication ID, L3 interface class ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation success </td></tr>
    <tr><td class="paramname">BCM_E_XXX</td><td>API error</td></tr>
  </table>
  </dd>
</dl>
<p>This API can be used to add a Large Scale NAT translation entry. Add a unicast Large SNAT entry with the BCM_L3_LARGE_NAT_EGRESS_SNAT flag. Add a unicast Large DNAT entry with the BCM_L3_LARGE_NAT_EGRESS_DNAT flag. All IP addresses, L4 ports specified in the structure will be configured in the translation entry. Unicast NAT updates may be enabled per packet type (TCP-only, UDP-only, any IPv4). This is controlled with the switch controls bcmSwitchL3UcLargeDNAT, bcmSwitchL3UcLargeSNAT, etc. For unicast translations, the packet edit is determined by the FP/EM rule.</p>
<p>Add a multicast Large NAT entry with the BCM_L3_LARGE_NAT_EGRESS_MULTICAST flag. For multicast translations, the packet edit is determined by the flags, BCM_L3_LARGE_NAT_EGRESS_SNAT, BCM_L3_LARGE_NAT_EGRESS_DNAT, and BCM_L3_LARGE_NAT_EGRESS_NAPT. These flags select the packet rewrite-type from the switch controls bcmSwitchL3McLargeNATRewriteType0-2.</p>
<p>Combinations of multicast edits </p>
<table class="doxtable">
<tr>
<th>Edit-type </th><th>Flags  </th></tr>
<tr>
<td>SNAT </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT  </td></tr>
<tr>
<td>DNAT </td><td>BCM_L3_LARGE_NAT_EGRESS_DNAT  </td></tr>
<tr>
<td>SNAT_DNAT </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT | BCM_L3_LARGE_NAT_EGRESS_DNAT  </td></tr>
<tr>
<td>SNAPT </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT | BCM_L3_LARGE_NAT_EGRESS_NAPT  </td></tr>
<tr>
<td>DNAPT </td><td>BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_NAPT  </td></tr>
<tr>
<td>SNAPT_DNAPT </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT | BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_NAPT  </td></tr>
<tr>
<td>DNAT_WITH_MACDA_UPDATE </td><td>BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_MACDA_UPDATE  </td></tr>
<tr>
<td>SNAT_DNAT_WITH_MACDA_UPDATE </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT | BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_MACDA_UPDATE  </td></tr>
<tr>
<td>DNAPT_WITH_MACDA_UPDATE </td><td>BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_NAPT | BCM_L3_LARGE_NAT_EGRESS_MACDA_UPDATE  </td></tr>
<tr>
<td>SNAPT_DNAPT_WITH_MACDA_UPDATE </td><td>BCM_L3_LARGE_NAT_EGRESS_SNAT | BCM_L3_LARGE_NAT_EGRESS_DNAT | BCM_L3_LARGE_NAT_EGRESS_NAPT | BCM_L3_LARGE_NAT_EGRESS_MACDA_UPDATE  </td></tr>
</table>
<p>The edit combination must be preconfigured in the 3 switch controls bcmSwitchL3McLargeNATRewriteType0-2. If the edit combination is not found in the switch controls, bcm_l3_large_nat_egress_add returns BCM_E_CONFIG.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation success </td></tr>
    <tr><td class="paramname">BCM_E_XXX</td><td>API error</td></tr>
  </table>
  </dd>
</dl>
<p>bcm_l3_large_nat_egress_delete</p>
<p>Delete a NAT translation entry.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nat_8h.html">bcm/nat.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="nat_8h.html#aaeaf7eb5ae2106965e815bfcbdc3a0de" title="Delete an egress NAT entry from the Egress Adaptation table.">bcm_l3_large_nat_egress_delete</a>( <span class="keywordtype">int</span> unit, <a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_t</a> *nat_info);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nat_info,:</td><td>nat_class_id and flags to identify the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation success </td></tr>
    <tr><td class="paramname">BCM_E_XXX</td><td>API error</td></tr>
  </table>
  </dd>
</dl>
<p>Delete the entry specified in nat_info. All lookup fields (nat_class_id, intf_class_id, or replication_id) used when the entry was created must be provided to find and delete the entry. The BCM_L3_LARGE_NAT_EGRESS_MULTICAST flag must be specified to delete a mutlicast NAT entry. The BCM_L3_LARGE_NAT_EGRESS_SNAT flags must be specified to delete a unicast SNAT entry. If no flags are specified, the API will search for a unicast DNAT entry matching the specified nat_class_id, and delete it if found.</p>
<p>bcm_l3_large_nat_egress_get</p>
<p>Retrieve the egress NAT entry specified in nat_info structure.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nat_8h.html">bcm/nat.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="nat_8h.html#a33efd5003d098fa94386e686f428a869" title="Retrieve the egress NAT entry specified in nat_info structure.">bcm_l3_large_nat_egress_get</a>(<span class="keywordtype">int</span> unit, <a class="code" href="structbcm__l3__large__nat__egress__s.html">bcm_l3_large_nat_egress_t</a> *nat_info);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nar_info,:</td><td>nat_class_id and flags to identify the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation success </td></tr>
    <tr><td class="paramname">BCM_E_XXX</td><td>API error</td></tr>
  </table>
  </dd>
</dl>
<p>Retrieves the entry specified in the nat_info. All lookup fields (nat_class_id, intf_class_id, or replication_id) used when the entry was created must be provided to retrieve the entry. The BCM_L3_LARGE_NAT_EGRESS_MULTICAST flag must be specified to find a mutlicast NAT entry. The BCM_L3_LARGE_NAT_EGRESS_SNAT flags must be specified to find a unicast SNAT entry. If no flags are specified, the API will search for a unicast DNAT entry matching the specified nat_class_id.</p>
<p>bcm_l3_large_nat_egress_traverse</p>
<p>Traverse through the Large NAT entries and invoke a user provided callback for each valid entry.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nat_8h.html">bcm/nat.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="nat_8h.html#af6a85094f1c7b0190d70e730732260b5" title="Traverse through the NAT entries in the Egress Adaptation table and invoke a user provided callback f...">bcm_l3_large_nat_egress_traverse</a>(<span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="nat_8h.html#accdefe808ad18c7fca90e95010311b3e">bcm_l3_large_nat_egress_traverse_cb</a> <a class="code" href="l3_8dox.html#af834c99794d4768208caae8202b6d8eb">cb</a>, <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unit</td><td>BCM device number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>User provided callback function to call for each matched entry </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_data</td><td>Parameter to be passed to the user callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BCM_E_NONE</td><td>Operation success </td></tr>
    <tr><td class="paramname">BCM_E_XXX</td><td>API error</td></tr>
  </table>
  </dd>
</dl>
<p>Traverse the Large NAT packet translations. For each valid entry, call the user provided callback function and pass the user provided user_data as additional parameter to the callback function.</p>
<h1><a class="anchor" id="l2_change_fields"></a>
L2 Change Fields</h1>
<p>This feature is available on Trident 3 devices. This feature extends the "Change L2 Fields" IFP action that is traditionally present for VLAN-switched packets to VFI-switched packets. When this feature is enabled, the overlay L2 header may be modified for L2 flows switched in VFI domain. This feature is configured using Field Processor rules and the Change L2 Fields API described below. The feature is enabled using the switch control bcmSwitchL2ChangeFieldsEnable. For Change L2 Fields to correctly, L3 must be enabled with the switch control bcmSwitchL3EgressMode (refer to <a class="el" href="group__switch.html#bcm_switches">bcm_switches</a>).</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__l2__change__fields__s.html">bcm_l2_change_fields_s</a> {</div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__l2__change__fields__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                       <span class="comment">/* See BCM_L2_CHANGE_FIELDS_XXX flag</span></div>
<div class="line"><span class="comment">                                           definitions. */</span></div>
<div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__l2__change__fields__s.html#a6aaf901d2905e6b0137856b7394e6dbd">macda</a>;                    <span class="comment">/* New payload MACDA. */</span></div>
<div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__l2__change__fields__s.html#aef008b91eb0ddaa9aef662a60134e018">macsa</a>;                    <span class="comment">/* New payload MACSA. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__l2__change__fields__s.html#a31af7f2fccedd540790c853adb9bc3d5">pri</a>;                          <span class="comment">/* payload tag priority. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__l2__change__fields__s.html#a00e5355c25655f1b4775f3e9bc326044">cfi</a>;                          <span class="comment">/* payload tag CFI. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__l2__change__fields__s.html#a32ad75ce30562c526f5b504fbb0187c1">tpid</a>;                        <span class="comment">/* payload tag TIP value. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__l2__change__fields__s.html#acedfb903fedf54fbcdd82fa28e9e4c7a">vlan</a>;                        <span class="comment">/* payload vlan tag. */</span></div>
<div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__l2__change__fields__s.html#ab7ee47346d9082ee04b0178c355b711a">change_l2_fields_class_id</a>;   <span class="comment">/* Change L2 Fields class ID assigned by</span></div>
<div class="line"><span class="comment">                                           ingress FP. */</span></div>
<div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__l2__change__fields__s.html#aba78f430497b1508b32a4501d5028db6">dvp</a>;                    <span class="comment">/* Optional DVP key. */</span></div>
<div class="line">} <a class="code" href="group__l2.html#gafab7e088ef1e5d6941d9feecc8fed53a">bcm_l2_change_fields_t</a>;</div>
</div><!-- fragment --><p>The flags field contains flags as defined in the following table. They are used to qualify the type of packet edit entry being added. The flags field could be a logical or of multiple of these flags.</p>
<table class="doxtable">
<caption align="bottom">BCM_L2_CHANGE_FIELDS Packet edit flags</caption>
<tr>
<td>BCM_L2_CHANGE_FIELDS_DVP </td><td>DVP key parameter is valid  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_REPLACE </td><td>Replace existing entry  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_ADD </td><td>Add payload vlan tag  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_DELETE </td><td>Delete payload vlan tag  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_REPLACE </td><td>Replace payload vlan tag  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_PRI_TPID_REPLACE </td><td>Replace payload, vlan, priority and tpid  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_TPID_REPLACE </td><td>Replace payload, vlan, and tpid  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_VLAN_PRI_REPLACE </td><td>Replace payload priority only  </td></tr>
<tr>
<td>BCM_L2_CHANGE_FIELDS_TPID_REPLACE </td><td>Replace payload tpid only  </td></tr>
</table>
<p>The L2 Change Fields also provides a traverse function to walk thru all L2 Change Field entries. A user-provided callback function is invoked which is defined as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__l2.html#ga0a272f6d83f250c93e982012355cc6d8">bcm_l2_change_fields_traverse_cb</a>)(</div>
<div class="line">    <span class="keywordtype">int</span> unit,</div>
<div class="line">    <a class="code" href="structbcm__l2__change__fields__s.html">bcm_l2_change_fields_t</a> *l2_fields_info,</div>
<div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div>
</div><!-- fragment --><table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__l2.html#ga2d0254da40cd85c02edfa6c929a37ed3" title="Initialize a bcm_l2_change_fields_t structure.">bcm_l2_change_fields_t_init(bcm_l2_change_fields_t* l2_fields_info)</a>  </td><td>Initialize a bcm_l2_change_fields_t structure.   </td></tr>
<tr>
<td><a class="el" href="group__l2.html#ga672b52a138e01df5e9f58317d8ec1f9b" title="Add a Change L2 Fields entry in the Egress Adaptation Table. If REPLACE flag is specified then update...">bcm_l2_change_fields_add(int unit, bcm_l2_change_fields_t* l2_fields_info)</a>  </td><td>Add a Change L2 Fields entry in the Egress Adaptation Table. If REPLACE flag is specified then update the entry identified by the l2_fields_info.   </td></tr>
<tr>
<td><a class="el" href="group__l2.html#ga185cf6407f3efe6319564d0a68dfd7be" title="Delete a Change L2 Fields entry.">bcm_l2_change_fields_delete(int unit, bcm_l2_change_fields_t* l2_fields_info)</a>  </td><td>Delete a Change L2 Fields entry.   </td></tr>
<tr>
<td><a class="el" href="group__l2.html#gad12f9c5fde62c2c24ee7d01a251a8547" title="Retrieve the Change L2 Fields entry specified in l2_fields_info structure.">bcm_l2_change_fields_get(int unit, bcm_l2_change_fields_t* l2_fields_info)</a>  </td><td>Retrieve the Change L2 Fields entry specified in l2_fields_info structure.   </td></tr>
<tr>
<td><a class="el" href="group__l2.html#ga63f7df441dcb425576d28a46a2f62e22" title="Traverse through the L2 Change fields entries and invoke a user provided callback for each valid entr...">bcm_l2_change_fields_traverse(int unit, bcm_l2_change_fields_traverse_cb cb, void* user_data)</a>  </td><td>Traverse through the L2 Change fields entries and invoke a user provided callback for each valid entry. </td></tr>
</table>
</div></div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2019 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
