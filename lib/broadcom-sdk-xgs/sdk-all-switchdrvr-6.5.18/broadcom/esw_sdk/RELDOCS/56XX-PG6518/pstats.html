<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: Packetized Statistic (Pstats)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Packetized Statistic (Pstats) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Packetized Statistic allows software to read out internal device metrics. Application can use these metrics to form Packetized Statistic packets, send Packetized Statistic packets to a remote collector. All Pstats API starts with bcm_pstats_ prefix.</p>
<ul>
<li>bcm_pstats_session_id_t session identifier number.</li>
<li>bcm_pstats_timestamp_t contains timestamp information of Pstats session collect round.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__pstats__timestamp__s.html">bcm_pstats_timestamp_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#aa3ad64cf41ec3a042bd92550cc6ed308">uint64</a> <a class="code" href="structbcm__pstats__timestamp__s.html#a968296cc534e122ddd997d0fbc465bce">seconds</a>;                     <span class="comment">/* Seconds */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__pstats__timestamp__s.html#adcddcaaa41a0212321eaa77dcc446c4d">nanoseconds</a>;                 <span class="comment">/* Nanoseconds */</span></div><div class="line">} <a class="code" href="group__pstats.html#gab400c81c82f6406ab8fc4f3fbe8a16d0">bcm_pstats_timestamp_t</a>;</div></div><!-- fragment --><ul>
<li>bcm_pstats_session_element_type_t enumerates the element types supported by the API shown in <a class="el" href="pstats.html#Pstats_Element_Types_x">Pstats_Element_Types_x</a></li>
</ul>
<p><a class="anchor" id="Pstats_Element_Types_x"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>Pstats Element Types</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>bcmPStatsSessionUnicastQueue = 1 </td><td>Unicast Queue  </td></tr>
<tr>
<td>bcmPStatsSessionIngPool = 2 </td><td>Ingress service pool  </td></tr>
<tr>
<td>bcmPStatsSessionEgrPool = 3 </td><td>Egress service pool  </td></tr>
<tr>
<td>bcmPStatsSessionTypeCount </td><td>Must be the last  </td></tr>
</table>
<ul>
<li>bcm_pstats_session_element_t contains information of a object want to be collected in a pstats session.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__pstats__session__element__s.html">bcm_pstats_session_element_s</a> {</div><div class="line">    <a class="code" href="group__pstats.html#ga4da7503fe34803f8041de8980ba67cfc">bcm_pstats_session_element_type_t</a> <a class="code" href="structbcm__pstats__session__element__s.html#a58f8566503248e088dc4d722ae2e1a24">type</a>; <span class="comment">/* Session element type */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__pstats__session__element__s.html#a5bbb92b9248c9ea595e205dd48adefd8">gport</a>;                      <span class="comment">/* Logic UC queue gport or port */</span></div><div class="line">    <a class="code" href="group__types.html#ga6196eb330729b091a281f63a17b07a0d">bcm_cos_queue_t</a> cos;                    <span class="comment">/* COS queue */</span></div><div class="line">    <a class="code" href="group__types.html#ga69d5152363af04dbc66bacdf457eb244">bcm_service_pool_id_t</a> <a class="code" href="structbcm__pstats__session__element__s.html#aeb6e2837e3b88f649bfacaed365b7e45">pool</a>;             <span class="comment">/* Service Pool ID */</span></div><div class="line">} <a class="code" href="group__pstats.html#ga4c6254b2228326ad2a5cc460c41ea610">bcm_pstats_session_element_t</a>;</div></div><!-- fragment --><ul>
<li>bcm_pstats_data_t contains use count values of a session element.</li>
</ul>
<p>Because of the special MMU architecture on BCM56970 and family, each service pool has four use count items and each logic uc queue has two use count items. Each pstats_data structure is associated to a session element data.</p>
<ul>
<li>BCM_PSTATS_BUFFER_COUNT=8 The maximum buffer count is defined to 8 for future extension.</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__pstats__data__s.html">bcm_pstats_data_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__pstats__data__s.html#adfc6bd85c25acab153ef783325e08dbc">array_count</a>;                              <span class="comment">/* Number of elements in array */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__pstats__data__s.html#a5ec6ecf2aad1b7c2821e7d549f1a0da2">use_counts_array</a>[BCM_PSTATS_BUFFER_COUNT];<span class="comment">/* PSTATS use counts array */</span></div><div class="line">} <a class="code" href="group__pstats.html#gade7cf8afb538c2587137b419490846a0">bcm_pstats_data_t</a>;</div></div><!-- fragment --><ul>
<li>bcm_pstats_session_traverse_cb</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__pstats.html#ga4e3fe3bed651c3ac7653d49dff906405">bcm_pstats_session_traverse_cb</a>)(</div><div class="line">            <span class="keywordtype">int</span> unit,</div><div class="line">            <a class="code" href="group__types.html#gaad2036943567dbcf8eed85ff6529a798">bcm_pstats_session_id_t</a> session_id,</div><div class="line">            <span class="keywordtype">int</span> array_count,</div><div class="line">            <a class="code" href="structbcm__pstats__session__element__s.html">bcm_pstats_session_element_t</a> *element_array,</div><div class="line">            <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div></div><!-- fragment --><table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga1b636b480303d147b31ef61ecf68f854" title="Create a Pstats session instance for SDK management.">bcm_pstats_session_create(int unit, int options, int array_count, bcm_pstats_session_element_t* element_array, bcm_pstats_session_id_t* session_id)</a>  </td><td>Create a Pstats session instance for SDK management.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga7c48964958bb62c9e8a9418d1073c614" title="Destroy an existing Pstats session.">bcm_pstats_session_destroy(int unit, bcm_pstats_session_id_t session_id)</a>  </td><td>Destroy an existing Pstats session.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga1dab623fa2e9b8646aadcc6ad3908fe6" title="Get an existing Pstats session elements.">bcm_pstats_session_get(int unit, bcm_pstats_session_id_t session_id, int array_max, bcm_pstats_session_element_t* element_array, int* array_count)</a>  </td><td>Get an existing Pstats session elements.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#gabf05c1c42dade0848173e6232caa686c" title="Start a Pstats sync operation.">bcm_pstats_data_sync(int unit)</a>  </td><td>Start a Pstats sync operation.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga0ba2bc7a33da4d6ddeb1fe6764de7eac" title="Get an existing Pstats session data.">bcm_pstats_session_data_get(int unit, bcm_pstats_session_id_t session_id, bcm_pstats_timestamp_t* timestamp, int array_max, bcm_pstats_data_t* data_array, int* array_count)</a>  </td><td>Get an existing Pstats session data.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#gaabfe0541d3d166b3fd0b693372d24de5" title="Start a session sync operation first. Then get an existing Pstats session data.">bcm_pstats_session_data_sync_get(int unit, bcm_pstats_session_id_t session_id, bcm_pstats_timestamp_t* timestamp, int array_max, bcm_pstats_data_t* data_array, int* array_count)</a>  </td><td>Start a session sync operation first. Then get an existing Pstats session data.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga39b378240e934e11a50d49a4ba0d3589" title="Clear an existing Pstats session hw use counts and sw use counts buffer.">bcm_pstats_session_data_clear(int unit, bcm_pstats_session_id_t session_id)</a>  </td><td>Clear an existing Pstats session hw use counts and sw use counts buffer.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga843277830b215470b76cf381e10b4b51" title="Traverse through the pstats sessions and run callback at each session.">bcm_pstats_session_traverse(int unit, bcm_pstats_session_traverse_cb cb, void* user_data)</a>  </td><td>Traverse through the pstats sessions and run callback at each session.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga97d3f0d68dc744d26f5aea4ca6d9ff9e" title="Initialize a pstats timestamp structure.">bcm_pstats_timestamp_t_init(bcm_pstats_timestamp_t* timestamp)</a>  </td><td>Initialize a pstats timestamp structure.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga114e9a542b66bb24ec20ec888c127fe9" title="Initialize a pstats data structure.">bcm_pstats_data_t_init(bcm_pstats_data_t* data)</a>  </td><td>Initialize a pstats data structure.   </td></tr>
<tr>
<td><a class="el" href="group__pstats.html#ga5afcb6f4986088ab63710ef7476d297e" title="Initialize a pstats session element structure.">bcm_pstats_session_element_t_init(bcm_pstats_session_element_t* element)</a>  </td><td>Initialize a pstats session element structure.   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2019 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
