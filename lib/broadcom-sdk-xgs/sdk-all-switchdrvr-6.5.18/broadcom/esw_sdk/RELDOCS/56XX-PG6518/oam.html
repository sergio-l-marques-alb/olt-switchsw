<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: Operations, Administration, And Maintenance</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Operations, Administration, And Maintenance </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>For devices which support them, the OAM APIs provide control of the following OAM features:</p>
<ul>
<li>The transmission of outgoing continuity check messages (CCMs)</li>
<li>The reception and processing of incoming CCMs</li>
<li>The transmission of loopback responses (LBRs) in response to loopback messages (LBMs)</li>
<li>The time stamping and forwarding of delay measurement (DM) packets to the CPU.</li>
</ul>
<p>Callback mechanisms are also provided for notifying the application of OAM-related events, such as the setting and clearing of faults.</p>
<p>Other aspects of OAM can be implemented using the field processor (FP). This includes:</p>
<ul>
<li>The sending of LBMs</li>
<li>The sending of DMs</li>
<li>The sending and receiving of linktrace messages (LTMs) and linktrace replies (LTRs),</li>
<li>Link layer OAM</li>
<li>Certain devices support single common destination MAC address value for all endpoints configured on the device. IFP support on this device can be used to overcome this single destination MAC address limitation. CCM frames generated by hardware use the source MAC address value configured for the endpoint in the device. IFP rule can be setup to match on endpoint source MAC address value in the frame and for matching frames use IFP actions to replace source and destination MAC address with new values.</li>
</ul>
<h1><a class="anchor" id="oam_data_types"></a>
OAM Data Types</h1>
<ul>
<li>bcm_oam_event_type_t is an enumeration of event types for which callbacks can be registered.</li>
<li>bcm_oam_endpoint_type_t is an enumeration of endpoint types.</li>
<li>bcm_oam_vccv_type_t is an enumeration of vccv types.</li>
<li>bcm_oam_group_t is an identifier used to refer to an OAM group.</li>
<li>bcm_oam_endpoint_t is an identifier used to refer to an OAM endpoint.</li>
<li>bcm_oam_group_info_t is a structure containing information about an OAM group.</li>
<li>bcm_oam_event_types_t is a bit array containing multiple event types for callback registration.</li>
<li>bcm_oam_performance_event_data_t is a structure containing LM/DM statistics to be read on performance events.</li>
<li>bcm_oam_loss_t is used to refer to an OAM performance measurement loss object LM</li>
<li>bcm_oam_delay_t is used to refer to an OAM performance measurement delay object DM</li>
<li>bcm_oam_loopback_t is used to refer to an OAM loopback object</li>
<li>bcm_oam_ais_t is used to refer to an OAM AIS (alarm indication signal) object</li>
<li>bcm_oam_tst_rx_t is used to refer to an OAM TST rx object</li>
<li>bcm_oam_tst_tx_t is used to refer to an OAM TST tx object</li>
<li>bcm_oam_csf_t is used to refer to an OAM CSF object</li>
<li>bcm_oam_group_fault_alarm_defect_priority_t is an enumeration of OAM group fault alarm defects and priorities</li>
<li>bcm_oam_timestamp_format_t is an enumeration of OAM timestamp format</li>
<li>bcm_oam_action_type_t is an enumeration of OAM opcode actions</li>
<li>bcm_oam_control_type_t is an enumeration of OAM control types.</li>
<li>bcm_oam_report_mode_type_t is an enumaration used to control the report mode</li>
<li>bcm_oam_sd_sf_detection_t is used to refer to an OAM signal degradation/signal fault object</li>
<li>bcm_oam_y_1711_alarm_t is used to refer to an OAM y_1711 alarm object</li>
<li>bcm_oam_mpls_network_info_t is a structure containing OAM y_1711 information</li>
<li>bcm_oam_upmep_pdu_type_t is an enumeration of UP MEP PDU types.</li>
<li>bcm_oam_control_key_t is an enumeration of OAM control keys.</li>
</ul>
<p>The following types are used for supplying function pointers to callbacks for group traversal, endpoint traversal, and event handling.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__oam.html#ga880a12752cd8c8fd5d1add4da4abb7bc">bcm_oam_group_traverse_cb</a>)(</div><div class="line">    <span class="keywordtype">int</span> unit,</div><div class="line">    <a class="code" href="structbcm__oam__group__info__s.html">bcm_oam_group_info_t</a> *group_info,</div><div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__oam.html#gafd719c0ca1ca6664e05974ffd4fe2fe8">bcm_oam_endpoint_traverse_cb</a>)(</div><div class="line">    <span class="keywordtype">int</span> unit,</div><div class="line">    <a class="code" href="structbcm__oam__endpoint__info__s.html">bcm_oam_endpoint_info_t</a> *endpoint_info,</div><div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__oam.html#gab1e1a4096a92f5756673d16e58d6abdc">bcm_oam_event_cb</a>)(</div><div class="line">    <span class="keywordtype">int</span> unit,</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="l3_8dox.html#a6d63ab79fe26b54cd710ffb5e5227fa3">flags</a>,</div><div class="line">    <a class="code" href="group__oam.html#ga3253020253382e7611ea0a775eb93d16">bcm_oam_event_type_t</a> event_type,</div><div class="line">    <a class="code" href="group__oam.html#gae1816dd27c98dbd204f7c600d148eb3d">bcm_oam_group_t</a> <a class="code" href="stat_8dox.html#a5fcbbb28fa1f2c202cbfe2afa18eed5d">group</a>,</div><div class="line">    <a class="code" href="group__oam.html#gae6a359466c10efbe4fc74a9b41bdd9e1">bcm_oam_endpoint_t</a> <a class="code" href="oam_8dox.html#abb1a87fca8b8e334f702cc84126b2bc7">endpoint</a>,</div><div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> int (*<a class="code" href="group__oam.html#ga5c74721d83119b038ee544d5065fe448">bcm_oam_performance_event_cb</a>)(</div><div class="line">    <span class="keywordtype">int</span> unit,</div><div class="line">    <a class="code" href="group__oam.html#ga3253020253382e7611ea0a775eb93d16">bcm_oam_event_type_t</a> event_type,</div><div class="line">    <a class="code" href="group__oam.html#gae1816dd27c98dbd204f7c600d148eb3d">bcm_oam_group_t</a> <a class="code" href="stat_8dox.html#a5fcbbb28fa1f2c202cbfe2afa18eed5d">group</a>,</div><div class="line">    <a class="code" href="group__oam.html#gae6a359466c10efbe4fc74a9b41bdd9e1">bcm_oam_endpoint_t</a> <a class="code" href="oam_8dox.html#abb1a87fca8b8e334f702cc84126b2bc7">endpoint</a>,</div><div class="line">    <a class="code" href="structbcm__oam__performance__event__data__s.html">bcm_oam_performance_event_data_t</a> *event_data,</div><div class="line">    <span class="keywordtype">void</span> *<a class="code" href="l3_8dox.html#afc6e325b3b8c838e0a205aa5c1ec69bd">user_data</a>);</div></div><!-- fragment --><h1><a class="anchor" id="oam_group_info"></a>
OAM Group Info</h1>
<p>OAM group info structure. This is equivalent to an 802.1ag Maintenance Association (MA): </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__oam__group__info__s.html">bcm_oam_group_info_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__group__info__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;</div><div class="line">    <a class="code" href="group__oam.html#gae1816dd27c98dbd204f7c600d148eb3d">bcm_oam_group_t</a> <a class="code" href="structbcm__oam__group__info__s.html#aed04f59f99f25bbcd7bebb8884978dc2">id</a>;</div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__group__info__s.html#a78453165b046a8d03b7680408e81ea14">name</a>[BCM_OAM_GROUP_NAME_LENGTH]; <span class="comment">/* This is equivalent to the Maintenance</span></div><div class="line"><span class="comment">                                           Association ID (MAID) in 802.1ag.</span></div><div class="line"><span class="comment">                                           Note that this is not a</span></div><div class="line"><span class="comment">                                           null-terminated string but an array</span></div><div class="line"><span class="comment">                                           of bytes.  To avoid memory</span></div><div class="line"><span class="comment">                                           corruption, do not use string copy to</span></div><div class="line"><span class="comment">                                           populate this field. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__group__info__s.html#a8a9e5cf2f1bc73c79526cbd84dc4aa82">rx_name</a>[BCM_OAM_GROUP_NAME_LENGTH]; <span class="comment">/* Additional MAID used for received OAM</span></div><div class="line"><span class="comment">                                           packets. It is used when the flag</span></div><div class="line"><span class="comment">                                           BCM_OAM_GROUP_RX_NAME is set.  When</span></div><div class="line"><span class="comment">                                           used, the received MAID values are</span></div><div class="line"><span class="comment">                                           compared to this MAID instead of the</span></div><div class="line"><span class="comment">                                           &#39;name&#39; field. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__group__info__s.html#a7597874fc9452c9f3a2f8cc84c03fb7e">faults</a>;                      <span class="comment">/* Fault flags */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__group__info__s.html#ad2099de267aa028d09af3f5224905b84">persistent_faults</a>;           <span class="comment">/* Persistent fault flags */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__group__info__s.html#a4bf368f79c0a42e148bcdc6bb2d712b3">clear_persistent_faults</a>;     <span class="comment">/* Persistent fault flags to clear on a</span></div><div class="line"><span class="comment">                                           &#39;get&#39; */</span></div><div class="line">    <a class="code" href="group__oam.html#gaf8e7422b855f2a45bbee6c7375da780a">bcm_oam_group_fault_alarm_defect_priority_t</a> <a class="code" href="structbcm__oam__group__info__s.html#a74f549c2664316d207ca3fde029e3a79">lowest_alarm_priority</a>; <span class="comment">/* Generate</span></div><div class="line"><span class="comment">                                            fault alarm for this</span></div><div class="line"><span class="comment">                                            maintenance endpoint when defects of</span></div><div class="line"><span class="comment">                                            greater than or equal to this</span></div><div class="line"><span class="comment">                                            priority value are detected on this</span></div><div class="line"><span class="comment">                                            maintenance endpoint */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__group__info__s.html#a33804cf9193c7cc332566ee021756799">group_name_index</a>;               <span class="comment">/* Pointer to first extended data entry */</span></div><div class="line">} <a class="code" href="group__oam.html#gaf9484547bcdf0498c9ec0209087b6d5d">bcm_oam_group_info_t</a>;</div></div><!-- fragment --><a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Group Structure Flag Definitions</caption>
<tr>
<th>Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_OAM_GROUP_REPLACE </td><td>Replace an existing OAM group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_WITH_ID </td><td>Use the specified group ID when creating a new group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_REMOTE_DEFECT_TX </td><td>Set the remote defect indicator in outgoing CCMs for this group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_RDI_TX </td><td>Set the remote defect indicator in outgoing CCMs for this group (Alias to BCM_OAM_GROUP_REMOTE_DEFECT_TX)   </td></tr>
<tr>
<td>BCM_OAM_GROUP_COPY_ERRORS_TO_CPU </td><td>Copy mismatched MAID packets to CPU  </td></tr>
<tr>
<td>BCM_OAM_GROUP_COPY_TO_CPU </td><td>Copy the received CCM packet to the CPU  </td></tr>
<tr>
<td>BCM_OAM_GROUP_GET_FAULTS_ONLY </td><td>bcm_oam_group_get fetches only faults and persistent_faults fields in bcm_oam_group_info_t structure.   </td></tr>
<tr>
<td>BCM_OAM_GROUP_TYPE_BHH </td><td>Indicating that this group belongs to BHH endpoint  </td></tr>
<tr>
<td>BCM_OAM_GROUP_FLEXIBLE_MAID_48_BYTE </td><td>fully flexible 48B MAID format  </td></tr>
<tr>
<td>BCM_OAM_GROUP_RX_NAME </td><td>This group has two MAIDs, one for packets specified in the 'name' field, and the MAID for packets received is specified in the 'rx_name' field   </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Group Fault Flag Definitions</caption>
<tr>
<th>Fault Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_OAM_GROUP_FAULT_REMOTE </td><td>A remote defect indicator is set in this group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_FAULT_CCM_TIMEOUT </td><td>A CCM timeout has occurred in this group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_FAULT_CCM_ERROR </td><td>A CCM error has occurred in this group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_FAULT_CCM_XCON </td><td>A CCM xcon has occurred in this group  </td></tr>
<tr>
<td>BCM_OAM_GROUP_FAULT_CCM_MAC </td><td>A CCM Mac defect has occurred in this group  </td></tr>
</table>
<h1><a class="anchor" id="oam_endpoint_info"></a>
OAM Endpoint Info</h1>
<p>OAM endpoint info structure. This is equivalent to an 802.1ag Maintenance Endpoint (MEP): </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__oam__endpoint__info__s.html">bcm_oam_endpoint_info_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;                   <span class="comment">/* Endpoint flags BCM_OAM_ENDPOINT_XXX */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a9e558b14122793cfe22e8f340eeeab04">flags2</a>;                  <span class="comment">/* Endpoint flags 2 BCM_OAM_ENDPOINT2_XXX */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#acbb77e3b093ee6b1361e84a17864efcc">opcode_flags</a>;            <span class="comment">/* OAM message type opcode flags. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#aac15699d93bea618f95d9c079f2e676a">lm_flags</a>;                <span class="comment">/* OAM loss measurment flags. */</span></div><div class="line">    <a class="code" href="group__oam.html#gae6a359466c10efbe4fc74a9b41bdd9e1">bcm_oam_endpoint_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ad9903bfa5cc655b447607269f97c66ad">id</a>;          <span class="comment">/* Endpoint ID */</span></div><div class="line">    <a class="code" href="group__oam.html#gae5d4a60d8ede8b24344633e8f236af1d">bcm_oam_endpoint_type_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#aee43d80c75c3acbcd1468787c29c2027">type</a>;   <span class="comment">/* Endpoint type Ethernet/BHH */</span></div><div class="line">    <a class="code" href="group__oam.html#gae1816dd27c98dbd204f7c600d148eb3d">bcm_oam_group_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a18937dc9bbfa16f6a3fdd7bb391e4489">group</a>;          <span class="comment">/* The ID of the group to which this</span></div><div class="line"><span class="comment">                                       endpoint belongs */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a4e8ed7bc579ced3720531cb31e6ca120">name</a>;                    <span class="comment">/* A unique identifier of the endpoint</span></div><div class="line"><span class="comment">                                       within the group. This is equivalent to</span></div><div class="line"><span class="comment">                                       the MEPID in 802.1ag.</span></div><div class="line"><span class="comment">                                       Valid range is 1 - 8191. */</span></div><div class="line">    <a class="code" href="group__oam.html#gae6a359466c10efbe4fc74a9b41bdd9e1">bcm_oam_endpoint_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a69c3c7fed313d91d136da4b09404d0a9">local_id</a>;    <span class="comment">/* Used by remote endpoints only. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#acf4d33ee4cff36f69b924471174dcb11">level</a>;                      <span class="comment">/* This is equivalent to the Maintenance</span></div><div class="line"><span class="comment">                                       Domain Level (MDL) in 802.1ag. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#af2294ec3b4d743344da9e63c7d507ba5">ccm_period</a>;                 <span class="comment">/* For local endpoints, this is the CCM</span></div><div class="line"><span class="comment">                                       transmission period in ms.  For remote</span></div><div class="line"><span class="comment">                                       endpoints, this is the period on which</span></div><div class="line"><span class="comment">                                       CCM timeout is based. */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ab90165cd927a9ab4ab1e613e95852ade">vlan</a>;                <span class="comment">/* The VLAN associated with this endpoint */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ac5b308fe14378b1d0a6ad9aba29bbded">inner_vlan</a>;          <span class="comment">/* Configure with CVID for two-tag operation</span></div><div class="line"><span class="comment">                                       or set to 0 for one-tag */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a5bbb92b9248c9ea595e205dd48adefd8">gport</a>;              <span class="comment">/* The gport associated with this endpoint */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a26d313d5dc9f713ea3bea73d02b5dc71">tx_gport</a>;           <span class="comment">/* TX gport associated with this endpoint */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#a0794bad1fea1e199ca6d3f33122b71db">trunk_index</a>;                <span class="comment">/* Static designated port for OAM.</span></div><div class="line"><span class="comment">                                       Used when the oam endpoint exists over Trunk */</span></div><div class="line">    <a class="code" href="group__types.html#ga30e6e81bfad0b18e55d3a1c8148fd75d">bcm_if_t</a> <a class="code" href="l3_8dox.html#ac0b247c88d1808e26349423e21791b06">intf</a>;                  <span class="comment">/* interface ID eg., MPLS tunnel interface ID */</span></div><div class="line">    <a class="code" href="group__types.html#ga7f4890ec7a6446a0a6c0cb66ed180627">bcm_mpls_label_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a26b347ee713e5fd770bdaeff8d3b5824">mpls_label</a>;    <span class="comment">/* The MPLS label associated with the</span></div><div class="line"><span class="comment">                                       received packet from the Peer Endpoint */</span></div><div class="line">    <a class="code" href="structbcm__mpls__egress__label__s.html">bcm_mpls_egress_label_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ad4c30ef30e4a40267077b9e86ec29264">egress_label</a>; <span class="comment">/* The MPLS outgoing label information.</span></div><div class="line"><span class="comment">                                             Used for Local Endpoint transmit */</span></div><div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a843f33f872c884bd5ff67da78ab649c1">dst_mac_address</a>;      <span class="comment">/* The destination MAC address associated</span></div><div class="line"><span class="comment">                                       with this endpoint */</span></div><div class="line">    <a class="code" href="structbcm__oam__mpls__network__info__s.html">bcm_oam_mpls_network_info_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a377a103d910af7a70947b4b397a8eebd">mpls_network_info</a>; <span class="comment">/* MPLS networks information */</span></div><div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a2fd1a6159552c4c942bb352663acddcf">src_mac_address</a>;      <span class="comment">/* The source MAC address associated with</span></div><div class="line"><span class="comment">                                       this endpoint */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a43f20e42eb08f7e9aef95f2d53831e36">pkt_pri</a>;                  <span class="comment">/* Egress marking for outgoing CCMs */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a5cc777ab65f9b7dddb1f719e0171eacc">inner_pkt_pri</a>;            <span class="comment">/* Packet priority of inner encpsulated packet */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a1b64fc691ab7fe3286d05cc2f16373fa">inner_tpid</a>;              <span class="comment">/* Tpid of inner encpsulated packet */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#af0778c25248d26c33068cb6b8efeeb59">outer_tpid</a>;              <span class="comment">/* Tpid of outer encpsulated packet */</span></div><div class="line">    <a class="code" href="group__types.html#gaa0652dab31a18be549ee480c1af58f3a">bcm_cos_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#af9675c06f705c87fd29ba81a550607dc">int_pri</a>;              <span class="comment">/* Egress queuing for outgoing CCMs. For</span></div><div class="line"><span class="comment">                                       DownMEPs, this represents the index</span></div><div class="line"><span class="comment">                                       from the base queue. For UpMEPs, this</span></div><div class="line"><span class="comment">                                       represents the internal priority</span></div><div class="line"><span class="comment">                                       itself. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#af0a3a690b38b12824ba84f4b07950f86">cpu_qid</a>;                  <span class="comment">/* CPU queue to be assigned for this endpoint packets */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a112c1a6fe8976d8b02f989c17fafb26a">pri_map</a>[BCM_OAM_INTPRI_MAX];  <span class="comment">/* Priority mapping for LM counter table */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a7597874fc9452c9f3a2f8cc84c03fb7e">faults</a>;                  <span class="comment">/* Fault flags */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ad2099de267aa028d09af3f5224905b84">persistent_faults</a>;       <span class="comment">/* Persistent fault flags */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a4bf368f79c0a42e148bcdc6bb2d712b3">clear_persistent_faults</a>; <span class="comment">/* Persistent fault flags to clear on a</span></div><div class="line"><span class="comment">                                       &#39;get&#39; */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#ab50ab83e3bdace124f0eb96b8e5f076c">ing_map</a>;                        <span class="comment">/* Ingress QoS map profile */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#ad3291d58e836e4a52fe5e127c9691cf6">egr_map</a>;                        <span class="comment">/* Egress QoS map profile */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ac9dc880cfe7407ce2c6f37e62f2a70b8">port_state</a>;                   <span class="comment">/* Endpoint port status */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a0c606922740d483511513c5dfae6dd05">interface_state</a>;              <span class="comment">/* Endpoint interface status */</span></div><div class="line">    <a class="code" href="group__oam.html#ga1dd7aedfbebb48147f3c052520da4d55">bcm_oam_vccv_type_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a4563a70dade5faaf556867a9fe8f1be9">vccv_type</a>;      <span class="comment">/* VCCV pseudowire type */</span></div><div class="line">    <a class="code" href="group__types.html#gad0476041b742ee817043d5d0c99fc2ac">bcm_vpn_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ab4aa203386fefc77212e8a50b58d7ca5">vpn</a>;                      <span class="comment">/* VPN id */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#abf92576599e1d013db129d68acae885e">lm_counter_base_id</a>;             <span class="comment">/* Counter id associated to the mep (See note below) */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ae9dd75716aa0e20181e96be317dadfef">loc_clear_threshold</a>;          <span class="comment">/* Number of packets required to reset the Loss-of-Continuity status per end point */</span></div><div class="line">    <a class="code" href="group__oam.html#gad733c8f943e148ab1fd547c113770dfe">bcm_oam_timestamp_format_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a698c4377d3be2ede503d49d43f2e7cc4">timestamp_format</a>; <span class="comment">/* DM time stamp format - NTP/IEEE1588(PTP) */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#ac7255f75bc6554f8ecae97f0e64fd382">subport_tpid</a>;                <span class="comment">/* Tpid of subport Vlan in case of triple vlan encapsulation */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a7b3d1ddd3a44c56d6f903de84f9e417b">remote_gport</a>;           <span class="comment">/* Used only when CCMs need to be forwarded to remote unit for processing */</span></div><div class="line">    <a class="code" href="group__types.html#gac5f933aaac05c65b2a78ad8a04316994">bcm_gport_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#add6610b6d8d507a7b931ed41b1c1c112">mpls_out_gport</a>;         <span class="comment">/* Out gport used for TX counting by BHH endpoints. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#a2c40c2121322ec794aea7cf45fb0012e">sampling_ratio</a>;                 <span class="comment">/* 0 - No packets sampled to the CPU. 1-8 - Count of packets (with events) that need to arrive before one is sampled to the CPU. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a408246f25813978f5fa1cbb67264b7f1">lm_payload_offset</a>;           <span class="comment">/* Offset in bytes from TOP of the MPLS</span></div><div class="line"><span class="comment">                                           label stack from where the payload</span></div><div class="line"><span class="comment">                                           starts for byte count computation. *</span></div><div class="line"><span class="comment">    uint32 lm_cos_offset;               /* Offset of the Label from top of the</span></div><div class="line"><span class="comment">                                           stack which gives the EXP value for</span></div><div class="line"><span class="comment">                                           deriving the COS value - valid value</span></div><div class="line"><span class="comment">                                           are 0/1/2. */</span></div><div class="line">    <a class="code" href="group__oam.html#gab813e860523fc3c385c012d0e8f4f977">bcm_oam_lm_counter_type_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a64c99d01a24e7675f88f18a9ee6e9ff8">lm_ctr_type</a>; <span class="comment">/* BYTE/PACKET. */</span></div><div class="line">    <a class="code" href="group__oam.html#gae5b064c9b552546722606edd22179244">bcm_oam_lm_counter_size_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#aef195cfaa56b0e269d7fbbbe40fc439a">lm_ctr_sample_size</a>; <span class="comment">/* Valid values are 32/64.</span></div><div class="line"><span class="comment">    uint32 pri_map_id;                  /* OAM priority map id. */</span></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="structbcm__oam__endpoint__info__s.html#a71bbe62cbc176ce67da06949c23b025e">lm_ctr_pool_id</a>;                 <span class="comment">/* The loss measurement counter pool id</span></div><div class="line"><span class="comment">                                           from which the counters should be</span></div><div class="line"><span class="comment">                                           allocated. Valid values are 0/1/2. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a213ba60cccc77404251c01182ba84cba">ccm_tx_update_lm_counter_base_id</a>[BCM_OAM_LM_COUNTER_MAX]; <span class="comment">/* Base LM counter id to be incremented by Tx CCM packets */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a5d4c9c46ba0d796ca026d7651e2e579f">ccm_tx_update_lm_counter_offset</a>[BCM_OAM_LM_COUNTER_MAX]; <span class="comment">/* Offset to the Base LM counter Id to be incremented by Tx CCM packets */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a470912fcdd5188efeee0b1d52f6067f1">ccm_tx_update_lm_counter_action</a>[BCM_OAM_LM_COUNTER_MAX]; <span class="comment">/* LM Counter action (type bcm_oam_lm_counter_action_t) to be used by TX CCM packets */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a601a416e73f1dd54e99bc82a8a11fe4d">ccm_tx_update_lm_counter_size</a>; <span class="comment">/* Number of LM counters to be incremented by Tx CCM packets */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a3c4047fe2545fb42e722ba74c020f592">session_id</a>;                  <span class="comment">/* OAM session id for packet processing</span></div><div class="line"><span class="comment">                                           in BTE. In FP based OAM - This will</span></div><div class="line"><span class="comment">                                           indicate flex counter base ID */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a67e98f57ba60c0925511e1876a2e8d89">session_num_entries</a>;          <span class="comment">/* Number of entries that can result in</span></div><div class="line"><span class="comment">                                           same session ID. In FP based OAM -</span></div><div class="line"><span class="comment">                                           This will indicate number of flex</span></div><div class="line"><span class="comment">                                           counter entries corresponding to same</span></div><div class="line"><span class="comment">                                           OAM session */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a19a25d073baae0da78257c5e0ac9fab7">lm_count_profile</a>;             <span class="comment">/* LM count profile for this endpoint.</span></div><div class="line"><span class="comment">                                           It will be 1 or 0 for selecting one</span></div><div class="line"><span class="comment">                                           of the two OAM LM count profiles. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a5e88df29b265099aa8d203e5e2be0cba">mpls_exp</a>;                     <span class="comment">/* EXP on which BHH will be running */</span></div><div class="line">    <a class="code" href="group__oam.html#gae6a359466c10efbe4fc74a9b41bdd9e1">bcm_oam_endpoint_t</a> <a class="code" href="structbcm__oam__endpoint__info__s.html#a669d930b47d29cbf1fbcbdf202869fa1">action_reference_id</a>; <span class="comment">/* Reference endpoint id whose actions</span></div><div class="line"><span class="comment">                                           will be used on the new created</span></div><div class="line"><span class="comment">                                           endpoint. Default value:</span></div><div class="line"><span class="comment">                                           BCM_OAM_ENDPOINT_INVALID. API call</span></div><div class="line"><span class="comment">                                           will set the parameter to</span></div><div class="line"><span class="comment">                                           BCM_OAM_ENDPOINT_INVALID */</span></div><div class="line"></div><div class="line">} <a class="code" href="group__oam.html#ga4f8d0ef4741c21f8a47cb1daddbcb853">bcm_oam_endpoint_info_t</a>;</div></div><!-- fragment --><p>In BCM5645X devices, lm_counter_base_id returned has two components: most significant 8 bits represent the counter pool id. Lower 24 bits correspond to index within the pool.</p>
<p>In BCM5260/56460 devices, lm_ctr_pool_id need to be passed with one of the counter pool id values, which can be 0 or 1 or 2 representing the 3 counter pools. Hardware can increment multiple counters(atmost 3 from 3 pools) associated with multiple endpoint ids if a packet's fields matches multiple endpoints. However the hardware can increment the counters for different endpoints only if they are allocated from different counter pools. Hence the caller of the bcm_oam_endpoint_create API should take care of passing different counter pool IDs for different endpoints if it is expected to receive packets with fields matching multiple endpoints.</p>
<p>In XGS devices, tx_gport variable in bcm_oam_endpoint_info_t structure can be used to pass the COSQ GPORTs, if the user wishes to use special queues which are different from the pre-allocated queues for each port.</p>
<p>In XGS devices, egress_label variable in bcm_oam_endpoint_info_t structure is the inner most label in the label stack of transmitted OAM packets. This label will be used to terminate the OAM packets in the remote end.</p>
<p>In DNX devices BCM8867x/8868x/8847x/8827x/8837x starting from SDK-6.5.10, the id parameter in bcm_oam_endpoint_info_t, should be provided with value from 1 in-stead of 0, When created with BCM_OAM_ENDPOINT_WITH_ID flag. This is because of LMEP and RMEP id 0 is disabled due to RMEP HW atomicity issue. If the endpoints are created without BCM_OAM_ENDPOINT_WITH_ID flag, then internal allocation of endpoint id will start from id 1 wherever ids were allocated from 0. Details on HW issue will be mentioned in device-specific HW errata document.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Endpoint Structure Flag Definitions</caption>
<tr>
<th>Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_OAM_ENDPOINT_REPLACE </td><td>Replace an existing OAM endpoint (replacing a local endpoint with a remote endpoint and vice-versa is not supported)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_WITH_ID </td><td>Use the specified endpoint ID when creating a new endpoint   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_REMOTE </td><td>Specifies that this is a remote endpoint  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_UP_FACING </td><td>Specifies that this endpoint faces the switching logic   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_CCM_RX </td><td>Enables CCM reception. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LOOPBACK </td><td>Enables loopback response. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_DELAY_MEASUREMENT </td><td>Enables reception and timestamping of delay measurement messages. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LINKTRACE </td><td>Enables reception of linktrace messages. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_PORT_STATE_TX </td><td>Enables the transmission of port state in outgoing CCMs. This is only valid for local endpoints   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_INTERFACE_STATE_TX </td><td>Enables the transmission of interface state in outgoing CCMs. This is only valid for local endpoints   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LOSS_MEASUREMENT </td><td>Enables reception of loss measurement messages. This is only valid for local endpoints   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_INTERMEDIATE </td><td>Configures a Management Intermediate Point.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_PBB_TE </td><td>PBB-TE MEP.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_CCM_COPYTOCPU </td><td>Copy received CCM to CPU. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_CCM_DROP </td><td>Drop received CCM. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_DM_COPYTOCPU </td><td>Copy received delay measurement messages to CPU. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_DM_DROP </td><td>Drop received delay measurement messages. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LB_COPYTOCPU </td><td>Copy received loopback messages to CPU. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LB_DROP </td><td>Drop received loopback messages. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LT_COPYTOCPU </td><td>Copy linktrace messages to CPU. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LT_DROP </td><td>Drop received linktrace messages. This is only valid for local endpoints (see note below)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_MATCH_INNER_VLAN </td><td>Selection of up MIP on CEP (C-comp) rather than on PEP (S-comp). For doubly tagged MEPs, count based on C-comp rather than S-comp.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_REMOTE_DEFECT_TX </td><td>Set the remote defect indicator in outgoing CCMs for this endpoint.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_RDI_TX </td><td>Set the remote defect indicator in outgoing CCMs for this endpoint (alias to BCM_OAM_ENDPOINT_REMOTE_DEFECT_TX).   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_CCM_COPYFIRSTTOCPU </td><td>Copy only the first (next) received CCM to CPU. This is only valid for local endpoints.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_PORT_STATE_UPDATE </td><td>Update port state. This is only valid for local endpoints.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_INTERFACE_STATE_UPDATE </td><td>Update interface state. This is only valid for local endpoints.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_REMOTE_EVENT_DISABLE </td><td>Do not generate events. This is only valid for remote endpoints.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_REMOTE_DEFECT_AUTO_UPDATE </td><td>Auto update defect state on timeout event. This is only valid for remote endpoints.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_RDI_AUTO_UPDATE </td><td>Auto update defect state on timeout event. This is only valid for remote endpoints (alias to BCM_OAM_ENDPOINT_REMOTE_DEFECT_AUTO_UPDATE)   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_MATCH_OUTER_AND_INNER_VLAN </td><td>Selection of MEP based on S and C(S+C) VLAN.   </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_LMEP_PKT_FWD </td><td>Local endpoint CCMs must be forwarded to a remote unit for processing.   </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Endpoint2 Structure Flag Definitions</caption>
<tr>
<td>BCM_OAM_ENDPOINT2_RDI_FROM_RX_DISABLE </td><td>RDI bit on outgoing packets may be taken from RDI indication on received packets.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RDI_FROM_LOC_DISABLE </td><td>RDI bit on outgoing packets may be taken from LOC indication of peer endpoint.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RDI_ON_LOC </td><td>MEP RDI update loc enable - Update local MEP RDI in case of LOC.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RDI_CLEAR_ON_LOC_CLEAR </td><td>MEP RDI update loc clean enable - Update local MEP RDI in case of LOC clear (time-in) event detected.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RDI_ON_RX_RDI </td><td>MEP RDI update rx enable - Update local MEP RDI by copy the RDI indication from the the last valid CCM packet received.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_REMOTE_UPDATE_STATE_DISABLE </td><td>Disable updating RMEP DB.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RX_REMOTE_DEFECT_AUTO_UPDATE </td><td>Auto update defect state on timeout event for RX packets.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_RX_REMOTE_EVENT_DISABLE </td><td>Do not generate events for RX packets.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_HW_ACCELERATION_SET </td><td>Configure only HW accelerator properties.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_REDIRECT_TO_CPU </td><td>Used to send BHH packets to CPU instead of BTE.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_GET_FAULTS_ONLY </td><td>bcm_oam_endpoint_get API fetches only faults and persistent_faults fields in bcm_oam_endpoint_info_t structure.  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_MPLS_INGRESS_ONLY </td><td>Endpoint with only an ingress entry. Applicable only for endpoints of type bcmOAMEndpointTypeBHHMPLS, bcmOAMEndpointTypeBHHPWE  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_UPDATE_COUNTER_ACTION </td><td>Use along with BCM_OAM_ENDPOINT_REPLACE to update the just LM parameters including the egress counters incremented/sampled by Tx CCM packets  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT2_MPLS_EGRESS_ONLY </td><td>Endpoint with only an egress entry. Applicable only for endpoints of type bcmOAMEndpointTypeBHHMPLS, bcmOAMEndpointTypeBHHPWE  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_MATCH_SINGLE_TAGGED_OUTER_VLAN </td><td>Selection of MEP look-up based on Single outer tagged packets only  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_VLAN_VP_UP_MEP_IN_HW </td><td>Endpoint is Vlan based VP UP MEP in HW engine and use tx_gport to honor the vlan translation for UP MEP TXed packed from HW CCM engine  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_EGRESS_INJECTION_DOWN </td><td>Create egress injection down endpoint  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_TX_STATISTICS </td><td>Enable OAMP Tx Opcode statistics  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_RX_STATISTICS </td><td>Enable OAMP Rx Opcode statistics  </td></tr>
<tr>
<td>BCM_OAM_ENDPOINT_FLAGS2_PER_OPCODE_STATISTICS </td><td>Enable OAMP Tx/Rx Per Opcode statistics, count each opcode in separate counter  </td></tr>
</table>
<p>The settings for enabling and disabling CCM reception, loopback response, delay measurement message processing, and linktrace message reception are common for all endpoints on a given port and VLAN. Therefore, if any of these settings is enabled for a given port and VLAN, it will be enabled for endpoints on that port and VLAN.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Endpoint Types</caption>
<tr>
<th>Endpoint type </th><th>Description  </th></tr>
<tr>
<td>bcmOAMEndpointTypeEthernet </td><td>Ethernet OAM  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMPLSPerformance </td><td>MPLS performance MPLS-TP proactive CC&amp;CV   </td></tr>
<tr>
<td>bcmOAMEndpointTypePSC </td><td>Protection coordination state protocol endpoint  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBHHMPLS </td><td>BHH for MPLS-TP  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBHHMPLSVccv </td><td>BHH for MPLS-TP Psuedowire Virtual Circuit Connectivity Verification  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBHHPwe </td><td>BHH for PWE  </td></tr>
<tr>
<td>bcmOAMEndpointTypePwStatus </td><td>Protection coordination state protocol endpoint  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmSectionPort </td><td>RFC 6374 Section loss/delay measurement based on Port  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmSectionInnervlan </td><td>RFC 6374 Section loss/delay measurement based on Port and Inner vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmSectionOuterVlan </td><td>RFC 6374 Section loss/delay measurement based on Port and Outer vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmSectionOuterPlusInnerVlan </td><td>RFC 6374 Section loss/delay measurement based on Port and Outer vlan and Inner vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmPw </td><td>RFC 6374 Section loss/delay measurement based on Pseudowire  </td></tr>
<tr>
<td>bcmOAMEndpointTypeMplsLmDmLsp </td><td>RFC 6374 Section loss/delay measurement based on LSP  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBhhSection </td><td>BHH Section based on Port  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBhhSectionInnervlan </td><td>BHH section based on Port and Inner vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBhhSectionOuterVlan </td><td>BHH section based on Port and Outer vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBhhSectionOuterPlusInnerVlan </td><td>BHH section based on Port and Outer vlan and Inner vlan  </td></tr>
<tr>
<td>bcmOAMEndpointTypeBHHPweGAL </td><td>BHH for PWE with GAL attached  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM VCCV Control Channel Type</caption>
<tr>
<th>VCCV type </th><th>Description  </th></tr>
<tr>
<td>bcmOamBhhVccvChannelAch </td><td>Channel ACH  </td></tr>
<tr>
<td>bcmOamBhhVccvRouterAlert </td><td>Router Alert  </td></tr>
<tr>
<td>bcmOamBhhVccvTtl </td><td>TTL  </td></tr>
<tr>
<td>bcmOamBhhVccvGal13 </td><td>GAL value 13  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Loss Measurment Flag Definitions</caption>
<tr>
<th>Loss Measurment Flag </th><th>Description  </th></tr>
<tr>
<td>BCM_OAM_LM_PCP </td><td>Use different counters for different vlan tag packet priority codes  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>OAM Endpoint Fault Flag Definitions</caption>
<tr>
<th>Fault flag </th><th>Description  </th></tr>
<tr>
<td>BCM_OAM_OPCODE_CCM_IN_HW </td><td>Process CCMs in Hardware  </td></tr>
<tr>
<td>BCM_OAM_OPCODE_CCM_COPY_TO_CPU </td><td>Copy CCMs to CPU  </td></tr>
<tr>
<td>BCM_OAM_OPCODE_CCM_DROP </td><td>Drop CCMs </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2019 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
