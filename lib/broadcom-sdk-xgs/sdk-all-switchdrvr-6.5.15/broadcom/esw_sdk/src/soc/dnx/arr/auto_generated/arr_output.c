/** \file arr_output.c
 * ARR configurations
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 */
/*
 * $Id: $
 $Copyright: (c) 2018 Broadcom.
 Broadcom Proprietary and Confidential. All rights reserved.$
 *
 */

#ifdef BSL_LOG_MODULE
#error "BSL_LOG_MODULE redefined"
#endif
#define BSL_LOG_MODULE BSL_LS_BCMDNX_ARR

#include <soc/dnx/arr/auto_generated/arr_output.h>
#include <bcm/types.h>
#include <bcm/init.h>
#include <soc/dnx/dnx_data/auto_generated/dnx_data_pp.h>
#include <soc/drv.h>

shr_error_e
dnx_arr_output_init(
    int unit)
{
    char *image_name = NULL;
    bcm_info_t device_info;

    SHR_FUNC_INIT_VARS(unit);

    bcm_info_t_init(&device_info);
    bcm_info_get(unit, &device_info);
    image_name = dnx_data_pp.application.device_image_get(unit)->name;

    if (image_name == NULL)
    {
        image_name = "standard_1";
    }

    if ((device_info.device == 0x8690) && (device_info.revision == 0x1) && (sal_strcmp(image_name, "standard_1") == 0))
    {
        SHR_IF_ERR_EXIT(dnx_jr2a0_standard_1_arr_output_init(unit));
    }
    else if ((device_info.device == 0x8690) && (device_info.revision == 0x11) && (sal_strcmp(image_name, "standard_1") == 0))
    {
        SHR_IF_ERR_EXIT(dnx_jr2b0_standard_1_arr_output_init(unit));
    }
    else
    {
        SHR_ERR_EXIT(_SHR_E_CONFIG, "unsupported device configuration - device = 0x%x, revision = 0x%x, device_image = %s", device_info.device, device_info.revision, image_name);
    }

exit:
    SHR_FUNC_EXIT;
}

shr_error_e
dnx_arr_formats_file_get(
    int unit,
    char arr_formats_path[RHNAME_MAX_SIZE])
{
    char *image_name = NULL;
    bcm_info_t device_info;

    SHR_FUNC_INIT_VARS(unit);

    bcm_info_t_init(&device_info);
    bcm_info_get(unit, &device_info);
    image_name = soc_property_suffix_num_str_get(unit, -1, spn_CUSTOM_FEATURE, "device_image");

    if (image_name == NULL)
    {
        image_name = "standard_1";
    }

    if ((device_info.device == 0x8690) && (device_info.revision == 0x1) && (sal_strcmp(image_name, "standard_1") == 0))
    {
        sal_snprintf(arr_formats_path, RHNAME_MAX_SIZE, "%s", "arr/jr2a0_standard_1_arr_logical_formats.xml");
    }
    else if ((device_info.device == 0x8690) && (device_info.revision == 0x11) && (sal_strcmp(image_name, "standard_1") == 0))
    {
        sal_snprintf(arr_formats_path, RHNAME_MAX_SIZE, "%s", "arr/jr2b0_standard_1_arr_logical_formats.xml");
    }
    else
    {
        SHR_ERR_EXIT(_SHR_E_CONFIG, "unsupported device configuration - device = 0x%x, revision = 0x%x, device_image = %s", device_info.device, device_info.revision, image_name);
    }

exit:
    SHR_FUNC_EXIT;
}
