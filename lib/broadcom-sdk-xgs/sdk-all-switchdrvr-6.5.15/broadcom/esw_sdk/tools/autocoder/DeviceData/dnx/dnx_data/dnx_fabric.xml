<?xml version="1.0"?>
<device_data lib="dnx_data" module="fabric" bsl_flag="BSL_LS_BCMDNX_FABRIC">
    <includes>
        <include>bcm/fabric.h</include>
        <include>soc/dnxc/legacy/fabric.h</include>
        <include>soc/dnx/dbal/auto_generated/dbal_defines_tables.h</include>
        <include>soc/dnx/dbal/auto_generated/dbal_defines_fields.h</include>
        <include>bcm_int/dnx/fabric/fabric_cgm.h</include>
    </includes>

    <sub_module name="general" doc="General data about fabric">

        <features>
            <feature name="is_supported" doc="Is fabric supported"></feature>
        </features>

        <defines>
            <define name="nof_lcplls" doc="number of lcplls supported"></define>
            <define name="fmac_clock_khz" doc="FMAC clock frequency [KHz]"></define>
        </defines>

        <numerics>
            <numeric name="connect_mode" doc="Fabric interface connect mode"></numeric>
        </numerics>

        <tables>
            <table name="fmac_bus_size" doc="Fabric MAC bus size [bits]">
                <key name="mode" doc="Fabric MAC mode (FEC type)"></key>
                <value name="size" type="int" doc="The bus size [bits]"></value>
            </table>

            <table name="pll_phys" doc="phys controlled by each lcpll">
                <key name="lcpll" doc="LCPLL index"></key>
                <value name="min_phy_id" type="uint32" doc="The min phy ID controlled by given pll"></value>
                <value name="max_phy_id" type="uint32" doc="The max phy ID controlled by given pll"></value>
            </table>

        </tables>
    </sub_module>

    <sub_module name="links" doc="data about fabric links">

        <defines>
            <define name="nof_links" doc="Number of fabric links"></define>
            <define name="max_link_id" doc="Maximum id of a fabric link"></define>
            <define name="max_speed" doc="Maximum speed a fabric link can have"></define>
        </defines>

        <numerics>
            <numeric name="core_mapping_mode" doc="Fabric link-to-core mapping mode"></numeric>
        </numerics>

        <tables>
            <table name="general" doc="general data about links">
                <value name="supported_links" type="bcm_pbmp_t" doc="bitmap of supported links"></value>
            </table>
            <table name="polarity" doc="Polarity of fabric link">
                <key name="link" doc="fabric link id"></key>
                <value name="tx_polarity" type="uint32" doc="TX Polarity"></value>
                <value name="rx_polarity" type="uint32" doc="RX Polarity"></value>
            </table>
        </tables>

    </sub_module>

    <sub_module name="blocks" doc="General block information">

        <features>
        </features>

        <defines>
            <define name="nof_instances_fmac" doc="Number of FMAC instances."></define>
            <define name="nof_links_in_fmac" doc="Number of links for each FMAC block."></define>
            <define name="nof_instances_fsrd" doc="Number of FSRD instances."></define>
            <define name="nof_links_in_fsrd" doc="Number of links for each FSRD block."></define>
            <define name="nof_fmacs_in_fsrd" doc="Number of FMAC blocks for each FSRD block."></define>
            <define name="nof_pms" doc="Number of fabric PMs"></define>
            <define name="nof_links_in_pm" doc="Number of links for each fabric PM"></define>
            <define name="nof_fmacs_in_pm" doc="Number of FMAC blocks for each fabric PM"></define>            
        </defines>

        <numerics>
        </numerics>

        <tables>
            <table name="fsrd_sbus_chain" doc="The order of FSRDs in the SBUS chain">
                <key name="fsrd_id" doc="FSRD ID"></key>
                <value name="index_in_chain" type="int" doc="The index of the FSRD in the SBUS chain"></value>
            </table>
        </tables>
        
    </sub_module>

    <sub_module name="reachability" doc="General reachability attributes">

        <features>
        </features>
 
        <defines>
            <define name="resolution" doc="Reachability messages resolution."></define>
            <!-- Reachability messages sent on all links in a relatively short time,
                 and then wait relatively long time until the next round to send them.
                 gen_period is the number of clocks to wait before sending
                 message on the next link.
                 After reachability messages were sent on all links, we wait
                 full_cycle_period_usec micro-seconds before sending the new
                 rechability messages on all links.-->
            <define name="gen_period" doc="Reachability message generation period (in units of chip clocks)."></define>
            <define name="full_cycle_period_usec" doc="Full cycle of reachability cells period (in units of micro-seconds)."></define>
            <define name="watchdog_resolution" doc="Reachability message watchdog resolution.."></define>
            <define name="watchdog_period_usec" doc="Reachability message watchdog period (in units of micto-seconds)."></define>
        </defines>

        <numerics>
        </numerics>

        <tables>
        </tables>

    </sub_module>

    <sub_module name="mesh" doc="MESH mode attributes">

        <features>
            <feature name="is_supported" doc="Is mesh supported"></feature>
        </features>

        <defines>
            <define name="max_mc_id" doc="Maximum MC ID in MESH mode"></define>
        </defines>

        <numerics>
            <numeric name="multicast_enable" doc="Detemines whether the MESH system supports MC"></numeric>
            <numeric name="nof_max_dest" doc="Number of maximum FAP destination in MESH mode"></numeric>
        </numerics>

        <tables>
        </tables>

    </sub_module>


    <!-- used as an example - can be deleted when implementing jericho 2 fabric module -->
    <sub_module name="thresholds" doc="default values for threholds">
        
        <defines>
            <define name="default_severity" doc="default severity for thresholds"></define>
            <define name="default_mode" doc="default mode for thresholds"></define>
        </defines>
        
        <features>
            <feature name="severity_supported" doc="Does threshold per severity supported?"></feature>
            <feature name="mode_supported" doc="Does threshold per mode supported?"></feature>
        </features>
        
        <tables>
            <table name="dch_default" doc="set of threholds">
                <key name="severity" doc="severity thresholds"></key>
                <key name="mode" doc="mode of threholds according to fabric pipes"></key>
                <value name="gci0" type="uint32" doc="gci th level 0"></value>
                <value name="gci1" type="uint32" doc="gci th level 1"></value>
                <value name="gci2" type="uint32" doc="gci th level 2"></value>
                <value name="rci0" type="uint32" doc="rci th level 0"></value>
                <value name="rci1" type="uint32" doc="rci th level 1"></value>
                <value name="rci2" type="uint32" doc="rci th level 2"></value>
            </table>
        </tables>

    </sub_module>
    
    <sub_module name="cell" doc="cell attributes">
        <defines>
            <define name="nof_priorities" doc="nof of supported fabric priorities"></define>
            <define name="vsc256_max_size" doc="Max cell size in VSC256 configuration"></define>
            <define name="sr_cell_header_offset" doc="Offset in the header fields of sr cells (bytes)"></define>
        </defines>
        
        <numerics>
            <numeric name="default_packing_mode" doc="Default packing mode"></numeric>
            <numeric name="pcp_enable" doc="packet cell packing enable"></numeric>
        </numerics>
        
    </sub_module>
    
    <sub_module name="pipes" doc="pipes attributes">
        
        <features>
        </features>
        
        <defines>
            <define name="max_nof_pipes" doc="max supported fabric pipes"></define>
        </defines>

        <numerics>
            <numeric name="nof_pipes" doc="number of actual (configured) pipes"></numeric>
            <numeric name="multi_pipe_system" doc="Is there a device in the system in multi pipes mode"></numeric>
        </numerics>
        
        <tables>
            <table name="map" doc="map traffic cast X priority to fabric pipe">
                <value name="uc" type="uint32[DNX_DATA_MAX_FABRIC_CELL_NOF_PRIORITIES]" doc="each element represents uc priority pipe"></value>
                <value name="mc" type="uint32[DNX_DATA_MAX_FABRIC_CELL_NOF_PRIORITIES]" doc="each element represents mc priority pipe"></value>
                <value name="name" type="char *" doc="The configuration display name"></value>
                <value name="type" type="soc_dnxc_fabric_pipe_map_type_t" doc="The pipe mapping type"></value>
                <value name="min_hp_mc" type="int" doc="Minimum priority to be considered as high priority multicast"></value>
            </table>
            
            <table name="valid_map_config" doc="pipes map valid configurations">
                <key name="config_id" doc="The configuration running number"></key>
                <value name="nof_pipes" type="uint32" doc="Number of pipes"></value>
                <value name="uc" type="uint32[DNX_DATA_MAX_FABRIC_CELL_NOF_PRIORITIES]" doc="map unicast cell priority to pipe"></value>
                <value name="mc" type="uint32[DNX_DATA_MAX_FABRIC_CELL_NOF_PRIORITIES]" doc="map multicast cell priority to pipe"></value>
                <value name="name" type="char *" doc="The configuration display name"></value>
                <value name="type" type="soc_dnxc_fabric_pipe_map_type_t" doc="The pipe mapping type"></value>
                <value name="min_hp_mc" type="int" doc="Minimum priority to be considered as high priority multicast"></value>
            </table>
        </tables>
        
    </sub_module>

    <sub_module name="debug" doc="debug configurations">
        <numerics>
            <numeric name="mesh_topology_size" doc="Size of mesh topology" signed="1"></numeric>
            <numeric name="mesh_topology_fast" doc="Device is in mesh topology fast mode."></numeric>
        </numerics>
    </sub_module>
    
    <sub_module name="tdm" doc="TDM attributes">
        <numerics>
            <numeric name="priority" doc="The TDM fabric priority" signed="1"></numeric>
        </numerics>
    </sub_module>

    <!-- Congestion Management -->
    <sub_module name="cgm" doc="CGM info">
        <defines>
            <define name="nof_rci_levels" doc="Number of RCI levels"></define>
        </defines>
        <tables>
            <table name="access_map" doc="DBAL information per threshold type">
                <key name="control_type" type="bcm_fabric_cgm_control_type_t" doc="Fabric CGM control type"></key>
                <value name="dbal_table" type="dbal_tables_e" doc="DBAL table"></value>
                <value name="dbal_key1" type="dbal_fields_e" doc="DBAL key1"></value>
                <value name="dbal_key2" type="dbal_fields_e" doc="DBAL key2"></value>
                <value name="dbal_result" type="dbal_fields_e" doc="DBAL result"></value>
                <value name="index_type" type="dnx_fabric_cgm_control_index_type_e" doc="DBAL table index type"></value>
                <value name="is_valid" type="int" doc="is control_type valid?"></value>
            </table>
        </tables>
    </sub_module>

    <sub_module name="ilkn" doc="data about ILKN over fabric">
        <tables>
            <table name="bypass_info" doc="data about bypassed links">
                <key name="pm_id" type="int" doc="Internal Port Macro identifier"></key>
                <value name="links" type="uint32" doc="Links in bypass mode"></value>
            </table>
        </tables>        
    </sub_module>
    
    <sub_module name="dbal"  doc="fabric dbal defines">
        
        <features>
        </features>
        
        <defines>
        </defines>

        <numerics>
            <!-- Priority -->
            <numeric name="priority_bits_nof" doc="Number of bits in FABRIC_PRIORITY field"></numeric>
        </numerics>        
        
        <tables>
        </tables>
    </sub_module>

</device_data>

