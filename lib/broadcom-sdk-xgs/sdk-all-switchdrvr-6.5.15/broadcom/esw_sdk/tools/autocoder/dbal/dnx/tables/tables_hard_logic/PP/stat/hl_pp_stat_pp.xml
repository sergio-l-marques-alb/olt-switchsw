<?xml version="1.0" encoding="UTF-8"?>

<!--
    ******************************************************
    DBAL Hard-Logic Logical Tables:
    This xml contains the hard-logic logical DB for the DBAL.
    The data is loaded to the device during init process
    ******************************************************

    DB Rules:
    *********
-->

<AppDbCatalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:noNamespaceSchemaLocation="../../hard_logic_schema.xsd">

    <AppDB Name="STAT_PP_IRPP_PROFILE_INFO">
        <OneLineDescription>Ingress statistics profiles table</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="STAT_CMD" Size="5" Type="UINT"/>
            </Key>
            <Result>
                <Field Name="STAT_IF_OBJECT_ID"/>
                <Field Name="STAT_IF_TYPE_ID"/>
                <Field Name="IS_METER" Type="BOOL"/>
                <Field Name="MAPPING_REQUIRED" Type="BOOL"/>
                <Field Name="STAT_OBJECT_METADATA_SIZE" Size="2" Type="UINT"/>
                <Field Name="STAT_OBJECT_METADATA_SHIFT" Size="4" Type="UINT"/>
            </Result>            <TableLabels>PP_STATISTICS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="STAT_IF_OBJECT_ID">
                    <Access>
                    	<Memory GroupName="MAP_STATISTIC_OBJECT_TABLE">
                            <HwField Name="STATISTICS_IFf"/>
                        </Memory>
                    </Access>
               </Field>
                <Field Name="STAT_IF_TYPE_ID">
                    <Access>
                        <Memory GroupName="MAP_STATISTIC_OBJECT_TABLE">
                            <HwField Name="TYPEf"/>
                        </Memory>
                    </Access>
               </Field>
                <Field Name="IS_METER">
                    <Access>
                        <Memory GroupName="MAP_STATISTIC_OBJECT_TABLE">
                            <HwField Name="IS_METERf"/>
                        </Memory>
                    </Access>
               </Field>
                <Field Name="MAPPING_REQUIRED">
                    <Access>
                        <Memory GroupName="MAP_STATISTIC_OBJECT_TABLE">
                            <HwField Name="MAPPING_REQUIREDf"/>
                        </Memory>
                    </Access>
               </Field>
               <Field Name="STAT_OBJECT_METADATA_SIZE">
                    <Access>
                        <Register GroupName="INGRESS_STAT_OBJ_PROFILE_ATTR">
                            <HwField Name="STAT_OBJ_PROFILE_ATTR_VECf"/>
                            <DataOffset Formula="STAT_OBJECT_METADATA_SHIFT*KEY+STAT_OBJECT_METADATA_SIZE*KEY+STAT_OBJECT_METADATA_SHIFT"/>
                        </Register>
                    </Access>
               </Field>
               <Field Name="STAT_OBJECT_METADATA_SHIFT">
                    <Access>
                        <Register GroupName="INGRESS_STAT_OBJ_PROFILE_ATTR">
                            <HwField Name="STAT_OBJ_PROFILE_ATTR_VECf"/>
                            <DataOffset Formula="STAT_OBJECT_METADATA_SHIFT*KEY+STAT_OBJECT_METADATA_SIZE*KEY"/>
                        </Register>
                    </Access>
               </Field>               
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="STAT_PP_ETPP_PROFILE_INFO">
        <OneLineDescription>ETPP statistics profiles table</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="STAT_CMD" Size="5" Type="UINT"/>
            </Key>
            <Result>
                <Field Name="STAT_IF_OBJECT_ID"/>
                <Field Name="STAT_IF_TYPE_ID"/>
                <Field Name="IS_METER" Size="1" Type="BOOL"/>
                <Field Name="METER_INTERFACE" Size="1" Type="BOOL"/>
                <Field Name="METER_QOS_PROFILE" Size="3" Type="UINT"/>
            </Result>
            <TableLabels>PP_STATISTICS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="STAT_IF_OBJECT_ID">
                    <Access>
                        <Register Name="ETPPB_MAP_STS_TO_INTERFACEr">
                            <HwField Name="MAP_STS_TO_INTERFACEf"/>
                            <DataOffset Formula="STAT_IF_OBJECT_ID*KEY"/>
                        </Register>
                    </Access>
               </Field>
               <Field Name="STAT_IF_TYPE_ID">
                    <Access>
                        <Register Name="ETPPB_MAP_STS_TO_TYPEr">
                            <HwField Name="MAP_STS_TO_TYPEf"/>
                            <DataOffset Formula="STAT_IF_TYPE_ID*KEY"/>
                        </Register>
                    </Access>
               </Field>
               <Field Name="IS_METER">
                    <Access>
                        <Register Name="ETPPC_CFG_STAT_OBJ_CMD_TO_IS_METERr">
                            <HwField Name="CFG_STAT_OBJ_CMD_TO_IS_METERf"/>
                            <DataOffset Formula="IS_METER*KEY"/>
                        </Register>
                    </Access>
               </Field>
               <Field Name="METER_INTERFACE">
                    <Access>
                        <Register Name="ETPPC_CFG_STAT_OBJ_CMD_TO_METER_IFr">
                            <HwField Name="CFG_STAT_OBJ_CMD_TO_METER_IFf"/>
                            <DataOffset Formula="METER_INTERFACE*KEY"/>
                        </Register>
                    </Access>
               </Field>
               <Field Name="METER_QOS_PROFILE">
                    <Access>
                        <Register Name="ETPPC_CFG_STAT_OBJ_CMD_TO_METER_QOS_PROFILEr">
                            <HwField Name="CFG_STAT_OBJ_CMD_TO_METER_QOS_PROFILEf"/>
                            <DataOffset Formula="METER_QOS_PROFILE*KEY"/>
                        </Register>
                    </Access>
               </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>    

    <AppDB Name="STAT_PP_ERPP_PROFILE_INFO">
        <OneLineDescription>ERPP statistics profiles table</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="STAT_CMD" Size="3" Type="UINT"/>
            </Key>
            <Result>
                <Field Name="STAT_IF_TYPE_ID"/>
            </Result>
            <TableLabels>PP_STATISTICS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
               <Field Name="STAT_IF_TYPE_ID">
                    <Access>
                        <Memory Name="ERPP_COUNTER_0_TYPE_TABLEm">
                            <HwField Name="COUNTER_0_TYPEf"/>
                        </Memory>
                    </Access>
                    <Access>
                        <Memory Name="ERPP_COUNTER_1_TYPE_TABLEm">
                            <HwField Name="COUNTER_1_TYPEf"/>
                        </Memory>
                    </Access>
               </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>    

    <AppDB Name="STAT_PP_IRPP_VTT_STATISTICS_METADATA_VALUE_MAP">
        <OneLineDescription>IRPP VTT metadata values</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <!--FIXME: HWJERICHO2-2608 - re-add IS_MC bit key-->
                <!-- Field Name="IS_MC" Type="BOOL"/-->
                <Field Name="LAYER_TYPE" Size="5" Type="LAYER_TYPES"/>
            </Key>
            <Result>
                <Field Name="STAT_METADATA_VAL" Size="3" Type="UINT"/>
            </Result>
            <TableLabels>PP_STATISTICS</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="STAT_METADATA_VAL">
                    <Access>
                        <Register GroupName="INGRESS_STATISTICS_INFO">
                            <HwField Name="STAT_META_DATA_MAPf"/>
                            <DataOffset Formula="KEY*STAT_METADATA_VAL*2"/>
                        </Register>
                    </Access>
                    <Access>
                        <Register GroupName="INGRESS_STATISTICS_INFO">
                            <HwField Name="STAT_META_DATA_MAPf"/>
                            <DataOffset Formula="KEY*STAT_METADATA_VAL*2+STAT_METADATA_VAL"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>    
</AppDbCatalog>
