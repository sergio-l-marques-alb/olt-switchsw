<?xml version="1.0" encoding="UTF-8"?>

<!--
    ******************************************************
    DBAL Hard-Logic Logical Tables:
    This xml contains the hard-logic logical DB for the DBAL.
    The data is loaded to the device during init process
    ******************************************************

    DB Rules:
    *********
-->

<AppDbCatalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:noNamespaceSchemaLocation="../../hard_logic_schema.xsd">

    <AppDB Name="KLEAP_VT45_RESOURCES_MAPPING">
        <OneLineDescription>Indicates per Context the KBR mapping in VT45 stage. 0 means VTD, 1 means VTE</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="KBR_SELECTOR" Type="KLEAP_STAGE_SELECTOR" NofInstances="6"/>
                <Field Name="FFC_GROUP_SELECTOR" Type="KLEAP_STAGE_SELECTOR" NofInstances="4"/>
                <Field Name="SHR_PD_SELECTOR" Type="KLEAP_STAGE_SELECTOR" NofInstances="2"/>
            </Result>
            <TableLabels>L3</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping> 
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="KBR_SELECTOR">
                    <Access instanceIndex="ALL">
                        <Register Name="IPPA_VTT_ST_TH_LE_CONFIGr"> 
                            <HwField Name="VTT_ST_TH_LE_KEYS_BUILDER_STAGE_SELECTORSf"/>
                            <DataOffset Formula="INSTANCE"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="FFC_GROUP_SELECTOR">
                    <Access instanceIndex="ALL">
                        <Register Name="IPPA_VTT_ST_TH_LE_CONFIGr"> 
                            <HwField Name="VTT_ST_TH_LE_FFC_GROUP_STAGE_SELECTORf"/>
                            <DataOffset Formula="INSTANCE"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="SHR_PD_SELECTOR">
                    <Access instanceIndex="ALL">
                        <Register Name="IPPA_VTT_ST_TH_LE_CONFIGr"> 
                            <HwField Name="VTT_ST_TH_LE_SHARED_PDS_STAGE_SELECTORSf"/>
                            <DataOffset Formula="INSTANCE"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="KLEAP_VT45_FFC_QUAD_IS_ACL">
        <OneLineDescription>Indicates per FFC Quad if it is controlled by ACL or FWD context</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CONTEXT_PROFILE" Size="6"/>
                <Field Name="FFC_QUAD_IDX" Type="UINT" Size="3" MaxValue="5"/>
            </Key>
            <Result>
                <Field Name="FFC_QUAD_IS_ACL" Type="BOOL"/>
            </Result>
            <TableLabels>L3</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping> 
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="FFC_QUAD_IS_ACL">
                    <Access>
                        <KeyCondition Field="FFC_QUAD_IDX" Type="EQUAL_TO" Value="0"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_0_QUAD_CONTEXT_SELECTORm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="FFC_GROUP_0_QUAD_CONTEXT_SELECTORf"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_QUAD_IDX" Type="EQUAL_TO" Value="1"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_1_QUAD_CONTEXT_SELECTORm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="FFC_GROUP_1_QUAD_CONTEXT_SELECTORf"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_QUAD_IDX" Type="BIGGER_THAN" Value="1"/>
                        <KeyCondition Field="FFC_QUAD_IDX" Type="LOWER_THAN" Value="4"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_2_QUAD_CONTEXT_SELECTORm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="FFC_GROUP_2_QUAD_CONTEXT_SELECTORf"/>
                            <DataOffset Formula="FFC_QUAD_IDX-2"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_QUAD_IDX" Type="BIGGER_THAN" Value="3"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_3_QUAD_CONTEXT_SELECTORm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="FFC_GROUP_3_QUAD_CONTEXT_SELECTORf"/>
                            <DataOffset Formula="FFC_QUAD_IDX-4"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="KLEAP_VT45_KBR_INFO">
        <OneLineDescription>Indicates per Context per KBR the KBR info - FFC and AppDB configured</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CONTEXT_PROFILE" Size="6"/>
                <Field Name="KBR_IDX" Type="UINT" Size="5" MaxValue="5"/>
            </Key>
            <Result>
                <Field Name="KBR_IS_ACL" Type="BOOL"/>
                <Field Name="APP_DB_ID"/>
                <Field Name="FFC_BITMAP" Size="20" Type="BITMAP"/>
            </Result>
            <TableLabels>L3</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping> 
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="KBR_IS_ACL">
                    <Access>
                        <Memory Name="IPPA_VTT_ST_TH_LE_KEY_BUILDER_CONTEXT_SELECTORm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="KEY_BUILDER_CONTEXT_SELECTORf"/>
                            <DataOffset Formula="KBR_IDX"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="APP_DB_ID">
                    <Access>
                        <Memory Name="IPPA_VTT_ST_TH_LE_KBRm"> 
                            <ArrayOffset Formula="KBR_IDX"/>
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="APP_DBf"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="FFC_BITMAP">
                    <Access>
                        <Memory Name="IPPA_VTT_ST_TH_LE_KBRm"> 
                            <ArrayOffset Formula="KBR_IDX"/>
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="KBRf"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="KLEAP_VT45_FFC_INSTRUCTION">
        <OneLineDescription>Indicates per Context per KBR the KBR info - FFC and AppDB configured</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CONTEXT_PROFILE" Size="6"/>
                <Field Name="FFC_IDX" Type="UINT" Size="6" MaxValue="19"/>
            </Key>
            <Result>
                <Field Name="VT45_FFC_INSTRUCTION"/>
            </Result>
            <TableLabels>L3</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping> 
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="VT45_FFC_INSTRUCTION">
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="2"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_0_QUAD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="BIGGER_THAN" Value="1"/>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="6"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_1_QUAD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION-2*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="BIGGER_THAN" Value="5"/>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="10"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_2_QUADm"> 
                            <ArrayOffset Formula="0"/>
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION-6*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="BIGGER_THAN" Value="9"/>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="14"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_2_QUADm"> 
                            <ArrayOffset Formula="1"/>
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION-10*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="BIGGER_THAN" Value="13"/>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="18"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_3_QUAD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION-14*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="FFC_IDX" Type="BIGGER_THAN" Value="17"/>
                        <KeyCondition Field="FFC_IDX" Type="LOWER_THAN" Value="20"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_FFC_GROUP_3_QUAD_1m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="FFC_IDX*VT45_FFC_INSTRUCTION-18*VT45_FFC_INSTRUCTION"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="KLEAP_VT45_PD_INFO">
        <OneLineDescription>Indicates per prioriy decoder and context its parameters and profile</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CONTEXT_PROFILE" Size="6"/>
                <Field Name="PD_IDX" Type="UINT" Size="3" MaxValue="5"/>
                <Field Name="KBR_IDX" Type="UINT" Size="5" MaxValue="5"/>
            </Key>
            <Result>
                <Field Name="PD_STRENGTH_WIDTH" Type="UINT" Size="2"/>
                <Field Name="PD_CONST_STRENGTH" Type="UINT" Size="4"/>
                <Field Name="PD_ORDER" Type="UINT" Size="3"/>
                <Field Name="PD_PROFILE" Type="UINT" Size="7"/>
            </Result>
            <TableLabels>L3</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping> 
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="PD_STRENGTH_WIDTH">
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="0"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="1"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_1m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="2"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_2m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="3"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_3m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="4"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_4m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="5"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_5m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="STRENGTH_WIDTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_STRENGTH_WIDTH"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="PD_ORDER">
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="0"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="1"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_1m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="2"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_2m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="3"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_3m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="4"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_4m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="5"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_5m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="ORDER_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_ORDER"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="PD_CONST_STRENGTH">
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="0"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_0m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="1"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_1m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="2"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_2m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="3"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_3m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="4"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_4m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTH_VECf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="5"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_5m"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <HwField Name="CONST_STRENGTHf"/>
                            <DataOffset Formula="KBR_IDX*PD_CONST_STRENGTH"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="PD_PROFILE">
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="0"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_0_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="1"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_1_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="2"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_2_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="3"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_3_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="4"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_4_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                    <Access>
                        <KeyCondition Field="PD_IDX" Type="EQUAL_TO" Value="5"/>
                        <Memory Name="IPPA_VTT_ST_TH_LE_PD_5_CONTEXT_TO_PROFILES_DATAm"> 
                            <EntryOffset Formula="CONTEXT_PROFILE"/>
                            <DataOffset Formula="KBR_IDX*PD_PROFILE"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

</AppDbCatalog>
