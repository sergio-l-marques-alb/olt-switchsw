<?xml version="1.0" encoding="UTF-8"?>

<!--
    ******************************************************
    DBAL Hard-Logic Logical Tables:
    This xml contains the hard-logic logical DB for the DBAL.
    The data is loaded to the device during init process
    ******************************************************

    DB Rules:
    *********
-->

<AppDbCatalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../hard_logic_schema.xsd">

    <!-- RCI { -->

    <AppDB Name="FABRIC_CGM_RCI_ENABLE">
        <OneLineDescription>Enable/Disable Fabric RCI</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="PIPE" Type="UINT" Size="2" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="ENABLE" Type="BOOL" Size="1" Description="Enable RCI"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="ENABLE">
                    <Access>
                        <Register Name="FDR_FDR_ENABLERS_REGISTER_2r">
                            <HwField Name="RCI_PIPE_ENf"/>
                            <DataOffset Formula="PIPE"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_RCI_THRESHOLDS">
        <OneLineDescription>RCI Thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <!-- FIXME Size="2" after Niv will fix the bug -->
                <Field Name="PIPE" Type="UINT" Size="6" MaxValue="2" Description="Pipe id"/>
                <Field Name="LEVEL" Type="UINT" Size="6" MaxValue="2" Description="RCI Level id"/>
            </Key>
            <Result>
                <Field Name="LINK_RCI_THRESHOLD" Type="UINT" Size="10" Description="RCI threshold of link fifo"/>
                <Field Name="EGRESS_RCI_THRESHOLD" Type="UINT" Size="12" Description="RCI threshold of egress core fifo"/>
                <Field Name="TOTAL_EGRESS_RCI_THRESHOLD" Type="UINT" Size="14" Description="RCI threshold of total egress fifos (both cores)"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="LINK_RCI_THRESHOLD">
                    <Access>
                        <Register Name="FDR_RCI_FDR_IN_TH_TYPEr">
                            <DataOffset Formula="PIPE*30+LEVEL*10"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="EGRESS_RCI_THRESHOLD">
                    <Access>
                        <Register Name="FDR_RCI_FDR_OUT_THr">
                            <DataOffset Formula="PIPE*36+LEVEL*12"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="TOTAL_EGRESS_RCI_THRESHOLD">
                    <Access>
                        <Register Name="FDR_RCI_FDR_OUT_TOTAL_THr">
                            <DataOffset Formula="PIPE*42+LEVEL*14"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_RCI_LOCAL_THRESHOLDS">
        <OneLineDescription>Local FIFOs RCI Thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LEVEL" Type="UINT" Size="2" MaxValue="2" Description="RCI Level id"/>
            </Key>
            <Result>
                <Field Name="LOCAL_RCI_THRESHOLD" Type="UINT" Size="8" Description="local fifo RCI threshold"/>
                <Field Name="TOTAL_LOCAL_RCI_THRESHOLD" Type="UINT" Size="9" Description="total local fifo RCI threshold"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="LOCAL_RCI_THRESHOLD">
                    <Access>
                        <Register Name="FDA_FDA_IPT_RCIr">
                            <DataOffset Formula="LEVEL*8"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="TOTAL_LOCAL_RCI_THRESHOLD">
                    <Access>
                        <Register Name="FDA_FDA_IPT_TOTAL_RCIr">
                            <DataOffset Formula="LEVEL*9"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_RCI_SCORE_MAPPING">
        <OneLineDescription>Factors for RCI score computing</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LEVEL" Type="UINT" Size="2" MaxValue="2" Description="RCI Level id"/>
            </Key>
            <Result>
                <Field Name="LINK_RCI_FACTOR" Type="UINT" Size="3" Description="Factor to use for link RCI"/>
                <Field Name="EGRESS_RCI_SCORE" Type="UINT" Size="14" Description="RCI score for egress FIFO"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="LINK_RCI_FACTOR">
                    <Access>
                        <Register Name="FDA_RCI_CONFIGSr">
                            <DataOffset Formula="LEVEL*3"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="EGRESS_RCI_SCORE">
                    <Access>
                        <Register Name="FDA_RCI_CONFIGSr">
                            <DataOffset Formula="30+LEVEL*14"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_RCI_HIGH_SEVERITY">
        <OneLineDescription>Configurations for High Severity RCI</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="MIN_NOF_LINKS" Type="UINT" Size="7" Description="Minimum number of links with highest RCI level which leads to High Severity indication"/>
                <Field Name="SCORE" Type="UINT" Size="14" Description="RCI score when High Severity indicated"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="MIN_NOF_LINKS">
                    <Access>
                        <Register Name="FDA_RCI_CONFIGSr">
                            <HwField Name="RCI_HIGH_SEV_MIN_NOF_LINKSf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="SCORE">
                    <Access>
                        <Register Name="FDA_RCI_CONFIGSr">
                            <HwField Name="RCI_HIGH_SEV_SCOREf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_RCI_SCORE_TO_LEVEL_THRESHOLDS">
        <OneLineDescription>Thresholds to convert scores to final RCI levels</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LEVEL" Type="UINT" Size="3" MaxValue="6" Description="Final RCI Level id"/>
            </Key>
            <Result>
                <Field Name="CORE_THRESHOLD" Type="UINT" Size="14" Description="Threshold to convert core score to final RCI level"/>
                <Field Name="DEVICE_THRESHOLD" Type="UINT" Size="14" Description="Threshold to convert device score to final RCI level"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="CORE_THRESHOLD">
                    <Access>
                        <Register Name="FDA_RCI_CORE_MAPPINGr">
                            <DataOffset Formula="LEVEL*14"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="DEVICE_THRESHOLD">
                    <Access>
                        <Register Name="FDA_RCI_DEVICE_MAPPINGr">
                            <DataOffset Formula="LEVEL*14"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <!-- } RCI -->

    <!-- GCI { -->

    <AppDB Name="FABRIC_CGM_GCI_LEAKY_BUCKET_CONFIG">
        <OneLineDescription>Leaky Bucket Configurations</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LEAKY_BUCKET_ID" Type="UINT" Size="2" MaxValue="3" Description="Leaky Bucket id"/>
            </Key>
            <Result>
                <Field Name="MAX_VALUE" Type="UINT" Size="8" Description="The maximum value the leaky bucket may reach"/>
                <Field Name="THRESHOLD" Type="UINT" Size="8" Description="The threshold above which the leaky bucket is considered congested"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="MAX_VALUE">
                    <Access>
                        <Register Name="IPT_GCI_LEAKY_BUCKET_CONFIGURATION_REGISTER_0r">
                            <DataOffset Formula="LEAKY_BUCKET_ID*8"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="IPT_GCI_LEAKY_BUCKET_CONFIGURATION_REGISTER_2r">
                            <DataOffset Formula="LEAKY_BUCKET_ID*8"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_GCI_LEAKY_BUCKET_FC_ENABLE">
        <OneLineDescription>Enable/Disable GCI Leaky Buckets flow controls</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="LEAKY_BUCKET_ENABLE" Type="UINT" MaxValue="1" Description="Enable Leaky Bucket GCI FC"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="LEAKY_BUCKET_ENABLE">
                    <Access EncodeType="MULTIPLE" EncodeValue="7" Size="4">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPT_DTQ_MC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="8" Size="4">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPT_GFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="15" Size="4">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPT_BFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="8" Size="4">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPS_GFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="12" Size="4">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPS_BFMC_2_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="14" Size="4">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPS_BFMC_1_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="15" Size="4">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_LB_2_IPS_BFMC_0_FC_MAPf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_GCI_BACKOFF_CONGESTION_SEVERITY_THRESHOLDS">
        <OneLineDescription>Configure Backoff congestion severity level by setting thresholds on the congestion severity (which is a running average of the incoming GCI indications)</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LEVEL_SEPARATE" Type="UINT" Size="2" MaxValue="2" Description="GCI Backoff congestion severity level threshold id"/>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="10" Description="Backoff congestion severity thresh"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="IPT_GCI_BACKOFF_RANGE_THRESHOLDSr">
                            <DataOffset Formula="LEVEL_SEPARATE*10"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_GCI_BACKOFF_CONGESTION_SEVERITY_WEIGHTS">
        <OneLineDescription>Configure GCI Backoff congestion severity weights</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="CONGESTION_SEVERITY_WORSE_WEIGHT" Type="UINT" Size="4" Description="Backoff congestion severity worse weight"/>
                <Field Name="CONGESTION_SEVERITY_BETTER_WEIGHT" Type="UINT" Size="4" Description="Backoff congestion severity better weight"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="CONGESTION_SEVERITY_WORSE_WEIGHT">
                    <Access>
                        <Register Name="IPT_GCI_BACKOFF_CS_WEIGHTSr">
                            <HwField Name="CNGST_LVL_WORSE_WEIGHTf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="CONGESTION_SEVERITY_BETTER_WEIGHT">
                    <Access>
                        <Register Name="IPT_GCI_BACKOFF_CS_WEIGHTSr">
                            <HwField Name="CNGST_LVL_BETTER_WEIGHTf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_GCI_BACKOFF_TIMER_MAX">
        <OneLineDescription>Configure maximum value for random Backoff timer</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="BACKOFF_TIMER_ID" Type="UINT" Size="2" MaxValue="2" Description="Backoff Timer id"/>
                <Field Name="LEVEL" Type="UINT" Size="2" MaxValue="3" Description="GCI congestion level"/>
            </Key>
            <Result>
                <Field Name="MAX_VALUE" Type="UINT" Size="12" Description="Backoff timer maximum value"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="MAX_VALUE">
                    <Access>
                        <KeyCondition Field="BACKOFF_TIMER_ID" Type="EQUAL_TO" Value="0"/>
                        <Register Name="IPT_GCI_BACKOFF_MASK_LUT_1r">
                            <DataOffset Formula="LEVEL*12"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Field="BACKOFF_TIMER_ID" Type="EQUAL_TO" Value="1"/>
                        <Register Name="IPT_GCI_BACKOFF_MASK_LUT_2r">
                            <DataOffset Formula="LEVEL*12"/>
                        </Register>
                    </Access>
                    <Access>
                        <KeyCondition Field="BACKOFF_TIMER_ID" Type="EQUAL_TO" Value="2"/>
                        <Register Name="IPT_GCI_BACKOFF_MASK_LUT_3r">
                            <DataOffset Formula="LEVEL*12"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_GCI_BACKOFF_FC_ENABLE">
        <OneLineDescription>Enable GCI Backoff flow controls</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="BACKOFF_ENABLE" Type="UINT" MaxValue="1" Description="Enable GCI Backoff FC"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="BACKOFF_ENABLE" >
                    <Access EncodeType="MULTIPLE" EncodeValue="7" Size="3">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPT_DTQ_MC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="4" Size="3">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPT_GFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="7" Size="3">
                        <Register Name="IPT_INTRNL_FMC_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPT_BFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="4" Size="3">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPS_GFMC_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="6" Size="3">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPS_BFMC_2_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="7" Size="3">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPS_BFMC_1_FC_MAPf"/>
                        </Register>
                    </Access>
                    <Access EncodeType="MULTIPLE" EncodeValue="7" Size="3">
                        <Register Name="IPT_FMC_IPS_FC_MAPr">
                            <HwField Name="GCI_BCKOF_2_IPS_BFMC_0_FC_MAPf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <!-- } GCI -->

    <!-- Slow Start { -->

    <AppDB Name="FABRIC_CGM_SLOW_START_ENABLE">
        <OneLineDescription>Enable/Disable Slow Start</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="FMC_SHAPER_ID" Type="FMC_SHAPER" Size="2" MaxValue="2" Description="FMC shaper (FMC-HP/FMC_LP/TOTAL_FMC)"/>
            </Key>
            <Result>
                <Field Name="ENABLE" Type="BOOL" Size="1" Description="Enable/Disable slow start"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="ENABLE">
                    <Access>
                        <Memory Name="IPT_SHAPER_FMC_CFGm">
                            <EntryOffset Formula="FMC_SHAPER_ID"/>
                            <HwField Name="SLOW_START_ENf"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_SLOW_START_CONFIG">
        <OneLineDescription>Slow Start configurations</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="FMC_SHAPER_ID" Type="FMC_SHAPER" MaxValue="2" Description="FMC shaper (FMC-HP/FMC_LP/TOTAL_FMC)"/>
                <!-- FIXME Size="1" after Niv will fix the bug -->
                <Field Name="PHASE" Type="UINT" Size="6" MaxValue="1" Description="Rate level phase (slow-start requires 2 intermediate rate-levels)"/>
            </Key>
            <Result>
                <Field Name="TIMER_PERIOD" Type="UINT" Size="5" MaxValue="17" Description="Exponent for the max random time this rate will last"/>
                <Field Name="DELAY" Type="UINT" Size="16" Description="Delay part of shaper's rate configuration"/>
                <Field Name="CALENDAR" Type="UINT" Size="16" Description="Calendar part of shaper's rate configuration"/>
                <Field Name="RATE_PERCENT" Type="UINT" MinValue="0" MaxValue="100" Description="Percent from full shaper rate"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="TIMER_PERIOD">
                    <Access>
                        <Memory Name="IPT_SHAPER_FMC_CFGm">
                            <EntryOffset Formula="FMC_SHAPER_ID"/>
                            <DataOffset Formula="1+PHASE*5"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="DELAY">
                    <Access>
                        <Memory Name="IPT_SHAPER_FMC_CFGm">
                            <EntryOffset Formula="FMC_SHAPER_ID"/>
                            <DataOffset Formula="11+PHASE*16"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="CALENDAR">
                    <Access>
                        <Memory Name="IPT_SHAPER_FMC_CFGm">
                            <EntryOffset Formula="FMC_SHAPER_ID"/>
                            <DataOffset Formula="43+PHASE*16"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="RATE_PERCENT">
                    <Access>
                        <SwState SwType="SW"/>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_ING_TRANSMIT_PER_CORE_SHAPERS_CONFIG">
        <OneLineDescription>Ingress Transmit Shapers configurations. Enable FMC shapers in order to user them for Slow Start</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="ING_TRANSMIT_SHAPER_ID" Type="ING_TRANSMIT_SHAPER" Size="4" MaxValue="14" Description="Ingress Transmit Shaper"/>
            </Key>
            <Result>
                <Field Name="DELAY" Type="UINT" Size="16" Description="Shaper's delay (the shaper rate is determined by calendar and delay) [2Clocks]"/>
                <Field Name="CALENDAR" Type="UINT" Size="16" Description="Shaper's calendar (the shaper rate is determined by calendar and delay) [Bytes]"/>
                <Field Name="MAX_BURST" Type="UINT" Size="19" Description="Max burst size the shaper may accumulate [Bytes]"/>
                <Field Name="DCR_FACTOR" Type="UINT" Size="2" Description="Shaper's decrease factor (in response to flow control from the DTQs)"/>
                <Field Name="ENABLE" Type="BOOL" Size="1" Description="Enables the shaper"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="DELAY">
                    <Access>
                        <Memory Name="IPT_PER_SHAPER_CFGm">
                            <EntryOffset Formula="ING_TRANSMIT_SHAPER_ID"/>
                            <HwField Name="SHAPER_DELAYf"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="CALENDAR">
                    <Access>
                        <Memory Name="IPT_PER_SHAPER_CFGm">
                            <EntryOffset Formula="ING_TRANSMIT_SHAPER_ID"/>
                            <HwField Name="SHAPER_CALf"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="MAX_BURST">
                    <Access>
                        <Memory Name="IPT_PER_SHAPER_CFGm">
                            <EntryOffset Formula="ING_TRANSMIT_SHAPER_ID"/>
                            <HwField Name="SHAPER_MAX_CREDITf"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="DCR_FACTOR">
                    <Access>
                        <Memory Name="IPT_PER_SHAPER_CFGm">
                            <EntryOffset Formula="ING_TRANSMIT_SHAPER_ID"/>
                            <HwField Name="DCR_FACTORf"/>
                        </Memory>
                    </Access>
                </Field>
                <Field Name="ENABLE">
                    <Access>
                        <Memory Name="IPT_PER_SHAPER_CFGm">
                            <EntryOffset Formula="ING_TRANSMIT_SHAPER_ID"/>
                            <HwField Name="SHAPER_ENf"/>
                        </Memory>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <!-- } Slow Start -->

    <!-- LLFC { -->

    <AppDB Name="FABRIC_CGM_LLFC_ING_TRANSMIT_CONTEXT_MAP">
        <OneLineDescription>Enable/Disable LLFC</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <!-- FIXME Size="2" after Niv will fix the bug -->
                <Field Name="ING_TRANSMIT_CONTEXT" Type="UINT" Size="6" MaxValue="2" Description="IPT context"/>
                <Field Name="PIPE" Type="UINT" Size="6" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="ENABLE" Type="BOOL" Size="1" MaxValue="1" Description="Enable LLFC"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="ENABLE">
                    <Access>
                        <Register Name="FDT_FDT_LLFC_MAPPING_COREr">
                            <DataOffset Formula="3*ING_TRANSMIT_CONTEXT+PIPE"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_LLFC_ENABLE">
        <OneLineDescription>Enable/Disable LLFC in FMAC per link</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="LINK" Type="UINT" Size="7" MaxValue="DNX_DATA.fabric.links.max_link_id" Description="Link id"/>
            </Key>
            <Result>
                <Field Name="ENABLE" Type="BOOL" Size="1" Description="Enable LLFC"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="ENABLE">
                    <Access>
                        <Register Name="FMAC_LINK_LEVEL_FLOW_CONTROL_ENABLE_REGISTERr">
                            <BlockIndex Formula="LINK/DNX_DATA.fabric.blocks.nof_links_in_fmac"/>
                            <HwField Name="LNK_LVL_FC_TX_ENf"/>
                            <DataOffset Formula="LINK%DNX_DATA.fabric.blocks.nof_links_in_fmac"/>
                        </Register>
                    </Access>
                    <Access>
                        <Register Name="FMAC_LINK_LEVEL_FLOW_CONTROL_ENABLE_REGISTERr">
                            <BlockIndex Formula="LINK/DNX_DATA.fabric.blocks.nof_links_in_fmac"/>
                            <HwField Name="LNK_LVL_FC_RX_ENf"/>
                            <DataOffset Formula="LINK%DNX_DATA.fabric.blocks.nof_links_in_fmac"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_LLFC_THRESHOLDS">
        <OneLineDescription>Link Level Flow Control Thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="PIPE" Type="UINT" Size="2" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="10" MaxValue="512" Description="The threshold at which to activate LLFC"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDR_LINK_FIFO_CONFIGr">
                            <DataOffset Formula="10*PIPE"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <!-- } LLFC -->

    <!-- Drop { -->

    <AppDB Name="FABRIC_CGM_EGRESS_FIFO_DROP_THRESHOLDS">
        <OneLineDescription>Egress FIFOs drop thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="CAST" Type="TRAFFIC_CAST" Description="Cast of the cells"/>
                <Field Name="FABRIC_PRIORITY" Description="Priority"/>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="12" MaxValue="2048" Description="Threshold to drop cells"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDR_OFM_CLASS_DROP_THr">
                            <DataOffset Formula="48*CAST+12*FABRIC_PRIORITY"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_MESH_MC_FIFO_DROP_THRESHOLDS">
        <OneLineDescription>Mesh-MC FIFOs drop thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="FABRIC_PRIORITY" Description="Priority"/>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="8" Description="Threshold to drop cells with priority"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDA_FDA_EGQ_MESHMC_0_PRIO_DROP_THRr">
                            <DataOffset Formula="8*FABRIC_PRIORITY"/>
                        </Register>
                    </Access>
                    <Access>
                        <Register Name="FDA_FDA_EGQ_MESHMC_1_PRIO_DROP_THRr">
                            <DataOffset Formula="8*FABRIC_PRIORITY"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <!-- } Drop -->

    <AppDB Name="FABRIC_CGM_LINK_FIFO_BASE_ADDRESS">
        <OneLineDescription>Link FIFOs base address</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <!-- Base address for pipe0 fifo is 0, so no HW configuration for it -->
                <Field Name="PIPE" Type="UINT" Size="2" MinValue="1" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="BASE_ADDRESS" Type="UINT" Size="10" MaxValue="512" Description="Base address for pipe's FIFO"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="BASE_ADDRESS">
                    <Access>
                        <Register Name="FDR_LINK_FIFO_PIPE_PARTITIONr">
                            <DataOffset Formula="10*PIPE-10"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_EGRESS_FIFO_BASE_ADDRESS">
        <OneLineDescription>Egress FIFOs base address</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <!-- Base address for pipe0 fifo is 0, so no HW configuration for it -->
                <Field Name="PIPE" Type="UINT" Size="2" MinValue="1" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="BASE_ADDRESS" Type="UINT" Size="12" MaxValue="2048" Description="Base address for pipe's FIFO"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="BASE_ADDRESS">
                    <Access>
                        <Register Name="FDR_OFM_FIFO_PIPE_PARTITIONr">
                            <DataOffset Formula="12*PIPE-12"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_EGRESS_FIFO_FC_THRESHOLDS">
        <OneLineDescription>Egress FIFOs flow control toward link FIFOs thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
                <Field Name="PIPE" Type="UINT" Size="2" MaxValue="2" Description="Pipe id"/>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="12" MaxValue="2048" Description="Flow Control Threshold for pipe's FIFO"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDR_OFM_CORE_FIFO_CONFIGr">
                            <DataOffset Formula="12*PIPE"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_EGRESS_FIFO_FC_AGING_PERIOD">
        <OneLineDescription>Egress FIFOs flow control toward link FIFOs aging period</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="AGING_PERIOD" Type="UINT" Size="32" Description="Flow Control aging period threshold"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="AGING_PERIOD">
                    <Access>
                        <Register Name="FDR_FDR_IN_FC_AGING_PERIODr">
                            <HwField Name="FDR_IN_FC_AGING_PERIODf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_FC_INGRESS_THRESHOLDS">
        <OneLineDescription>Ingress flow control thresholds</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="LINK_FIFO_SIZE_THRESHOLD" Type="UINT" Size="5" MaxValue="12" Description="Output stage FIFO size per link"/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="LINK_FIFO_SIZE_THRESHOLD">
                    <Access>
                        <Register Name="FDT_LINK_READY_THRr">
                            <HwField Name="LINK_READY_THR_IPf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

    <AppDB Name="FABRIC_CGM_EGRESS_DYNAMIC_WFQ">
        <OneLineDescription>Egress dynamic WFQ configurations</OneLineDescription>
        <AccessMethod>HARD_LOGIC</AccessMethod>
        <Maturity Level="HIGH"/>
        <AppDbInterface Type="DIRECT">
            <Key>
            </Key>
            <Result>
                <Field Name="THRESHOLD" Type="UINT" Size="8" Description="Threshold for the egress dynamic WFQ. The threshold cause the dynamic WFQ to use the 'congested' configurations."/>
            </Result>
            <TableLabels>FABRIC</TableLabels>
        </AppDbInterface>
        <AppToPhyDbMapping>
            <CoreMode Mode="SBC"/>
            <FieldMapping>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDA_FDA_EGQ_IPT_ALM_FULL_THr">
                            <HwField Name="EGQ_N_IPT_0_ALM_FULL_THf"/>
                        </Register>
                    </Access>
                </Field>
                <Field Name="THRESHOLD">
                    <Access>
                        <Register Name="FDA_FDA_EGQ_IPT_ALM_FULL_THr">
                            <HwField Name="EGQ_N_IPT_1_ALM_FULL_THf"/>
                        </Register>
                    </Access>
                </Field>
            </FieldMapping>
        </AppToPhyDbMapping>
    </AppDB>

</AppDbCatalog>

