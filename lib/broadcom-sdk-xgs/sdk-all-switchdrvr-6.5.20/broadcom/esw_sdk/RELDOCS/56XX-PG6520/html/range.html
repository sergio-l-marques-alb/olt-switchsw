<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: Range Checker Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.20</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Range Checker Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The BCM Range APIs allow application developers to manage the Range Checker resources in StrataXGS devices.</p>
<h1><a class="anchor" id="Range_Checker_Overview"></a>
Range Checker</h1>
<p>The ICAP ContentAware engine contains a range checker, allowing software to easily check if a certain parameter falls within a range of values. The number of range checker entries available may vary across devices. Each range checker can be used to check for one of the following types:</p>
<ul>
<li>L4 source port: source port field of TCP/UDP header.</li>
<li>L4 destination port: destination port field of TCP/UDP header.</li>
<li>VLAN ID: 12 bit internal OVID. The OVID value is affected by VLAN translation or other VLAN assignment mechanisms.</li>
<li>L3 Packet Length: Length in bytes of L3 payload plus L3 header. For IPv4 packet it is TL field in IPv4 header. For IPv6 packet it is Payload Length field in IPv6 header plus length of IPv6 header (40).</li>
<li>UDF1 Chunk 2(bits 47:32 of UDF1) : User defined field. (Supported in only Tomahawk)</li>
<li>Virtual Format Indicator values</li>
</ul>
<p>In addition to support UDF1 Chunk 2, Tomahawk also supports capability to apply mask before doing a range check. This mask capability is as of now applicable to only UDF1 Chunk2. The range check comparison is performed on the entire 16 bits of masked UDF against the range. Each ranger checker entry will contain an upper bound and lower bound values. The results of the ranger checkers will be sent as a bitmap to the Protocol-Aware Selector engine.</p>
<p>Note: Switch control to use Range Module APIs</p>
<p>bcmSwitchRangeCheckersAPIType - Setting this switch control to 0 allows to use only field APIs (bcm_field_range_XXX) and setting it to 1 allows to use only new range module APIs (bcm_range_XXX). Default value will be set to 0. Refer Field section for field APIs on range checkers.</p>
<p>If Field range APIs are in use, then we cannot set the switch control to 1 and vice versa.</p>
<h1><a class="anchor" id="range_data_structures"></a>
Range Data Structures</h1>
<h2>Range Config Structure.</h2>
<p><a class="anchor" id="bcm_range_config_t"></a></p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__range__config__s.html">bcm_range_config_s</a> {</div><div class="line">    <a class="code" href="group__range.html#ga7087ca84b0c6f06e1fe53de677a98fb8">bcm_range_t</a> <a class="code" href="structbcm__range__config__s.html#a2ee756dc45958064e4f721a877b91dd9">rid</a>;        <span class="comment">/* Range Check Id */</span></div><div class="line">    <a class="code" href="group__range.html#gaad3b525abefa3d24929f19579751e10c">bcm_range_type_t</a> <a class="code" href="structbcm__range__config__s.html#a9766454d6f1dc5c14995d8b6e5ca6db5">rtype</a>; <span class="comment">/* Range Check Type(bcmRangeTypeXXX) */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__range__config__s.html#ae1bbeeef846463d078bb600bce208f61">min</a>;             <span class="comment">/* Lower limit of Range inclusive. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__range__config__s.html#a4c6407e464a7d56ada1480c02291074d">max</a>;             <span class="comment">/* Upper limit of Range inclusive. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__range__config__s.html#af2f806089451be6269e0b22880d71e6e">offset</a>;           <span class="comment">/* Offset (in bits) for mask to apply before range</span></div><div class="line"><span class="comment">                               check comparison. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="structbcm__range__config__s.html#a182a30b60624254d3f5c416c4b45c19c">width</a>;            <span class="comment">/* Width(in bits) from offset specified for mask to</span></div><div class="line"><span class="comment">                               apply before range check comparison. */</span></div><div class="line">    <a class="code" href="group__types.html#gab368d00814d904eb59d12ec92f279cd2">bcm_udf_id_t</a> <a class="code" href="structbcm__range__config__s.html#ae8be65136e6a043c3d3c68da049bdf80">udf_id</a>;    <span class="comment">/* UDF id created using bcm_udf_create API. */</span></div><div class="line">    <a class="code" href="group__types.html#ga6e9f69e8948f73d9da295756c2ce581d">bcm_pbmp_t</a> <a class="code" href="structbcm__range__config__s.html#a92fd9cf429d4027bbaa6ae6e0908fb7d">ports</a>;       <span class="comment">/* Port bitmap to decide XGS pipe */</span></div><div class="line">} <a class="code" href="group__range.html#ga52ca37506fd1087b98b6a03e8e9a65be">bcm_range_config_t</a>;</div></div><!-- fragment --><h2>Range Group Config Structure.</h2>
<p><a class="anchor" id="bcm_range_group_config_t"></a></p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__range__group__config__s.html">bcm_range_group_config_s</a> {</div><div class="line">    <a class="code" href="sal_2types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="structbcm__range__group__config__s.html#ae15f0808741c35cb9a8d231105d8beea">flags</a>;                   <span class="comment">/* To hold any specific flags. */</span></div><div class="line">    <a class="code" href="group__types.html#ga6e9f69e8948f73d9da295756c2ce581d">bcm_pbmp_t</a> <a class="code" href="structbcm__range__group__config__s.html#a92fd9cf429d4027bbaa6ae6e0908fb7d">ports</a>;               <span class="comment">/* Port bitmap for particular pipe</span></div><div class="line"><span class="comment">                                       instance. */</span></div><div class="line">    <a class="code" href="structbcm__range__id__bmp__s.html">bcm_range_id_bmp_t</a> <a class="code" href="structbcm__range__group__config__s.html#a35a0dbe83bc79adcf48e8de360ade3c3">range_bmp</a>;   <span class="comment">/* Bitmap to hold Range IDs. */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="structbcm__range__group__config__s.html#a83f52e97475c3cb0cfcb291b16bd6ed7">range_group_id</a>;          <span class="comment">/* Range Group Identifier */</span></div><div class="line">} <a class="code" href="group__range.html#gad8f19859f06d6130e2186e0dbbcbb99f">bcm_range_group_config_t</a>;</div></div><!-- fragment --><h2>Range ID Bitmap Structure.</h2>
<p><a class="anchor" id="bcm_range_id_bmp_t"></a></p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__range__id__bmp__s.html">bcm_range_id_bmp_s</a> {</div><div class="line">    SHR_BITDCL <a class="code" href="structbcm__range__id__bmp__s.html#a9c13603ccf4bf305b2ab5bf7f872f991">w</a>[_SHR_BITDCLSIZE(BCM_RANGE_ID_MAX)];</div><div class="line">} <a class="code" href="group__range.html#ga2a44f1775311704534d083048780eaa2">bcm_range_id_bmp_t</a>;</div></div><!-- fragment --><p><a class="anchor" id="bcmRangeTypeXXX"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>BCM Range Checker Type</caption>
<tr>
<th>bcmRangeTypeXXX </th><th>Description  </th></tr>
<tr>
<td>bcmRangeTypeL4SrcPort </td><td>Check L4 Source port range.  </td></tr>
<tr>
<td>bcmRangeTypeL4DstPort </td><td>Check L4 Destination port range.  </td></tr>
<tr>
<td>bcmRangeTypeOuterVlan </td><td>Check Outer Vlan range.  </td></tr>
<tr>
<td>bcmRangeTypePacketLength </td><td>Check IP payload length range.  </td></tr>
<tr>
<td>bcmRangeTypeUdf </td><td>Check Udf range.  </td></tr>
<tr>
<td>bcmRangeTypeCount </td><td>Always last. Not a usable value.  </td></tr>
</table>
<p><a class="anchor" id="bcmRangeOperModeXXX"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>BCM Range Module Operational Mode</caption>
<tr>
<th>bcmRangeOperModeXXX </th><th>Description  </th></tr>
<tr>
<td>bcmRangeOperModeGlobal </td><td>Range Checkers Operate in Global Mode Value. i.e. for a given packet on any port from any pipe will have the same range check Result.  </td></tr>
<tr>
<td>bcmRangeOperModePipeLocal </td><td>Range Checkers Operate in Per Pipe Mode Value. i.e. for a given packet on ports from different pipes can have the different range check Result.  </td></tr>
<tr>
<td>bcmRangeOperModeCount </td><td>Always last. Not a usable value.  </td></tr>
</table>
<p><a class="anchor" id="range_create_options"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>Flags to bcm_range_create</caption>
<tr>
<th>flags </th><th>Description  </th></tr>
<tr>
<td>BCM_RANGE_CREATE_WITH_ID </td><td>Flag to the API to indicate the range is to be created with the user specified Range Id.  </td></tr>
</table>
<h2>Range ID Bitmap</h2>
<p>The following macros are used to initialize a Range ID bitmap, remove or test individual range ID bits in the Range ID bitmap structure.</p>
<ul>
<li>BCM_RANGE_ID_BMP_ADD(qset, q) - Set Range ID in Range ID bitmap.</li>
<li>BCM_RANGE_ID_BMP_REMOVE(qset, q) - Unset Range ID in Range ID bitmap.</li>
<li>BCM_RANGE_ID_BMP_TEST(qset, q) - Test if Range ID is set in Range ID bitmap.</li>
</ul>
<h1><a class="anchor" id="range_apis"></a>
APIs to manage the Range checker resources</h1>
<p>This section contains the APIs to configure range checkers.</p>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__range.html#ga8540d02a9f549f34cfd41e7c0318b07d" title="To initialize all members in bcm_range_config_t structure to default values.">bcm_range_config_t_init(bcm_range_config_t* range_cfg)</a>  </td><td>To initialize all members in bcm_range_config_t structure to default values.   </td></tr>
<tr>
<td><a class="el" href="group__range.html#gaeb795db019b1b57b1b942fde06654d03" title="Create a Range checker.">bcm_range_create(int unit, int flags, bcm_range_config_t* range_cfg)</a>  </td><td>Create a Range checker   </td></tr>
<tr>
<td><a class="el" href="group__range.html#ga95e33508266cebcf3c2c089330561fdd" title="Fetches the Range object created in the system.">bcm_range_get(int unit, bcm_range_config_t* range_cfg)</a>  </td><td>Fetches the Range object created in the system   </td></tr>
<tr>
<td><a class="el" href="group__range.html#ga374595b5134b23f19888bef9a2156959" title="Destroy the range object.">bcm_range_destroy(int unit, bcm_range_t rid)</a>  </td><td>Destroy the range object   </td></tr>
<tr>
<td><a class="el" href="group__range.html#gaea118d713b1c1573afb9069790d556e8" title="Set Operational mode for Range Module.">bcm_range_oper_mode_set(int unit, bcm_range_oper_mode_t oper_mode)</a>  </td><td>Set Operational mode for Range Module   </td></tr>
<tr>
<td><a class="el" href="group__range.html#gaf7f7af7734a144cd7956a6be0c95e5ac" title="Get Operational mode of Range module.">bcm_range_oper_mode_get(int unit, bcm_range_oper_mode_t* oper_mode)</a>  </td><td>Get Operational mode of Range module   </td></tr>
<tr>
<td><a class="el" href="group__range.html#gaeeac600999f54505ef9f584448c1bab5" title="Traverse all the valid range id&#39;s in the system, calling a specified callback function for each one.">bcm_range_traverse(int unit, bcm_range_traverse_cb callback, void* user_data)</a>  </td><td>Traverse all the valid range id's in the system, calling a specified callback function for each one   </td></tr>
<tr>
<td><a class="el" href="group__range.html#gae5da19ec1f1341db433567752b059d77" title="Create a Range checker Group.">bcm_range_group_create(int unit, bcm_range_group_config_t* range_group_config)</a>  </td><td>Create a Range checker Group   </td></tr>
<tr>
<td><a class="el" href="group__range.html#ga8748dcbca8b7049aabd06290b5468e9a" title="Get/Fetch a Range checker Group.">bcm_range_group_get(int unit, bcm_range_group_config_t* range_group_config)</a>  </td><td>Get/Fetch a Range checker Group   </td></tr>
<tr>
<td><a class="el" href="group__range.html#ga627babfaab8678a38c6729a164ebb7b7" title="Delete a Range checker Group.">bcm_range_group_delete(int unit, bcm_range_group_config_t* range_group_config)</a>  </td><td>Delete a Range checker Group   </td></tr>
<tr>
<td><a class="el" href="group__range.html#ga19c51188b019c8dfdb2aa5f20659e1f5" title="Update a Range checker Group&#39;s configuration.">bcm_range_group_update(int unit, bcm_range_group_config_t* range_group_config)</a>  </td><td>Update a Range checker Group's configuration.   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2020 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
