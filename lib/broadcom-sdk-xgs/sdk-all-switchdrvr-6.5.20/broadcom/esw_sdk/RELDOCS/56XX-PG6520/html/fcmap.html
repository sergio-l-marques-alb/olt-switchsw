<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: FCMAP API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.20</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FCMAP API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Intro2"></a>
Introduction to Broadcom Fiber Channel and Mapper (FCMAP) API</h1>
<p>The Broadcom Fiber Channel and Fiber Channel Mapper (FCMAP) API consists of set of APIs which can used to configure FC or FCoE functionality for Broadcom devices that support Fiber Channel and FCoE features. The API set referred as FCMAP APIs. All supported API calls are documented in this manual. Functions not defined in this document are NOT API calls and subject to change or removal at any time in any release. Functions defined in this document are intended, as much as reasonably possible, to be carried forward and supported on all platforms.</p>
<p>All Fiber Channel and FC-Mapper API identifiers have prefix bcm_fcmap_.</p>
<p>The API exports silicon features in a device independent manner as much as possible, but does not implement in software those functions that the underlying devices do not support.</p>
<p>Fiber Channel and FC Mapper APIs can be classified in the following categories:</p>
<ul>
<li>Port API</li>
<li>FC Mapper API</li>
<li>Statistics</li>
<li>Event Handling API</li>
</ul>
<p>Port APIs controls the Fiber Channel and FCoE features at the port level for example Port API will control whether or not the FC feature is enabled or not enabled for the port, so on. The FC Mapper provides VLAN to VSAN mapping for the FCoE and FC frames.</p>
<p>Most of the FCMAP API take bcm_port_t parameter which is used as port identifier.</p>
<p>Fiber Channel Statistics API provide access to the FC LESB for the specified port.</p>
<h2>FCMAP basic types</h2>
<p>The FCMAP API layer defines some fundamental data types. The data types used by FCMAP software module are defined in <a class="el" href="fcmap.html#XREF_FCMAP_DATA_TYPES_v">XREF_FCMAP_DATA_TYPES_v</a> .</p>
<p><a class="anchor" id="XREF_FCMAP_DATA_TYPES_v"></a> </p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>Common FCMAP data types</caption>
<tr>
<th>fcmap data type </th><th>Description  </th></tr>
<tr>
<td>bcm_fcmap_core_t </td><td>Broadcom FCMAP core identifier.  </td></tr>
<tr>
<td>bcm_fcmap_port_speed_t </td><td>FCMAP port speed identifier.  </td></tr>
<tr>
<td>bcm_fcmap_port_config_t </td><td>Structure specifies the attributes of FC/FCoE port.  </td></tr>
<tr>
<td>bcm_fcmap_vlan_vsan_map_t </td><td>Structure specifies the VLAN to VSAN mapping of FC/FCoE port.  </td></tr>
<tr>
<td>bcm_fcmap_stat_t </td><td>FCMAP statistics identifier.  </td></tr>
<tr>
<td>bcm_fcmap_event_t </td><td>Enum for FC/FCoE events notified by the FCMAP device to user application  </td></tr>
</table>
<h1><a class="anchor" id="Port2"></a>
FCMAP Port API</h1>
<p>FCMAP Port API provide the functions to initialize the port and control various features and attributes at the Port level.</p>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gab39cb1e05cb83abbcffd16906e075ecf" title="Set speed attribute of the FC port.">bcm_fcmap_port_speed_set(int unit, bcm_port_t port, bcm_fcmap_port_speed_t speed)</a>  </td><td>Set speed attribute of the FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga195d9a7745605376ef513a8917b8c757" title="Enable the FC port.">bcm_fcmap_port_enable(int unit, bcm_port_t port)</a>  </td><td>Enable the FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga543c200c7bc30adbb399397b568eed03" title="Perform LINK down protocol on FCMAP Port, if the port is configured to FC port.">bcm_fcmap_port_shutdown(int unit, bcm_port_t port)</a>  </td><td>Perform LINK down protocol on FCMAP Port, if the port is configured to FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gaab0e920c7d24e0dbe117de816e169dc9" title="Perform LINK Reset protocol on FCMAP Port, if the port is configured to FC port.">bcm_fcmap_port_link_reset(int unit, bcm_port_t port)</a>  </td><td>Perform LINK Reset protocol on FCMAP Port, if the port is configured to FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gad60e95b4a70cb31d8c4fd24ff4b95346" title="bcm_fcmap_port_traverse iterates over all the FCMAP Ports and calls user-provided callback function f...">bcm_fcmap_port_traverse(int unit, bcm_fcmap_port_traverse_cb callbk, void* user_data)</a>  </td><td>bcm_fcmap_port_traverse iterates over all the FCMAP Ports and calls user-provided callback function for each port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gaece67fcb470b2b8f298c43c88d0f0af6" title="Set all FCMAP configuration for the specified port.">bcm_fcmap_port_config_set(int unit, bcm_port_t port, bcm_fcmap_port_config_t* cfg)</a>  </td><td>Set all FCMAP configuration for the specified port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga0b5a7b449b994db79e223ae541950000" title="Set FCMAP configuration for the specified port. The configured port attributes are specified in the c...">bcm_fcmap_port_config_selective_set(int unit, bcm_port_t port, bcm_fcmap_port_config_t* cfg)</a>  </td><td>Set FCMAP configuration for the specified port. The configured port attributes are specified in the cfg-&gt;action_mask and cfg-&gt;action_mask2.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gac4e3a3afb08446a5f2bde3d2e8903cd8" title="Returns all FCMAP configuration for the specified port.">bcm_fcmap_port_config_get(int unit, bcm_port_t port, bcm_fcmap_port_config_t* cfg)</a>  </td><td>Returns all FCMAP configuration for the specified port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga6ad093464e670d735fa03baa90c0e555" title="Returns the FCMAP configuration for the specified port. The retrieved port attributes are specified i...">bcm_fcmap_port_config_selective_get(int unit, bcm_port_t port, bcm_fcmap_port_config_t* cfg)</a>  </td><td>Returns the FCMAP configuration for the specified port. The retrieved port attributes are specified in the cfg-&gt;action_mask and cfg-&gt;action_mask2.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga19c40856307ec042372ad40269760e0d" title="Sets the discrete speed values for auto-neg or single forced speed for the specified FC port.">bcm_fcmap_port_ability_advert_set(int unit, bcm_port_t port, bcm_fcmap_port_ability_t* ability_mask)</a>  </td><td>Sets the discrete speed values for auto-neg or single forced speed for the specified FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga98e6b026d6ca5d10e5cf3c225896a889" title="Returns the supported port speeds for the specified FC port.">bcm_fcmap_port_ability_advert_get(int unit, bcm_port_t port, bcm_fcmap_port_ability_t* ability_mask)</a>  </td><td>Returns the supported port speeds for the specified FC port.   </td></tr>
</table>
<h1><a class="anchor" id="Mapper"></a>
FC Mapper API</h1>
<p>The FC Mapper provides VLAN to VSAN mapping for the FCoE and FC frames.</p>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gaecac7c5290f1d1e19dac78d906ed3b6b" title="Add the VLAN to VSAN mapping on the specified port.">bcm_fcmap_vlan_map_add(int unit, bcm_port_t port, bcm_fcmap_vlan_vsan_map_t* vlan)</a>  </td><td>Add the VLAN to VSAN mapping on the specified port   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gaea1fe4a10d83333437ffb4089ed0e73e" title="Get the VLAN to VSAN mapping on the specified port.">bcm_fcmap_vlan_map_get(int unit, bcm_port_t port, bcm_fcmap_vlan_vsan_map_t* vlan)</a>  </td><td>Get the VLAN to VSAN mapping on the specified port   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga1b41602271221a44d1d83abf2a7aec99" title="Delete the VLAN to VSAN mapping on the specified port.">bcm_fcmap_vlan_map_delete(int unit, bcm_port_t port, bcm_fcmap_vlan_vsan_map_t* vlan)</a>  </td><td>Delete the VLAN to VSAN mapping on the specified port   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gab75b26103974c6a755080d023ae8534b" title="Returns the linkfault trigger code and reason code from the specified FC port.">bcm_fcmap_linkfault_trigger_rc_get(int unit, bcm_port_t port, bcm_fcmap_lf_tr_t* trigger, bcm_fcmap_lf_rc_t* rc)</a>  </td><td>Returns the linkfault trigger code and reason code from the specified FC port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga16791a0b1ccdc709a96163e424f5c82b" title="Returns the current diagnostic code from the specified FC port.">bcm_fcmap_diag_get(int unit, bcm_port_t port, bcm_fcmap_diag_code_t* diag)</a>  </td><td>Returns the current diagnostic code from the specified FC port.   </td></tr>
</table>
<h1><a class="anchor" id="statistics2"></a>
Statistics and MIB API</h1>
<p>The Broadcom FCMAP devices support the LESB and RFC4044 MIB. A summary and description of various supported statistics is defined in <a class="el" href="fcmap.html#XREF_FCMAP_STATS_v">XREF_FCMAP_STATS_v</a> .</p>
<p><a class="anchor" id="XREF_FCMAP_STATS_v"></a></p>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__fcmap.html#gadb29565ce4efb293cb5bfc7ffcc1e7cd" title="Clear all the statistics for the specified port.">bcm_fcmap_stat_clear(int unit, bcm_port_t port)</a>  </td><td>Clear all the statistics for the specified port.   </td></tr>
<tr>
<td><a class="el" href="group__fcmap.html#ga90532179ffc759ad79a91bf986c2de4a" title="Return the statistics for the specified statistic type.">bcm_fcmap_stat_get(int unit, bcm_port_t port, bcm_fcmap_stat_t stat, uint64* val)</a>  </td><td>Return the statistics for the specified statistic type.   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2020 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
