<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK API Guide: Layer 2 Multicast Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css"/>
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK API Guide
   &#160;<span id="projectnumber">Version 6.5.20</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Layer 2 Multicast Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The BCM API provides L2 multicast management functions. These management functions include creation, deletion, query, and update of entries in the L2 Multicast Table. The search key is the Multicast MAC address + the VLAN ID (60 bits).</p>
<p>The bcm_mcast_* APIs should not be used if the bcm_multicast_* APIs are employed. The multicast module supersedes the previous mcast modules.</p>
<p>L2 Multicast type <a class="el" href="mcast.html#bcm_mcast_addr_t">bcm_mcast_addr_t</a> is essential to the use of multicast management functions. It is defined as follows:</p>
<p><a class="anchor" id="bcm_mcast_addr_t"></a></p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbcm__mcast__addr__s.html">bcm_mcast_addr_s</a> {</div><div class="line">    <a class="code" href="group__types.html#ga4ccf23ca53e7e7e9a7be38b950aa7943">bcm_mac_t</a>           <a class="code" href="structbcm__mcast__addr__s.html#a741f0f5b72838cbc381590a7b4651d67">mac</a>;        <span class="comment">/* 802.3 MAC address */</span></div><div class="line">    <a class="code" href="group__types.html#ga206cad73150c7e799b9a1cd4ebe13465">bcm_vlan_t</a>          <a class="code" href="structbcm__mcast__addr__s.html#a8119805ca8fb8991d4bbbf72753d4613">vid</a>;        <span class="comment">/* VLAN identifier */</span></div><div class="line">    <a class="code" href="group__types.html#gaa0652dab31a18be549ee480c1af58f3a">bcm_cos_t</a>           <a class="code" href="structbcm__mcast__addr__s.html#a8c61626756b992dec0bfb3e761d60a91">cos_dst</a>;    <span class="comment">/* CoS based on dst addr */</span></div><div class="line">    <a class="code" href="group__types.html#ga6e9f69e8948f73d9da295756c2ce581d">bcm_pbmp_t</a>          <a class="code" href="structbcm__mcast__addr__s.html#a2d0320a04a4ec0284ade6a3600544b7f">pbmp</a>;       <span class="comment">/* Port bitmap */</span></div><div class="line">    <a class="code" href="group__types.html#ga6e9f69e8948f73d9da295756c2ce581d">bcm_pbmp_t</a>          <a class="code" href="structbcm__mcast__addr__s.html#a218c726b7abb278ada6ac422f55f540f">ubmp</a>;       <span class="comment">/* Untag port bitmap */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>              <a class="code" href="structbcm__mcast__addr__s.html#a32af95251b6634753e9ed3230e292cd3">l2mc_index</a>; <span class="comment">/* XGS: l2mc index */</span></div><div class="line">    <a class="code" href="sal_2types_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>              <a class="code" href="structbcm__mcast__addr__s.html#a81a27ce50e78368b0d0de1e8767fd32d">flags</a>;      <span class="comment">/* See BCM_MCAST_XXX flag definitions. */</span></div><div class="line">    <a class="code" href="group__types.html#ga468a32fdef90b6bf16f73f6be3c7b2f9">bcm_fabric_distribution_t</a> <a class="code" href="structbcm__mcast__addr__s.html#a526f3a9bdfce6d4a5605f0c9df5a9504">distribution_class</a>; <span class="comment">/* Fabric Distribution Class. */</span></div><div class="line">} <a class="code" href="group__mcast.html#ga364f6737d20cf438e360f2b97fc49012">bcm_mcast_addr_t</a>;</div></div><!-- fragment --><p><a class="anchor" id="mcastcodes"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>Multicast Join/Leave Return Codes</caption>
<tr>
<th>Name </th><th>Description  </th></tr>
<tr>
<td>BCM_MCAST_JOIN_ADDED </td><td>Add a new entry as a result of join  </td></tr>
<tr>
<td>BCM_MCAST_JOIN_UPDATED </td><td>Updated an entry as a result of join  </td></tr>
<tr>
<td>BCM_MCAST_LEAVE_DELETED </td><td>Deleted an entry as result of leave  </td></tr>
<tr>
<td>BCM_MCAST_LEAVE_UPDATED </td><td>Updated an entry as result of leave  </td></tr>
<tr>
<td>BCM_MCAST_LEAVE_NOTFOUND </td><td>requested entry to update not found  </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>BCM Multicast Flags</caption>
<tr>
<th>Name </th><th>Purpose  </th></tr>
<tr>
<td>BCM_MCAST_USE_FABRIC_DISTRIBUTION </td><td>Use the specified fabric distribution class  </td></tr>
</table>
<table class="doxtable">
<tr>
<th>API </th><th>Brief  </th></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga375e9faf19888a6b1a8ca85c4b9a5549" title="Initialize a bcm_mcast_addr_t data type.">bcm_mcast_addr_t_init(bcm_mcast_addr_t* mcaddr, bcm_mac_t mac, bcm_vlan_t vid)</a>  </td><td>Initialize a bcm_mcast_addr_t data type.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga4fb7a4fc8494167bc016dcdb0617295b" title="Initialize the L2 multicast module.">bcm_mcast_init(int unit)</a>  </td><td>Initialize the L2 multicast module.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gaae6327aecaf24c9c0cadab9536aadaa4" title="Add/Remove ports to/from an existing entry in the multicast table.">bcm_mcast_port_add(int unit, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Add/Remove ports to/from an existing entry in the multicast table.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga82509d8eaf7a5db512d044ceb0ccb87a" title="Add/Remove ports to/from an existing entry in the multicast table.">bcm_mcast_port_remove(int unit, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Add/Remove ports to/from an existing entry in the multicast table.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga57592c6ead784194f2dd5dfe0e447b99" title="Add/Update an entry in the multicast table with l2mc index provided. Remove an entry in the multicast...">bcm_mcast_addr_add_w_l2mcindex(int unit, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Add/Update an entry in the multicast table with l2mc index provided. Remove an entry in the multicast table, l2mc index not needed.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga4af3e3dabc777e84d24c5ae11504132b" title="Add/Update an entry in the multicast table with l2mc index provided. Remove an entry in the multicast...">bcm_mcast_addr_remove_w_l2mcindex(int unit, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Add/Update an entry in the multicast table with l2mc index provided. Remove an entry in the multicast table, l2mc index not needed.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga5833fd624ea3f5acea5ce980dc4453bb" title="Add/Remove an entry in the multicast table.">bcm_mcast_addr_add(int unit, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Add/Remove an entry in the multicast table.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gab403e5fd67225faa38027158f83ebf2c" title="Add/Remove an entry in the multicast table.">bcm_mcast_addr_remove(int unit, bcm_mac_t mac, bcm_vlan_t vid)</a>  </td><td>Add/Remove an entry in the multicast table.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga9572d235bc1a735fa01af28c0a19098f" title="Get untagged and tagged membership port bit maps for a Multicast group.">bcm_mcast_port_get(int unit, bcm_mac_t mac, bcm_vlan_t vid, bcm_mcast_addr_t* mcaddr)</a>  </td><td>Get untagged and tagged membership port bit maps for a Multicast group.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gab37ac1a31bcd39259b00763e25e336e6" title="Add a given port to the membership of a given multicast group.">bcm_mcast_join(int unit, bcm_mac_t mcMacAddr, bcm_vlan_t vlanId, int srcPort, bcm_mcast_addr_t* mcaddr, bcm_pbmp_t* allRouterBmp)</a>  </td><td>Add a given port to the membership of a given multicast group.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga1bd8d574789954ee166c79612a167a83" title="Remove a given port from the membership of a given multicast group.">bcm_mcast_leave(int unit, bcm_mac_t mcMacAddr, bcm_vlan_t vlanId, int srcPort)</a>  </td><td>Remove a given port from the membership of a given multicast group.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gabb0c2c2e73649a1454e34036ac28dcee" title="Provides the maximum multicast index that this fabric can handle.">bcm_mcast_bitmap_max_get(int unit, int* max_index)</a>  </td><td>Provides the maximum multicast index that this fabric can handle.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gaeb04edb395382956c1c4603189416a05" title="Set/Get/Delete the L2 multicast forwarding port bitmap.">bcm_mcast_bitmap_set(int unit, int mc_idx, bcm_port_t in_port, bcm_pbmp_t pbmp)</a>  </td><td>Set/Get/Delete the L2 multicast forwarding port bitmap.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#gaf2f8aedd29cedd81fbe987530ed86318" title="Set/Get/Delete the L2 multicast forwarding port bitmap.">bcm_mcast_bitmap_get(int unit, int mc_idx, bcm_port_t in_port, bcm_pbmp_t* pbmp)</a>  </td><td>Set/Get/Delete the L2 multicast forwarding port bitmap.   </td></tr>
<tr>
<td><a class="el" href="group__mcast.html#ga485f69b0c019af54203d4e3d48bfce5b" title="Set/Get/Delete the L2 multicast forwarding port bitmap.">bcm_mcast_bitmap_del(int unit, int mc_idx, bcm_port_t in_port, bcm_pbmp_t pbmp)</a>  </td><td>Set/Get/Delete the L2 multicast forwarding port bitmap.   </td></tr>
</table>
<p><a class="anchor" id="MCAST_MACROS"></a></p><a class="anchor" id=""></a>
<table class="doxtable">
<caption>MCAST Related Macros</caption>
<tr>
<th>MCAST Macros  </th></tr>
<tr>
<td>BCM_MCAST_GPORT_IS_BITMAP_ID  </td></tr>
<tr>
<td>BCM_MCAST_GPORT_IS_GROUP_ID  </td></tr>
<tr>
<td>BCM_MCAST_GPORT_GROUP_ID_SET  </td></tr>
<tr>
<td>BCM_MCAST_GPORT_BITMAP_ID_SET  </td></tr>
<tr>
<td>BCM_MCAST_GPORT_GROUP_ID_GET  </td></tr>
<tr>
<td>BCM_MCAST_GPORT_BITMAP_ID_GET  </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="footer-brcm-wrapper">
<table class="footer-brcm">
	<tbody><tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align="left"></td>
		<td class="footer-brcm"><small><b>Proprietary and Confidential &copy; 2020 Broadcom</b></small>
			<div class="footer-brcm">Broadcom Incorporated reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design.
Information furnished by Broadcom Incorporated is believed to be accurate and reliable. However, Broadcom Incorporated does not assume any liability arising
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license
under its patent rights nor the rights of others.
			</div>
		</td>
	</tr>
</tbody></table>
</div>
</body>
</html>
