/** \file dnx/swstate/auto_generated/types/dnx_field_kbp_types.h
 *
 * sw state types (structs/enums/typedefs)
 *
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 */
/*
 * $Copyright: (c) 2021 Broadcom.
 * Broadcom Proprietary and Confidential. All rights reserved.$
 */

#ifndef __DNX_FIELD_KBP_TYPES_H__
#define __DNX_FIELD_KBP_TYPES_H__

#ifdef BCM_DNX_SUPPORT
#if defined(INCLUDE_KBP)
#include <soc/dnxc/swstate/dnxc_sw_state_h_includes.h>
#include <soc/dnx/swstate/auto_generated/types/dnx_field_types.h>
/*
 * MACROs
 */

/**
 * The number of qualifiers that can be packed together into a segemnt for external TCAM if DNX_FIELD_GROUP_ADD_FLAG_PACK_QUALIFIERS flag is used.
 */
#define DNX_FIELD_KBP_NOF_QUALS_PER_SEGMENT SAL_UINT8_NOF_BITS

/**
 * The number of qualifiers that can be packed together into a segemnt for external TCAM if DNX_FIELD_GROUP_ADD_FLAG_PACK_QUALIFIERS flag is used.
 */
#define DNX_FIELD_KBP_PACKED_QUAL_INDEX_INVALID ((uint8)(-1))

/**
 * Number of segments per master key for external TCAM. See DNX_KBP_MAX_NOF_SEGMENTS_PER_MASTER_KEY.
 */
#define DNX_FIELD_KBP_MAX_NOF_SEGMENTS_PER_MASTER_KEY (45)

/*
 * STRUCTs
 */

/**
 * Holds the information that is required for segment configuration. stored in SWSTATE for a external FG
 */
typedef struct {
    /**
     * This is the index of the qualifier attach_info that is stored in qual_attach_info in dnx_field_attach_context_info_t
     * The index is stored for a postponed hw configuration of the ffc's for the external TCAM group.
     * The index represents the information required for the segment configuration (in the Master Key)
     * Note: this qual_idx is also valid for receiving the qual_type from the key_template. The other
     * information in the key_template is irrelevant.
     * An array for all packed qualifers packed into the segment if we enable packing of qualifiers in the field group.
     */
    uint8 qual_idx[DNX_FIELD_KBP_NOF_QUALS_PER_SEGMENT];
    /**
     * This is the id of the field_group for a given qualifier.
     * Used for retrieving the qual_attach_info.
     */
    dnx_field_group_t fg_id;
} dnx_field_kbp_segment_info_t;

/**
 * Holds the information about the master key. That info is required for external TCAM configuration.
 * Stored in SWSTATE for KBP.
 */
typedef struct {
    /**
     * This is the info that is used to receive the information for a given segment
     * in the Master Key. The segment information is per Opcode.
     */
    dnx_field_kbp_segment_info_t segment_info[DNX_FIELD_KBP_MAX_NOF_SEGMENTS_PER_MASTER_KEY];
    /**
     * Indicates the number of segments (including zero padding) used by FWD, before new segments are added by ACL.
     */
    uint8 nof_fwd_segments;
} dnx_field_kbp_master_key_info_t;

/**
 * Holds the information that is required for KBP ACL configuration. stored in SWSTATE for an external TCAM FG
 */
typedef struct {
    /**
     * This is the info that is used to receive the information for
     * the Master Key. The information is per Opcode.
     */
    dnx_field_kbp_master_key_info_t master_key_info;
    /**
     * Holds the information about the validity of the opcode. The information is per Opcode.
     */
    uint8 is_valid;
} dnx_field_kbp_opcode_info_t;

/**
 * Hold the needed info to manage KBP
 */
typedef struct {
    /**
     * Hold the information about the external TCAM per apptype.
     */
    dnx_field_kbp_opcode_info_t* opcode_info;
} dnx_field_kbp_sw_t;

#endif /* defined(INCLUDE_KBP)*/ 
#endif /* BCM_DNX_SUPPORT*/ 

#endif /* __DNX_FIELD_KBP_TYPES_H__ */
