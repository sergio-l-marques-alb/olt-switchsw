/** \file crps_types.h
 *
 * sw state types (structs/enums/typedefs)
 *
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 */
/*
 * $Copyright: (c) 2017 Broadcom.
 * Broadcom Proprietary and Confidential. All rights reserved.$
 */

#ifndef __CRPS_TYPES_H__
#define __CRPS_TYPES_H__

#ifdef BCM_DNX_SUPPORT
#include <soc/dnxc/swstate/sw_state_features.h>
#include <soc/dnxc/swstate/sw_state_defs.h>
#include <soc/dnxc/swstate/sw_state_attribute_packed.h>
#include <soc/dnxc/swstate/sw_state_linked_list.h>
#include <soc/dnxc/swstate/sw_state_hash_table.h>
#include <soc/dnxc/swstate/sw_state_multi_set.h>
#include <soc/dnxc/swstate/sw_state_defragmented_chunk.h>
#include <soc/dnxc/swstate/sw_state_occupation_bitmap.h>
#include <soc/dnxc/swstate/sw_state_cb_db.h>
#include <soc/dnxc/swstate/sw_state_ll_callbacks.h>
#include <soc/dnxc/swstate/sw_state_htb_callbacks.h>
#include <soc/dnxc/swstate/dnx_sw_state_logging.h>
#include <soc/dnxc/swstate/sw_state_diagnostics.h>
#include <include/soc/dnx/dnx_data/auto_generated/dnx_data_max_crps.h>
#include <include/bcm/stat.h>
/*
 * STRUCTs
 */

/**
 * defines the engine eviction configuration
 */
typedef struct {
    /**
     * defines the eviction type (internal host or external)
     */
    bcm_eviction_destination_type_t eviction_type;
    /**
     * defines the record eviction format
     */
    bcm_eviction_record_format_t record_format;
    /**
     * id which is added for each eviction record
     */
    int eviction_event_id;
    /**
     * sequential timer value
     */
    uint32 sequential_timer_value;
    /**
     * select which dma fifo to use for the eviction
     */
    int dma_fifo;
} dnx_engine_eviction_t;

/**
 * set of parameters unique for each type
 */
typedef struct {
    /**
     * defines if the type has admission for the engine as configured in API.
     */
    uint32 valid;
    /**
     * Counter offset for the type which is add in the counter mapping process, as configured in the API
     */
    uint32 offset;
    /**
     * start range
     */
    int start;
    /**
     * end range
     */
    int end;
    /**
     * type valid as configure in the hw. (Not all types valid in API, is valid in HW, it depends on the range)
     */
    int hw_valid;
} dnx_type_config_t;

/**
 * defines the engine interface configuration
 */
typedef struct {
    /**
     * next engine id (-1 for none). the start range of the next engine id will concatante to the current engine
     */
    int next_engine_id;
    /**
     * prev engine id (-1 for none). (this is not API parameter)
     */
    int prev_engine_id;
    /**
     * identify of the database that engine belong to
     */
    int database_id;
    /**
     * defines the engine mode configuration
     */
    bcm_stat_counter_interface_type_t src_type;
    /**
     * Select between different commands per source types
     */
    int command_id;
    /**
     * defines the counter format and the arithmetic operation
     */
    bcm_stat_counter_format_type_t format;
    /**
     * defines the size of the counter set (group size)
     */
    int counter_set_size;
    /**
     * defines the interface parameters for each type
     */
    dnx_type_config_t type[BCM_STAT_MAX_NUMBER_OF_OBJECT_TYPES];
} dnx_engine_interface_info_t;

/**
 * defines if engine input and output enable
 */
typedef struct {
    /**
     * enable input data to the engine
     */
    int counting_enable;
    /**
     * enable eviction/output data from the engine
     */
    int eviction_enable;
} dnx_engine_enablers_t;

/**
 * logical-object-id range admmited to an engine
 */
typedef struct {
    /**
     * first logical-object-id that is admmited for an engine.
     */
    uint32 logical_object_id_first;
    /**
     * last logical-object-id that is admmited for an engine.
     */
    uint32 logical_object_id_last;
} dnx_engine_log_obj_id_range_t;

/**
 * database which holds the engine configuration
 */
typedef struct {
    /**
     * indicates if the engine memory is used for meter or for counter.
     */
    int used_for_meter;
    /**
     * the configuration started, completed when config_done=TRUE
     */
    int config_started;
    /**
     * indicates that configuration is done.
     */
    int config_done;
    /**
     * input and output engine enable
     */
    dnx_engine_enablers_t enablers;
    /**
     * engine interface config
     */
    dnx_engine_interface_info_t interface;
    /**
     * eviction config
     */
    dnx_engine_eviction_t eviction;
    /**
     * logical-object-id range admmited to an engine
     */
    dnx_engine_log_obj_id_range_t log_obj_id_range;
    /**
     * SW cache counter memory. each HW counter has 2 SW counters
     */
    uint64* counter;
} dnx_engine_info_t;

/**
 * CRPS DB per unit
 */
typedef struct {
    /**
     * engine config. array of [core][engine_id]
     */
    dnx_engine_info_t** proc;
    /**
     * is BG thread enabled (updated SOC property or API)
     */
    int bg_thread_enable;
} dnx_crps_db_t;

#endif /* BCM_DNX_SUPPORT*/ 

#endif /* __CRPS_TYPES_H__ */
