<EMWEB_HEAD C='
#include "usmdb_mib_diffserv_private_api.h"
#include "usmdb_sim_api.h"
#include "web_diffserv.h"
'>
<EMWEB_IF ID=USMWEB_IF_LVL_HDR_NOT_REQ>
<!--
/*********************************************************************
*
* (C) Copyright Broadcom Corporation 2001-2007
*
**********************************************************************
*
* @filename diffserv_policy_attr_summ.html
*
* @purpose html content
*
* @comments 
*
* @create 01-Mar-2001
*
* @author gaunce
* @end
*
**********************************************************************/

**********************************************************************/
-->
</EMWEB_IF>
emweb:/USMWEB_PAGE_DTD_HEADER_GET;
<HTML>
<HEAD>
   emweb:/USMWEB_PAGE_META_DATA_GET; <!-- Style Sheet link and Meta data     -->
   <TITLE>emweb:/USMWEB_QOS_OEM_STRING_GET?1328;</TITLE>

</HEAD>

<BODY class = "bodyframeattributes">

<form method="post" EMWEB_NAME=attr_summ>

<!-- ----------------------------------------------------------------------- -->
<!--         Web page header                                                 -->
<!-- ----------------------------------------------------------------------- -->
 emweb:/USMWEB_QOS_PAGE_HEADER_1ST_GET?1328;   <!-- Includes page title          -->
 emweb:/USMWEB_QOS_PAGE_HEADER_2ND_GET?2708;   <!-- Includes help page link      -->
    
<table CLASS="tablecontent" emweb:/USMWEB_TABLE_CONTENT_ALIGN;>
<TR><TD>
<TABLE class="datatableattributes"  emweb:/USMWEB_DATA_TABLE_ALIGN;>

<THEAD>
<tr>
<TH class = "datatableheading" >emweb:/USMWEB_QOS_GET_NLS_STRING?10507;</TH><!-- Policy Name -->
<TH class = "datatableheading" >emweb:/USMWEB_QOS_GET_NLS_STRING?10508;</TH><!-- Policy Type -->
<TH class = "datatableheading" >emweb:/USMWEB_QOS_GET_NLS_STRING?2129;</TH><!-- Class Name -->
<TH class = "datatableheading" >emweb:/USMWEB_QOS_GET_NLS_STRING?10581;</TH><!-- Attribute -->
<TH class = "datatableheading" >emweb:/USMWEB_QOS_GET_NLS_STRING?10583;</TD><!-- Attribute Details-->
</tr>
</THEAD>

 
<EMWEB_ITERATE
 C='
   static L7_uint32 prevPolicyId, prevPolicyInstId, prevPolicyAttrId;
   L7_uint32 nextPolicyId, nextPolicyInstId, nextPolicyAttrId, entryType;
   static usmWeb_diffServPolicyAttrEntry_t entry;
   static L7_BOOL nextInst;
   static L7_BOOL hadAttr;
   L7_uint32 unit;
   
   unit = usmDbThisUnitGet();
   if (ewsContextIterator(ewsContext) == NULL)
   {
     prevPolicyId = 0;
     prevPolicyInstId = 0;
     prevPolicyAttrId = 0;
     nextInst = L7_TRUE;
     hadAttr = L7_FALSE;

     if (usmDbDiffServPolicyInstGetNext(unit, 
                               prevPolicyId, prevPolicyInstId, 
                               &nextPolicyId, &nextPolicyInstId) == L7_SUCCESS)
     {
       prevPolicyId = nextPolicyId;
       prevPolicyInstId = nextPolicyInstId;
       prevPolicyAttrId = 0;
       nextInst = L7_TRUE;
     }
     else
       return NULL;
   }
   
   if (nextInst == L7_FALSE)
     return NULL;

   if ((usmDbDiffServPolicyAttrGetNext(unit, 
                 prevPolicyId, prevPolicyInstId, prevPolicyAttrId,
                 &nextPolicyId, &nextPolicyInstId, &nextPolicyAttrId) == L7_SUCCESS) &&
       (nextPolicyId == prevPolicyId) && 
       (nextPolicyInstId == prevPolicyInstId))
   {
       hadAttr = L7_TRUE;
       if (usmDbDiffServPolicyAttrStmtEntryTypeGet(unit, nextPolicyId,
                    nextPolicyInstId, nextPolicyAttrId, &entryType) == L7_SUCCESS)
       {
         prevPolicyId = nextPolicyId;
         prevPolicyInstId = nextPolicyInstId;
         prevPolicyAttrId = nextPolicyAttrId;
         entry.policyId = nextPolicyId;
         entry.policyInstId = nextPolicyInstId;
         entry.policyAttrId = nextPolicyAttrId;
         entry.type = entryType;

         return (const void *) &entry;
       }
   }
   else
   {
     if (hadAttr == L7_FALSE)
     {
       entry.policyId = prevPolicyId;
       entry.policyInstId = prevPolicyInstId;
       entry.policyAttrId = prevPolicyAttrId;
       entry.type = 0;
     }
     else
     {
       entry.policyId = 0;
       entry.policyInstId = 0;
       entry.policyAttrId = 0;
       entry.type = 0;
     }

     if (usmDbDiffServPolicyInstGetNext(unit, 
                            prevPolicyId, prevPolicyInstId, 
                            &nextPolicyId, &nextPolicyInstId) == L7_SUCCESS)
     {
       prevPolicyId = nextPolicyId;
       prevPolicyInstId = nextPolicyInstId;
       prevPolicyAttrId = 0;
       nextInst = L7_TRUE;
       hadAttr = L7_FALSE;
     }
     else
       nextInst = L7_FALSE;

     return (const void *) &entry;
   }

   '>
      
   <EMWEB_STRING C='
   
   usmWeb_diffServPolicyAttrEntry_t policyAttr_itr;
   L7_uint32 unit;
   
   unit = usmDbThisUnitGet();
   if (ewsContextIterator(ewsContext) == NULL)
     memset(&policyAttr_itr, 0x00, sizeof(usmWeb_diffServPolicyAttrEntry_t));
   else 
     memcpy(&policyAttr_itr, (usmWeb_diffServPolicyAttrEntry_t *) ewsContextIterator(ewsContext), 
     sizeof(usmWeb_diffServPolicyAttrEntry_t));  

   return usmWebDiffServPolicyAttrInfoGet(unit, policyAttr_itr);
   '>
  
</EMWEB_ITERATE> 



</TABLE>
</TD></TR>

<TR>
<td colspan=5 emweb:/USMWEB_BUTTON_ALIGN;>
<input class="buttonattributes" type="submit" name="Refresh">
</TD></TR>

</TABLE>


<!-- ----------------------------------- -->
<!--         Web page footer             -->
<!-- ----------------------------------- -->
 emweb:/USMWEB_PAGE_FOOTER_GET;

</FORM>
     
</BODY>

</HTML>

     


