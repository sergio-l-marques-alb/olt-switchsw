<EMWEB_HEAD C='
#include "usmdb_mib_ospf_api.h"
#include "usmdb_sim_api.h"
#include "l3_web.h"
'>
<EMWEB_IF ID=USMWEB_IF_LVL_HDR_NOT_REQ>
<!--
/*********************************************************************
*
* (C) Copyright Broadcom Corporation 2001-2007
*
**********************************************************************
*
* @filename file_download.html
*
* @purpose html content
*
* @comments 
*
* @create 01-Mar-2001
*
* @author gaunce
* @end
*
**********************************************************************/

**********************************************************************/
-->
</EMWEB_IF>

emweb:/USMWEB_PAGE_DTD_HEADER_GET;
<HTML>
<HEAD>
   emweb:/USMWEB_PAGE_META_DATA_GET; <!-- Style Sheet link and Meta data     -->
   <TITLE>emweb:/USMWEB_ROUTING_OEM_STRING_GET?1211;</TITLE>
<script type='text/javascript' language='JavaScript'>

function screen_refresh()
{
    document.forms[0].submit();
}

function DisplayErrorMsg()
//******************************************************************************
//* Purpose: Display an input error message.
//* Return:  none
//******************************************************************************
{
    alert(document.forms[0].err_msg.value);
}

function CheckError()
{
   if (document.forms[0].err_flag.value == 1) {
      DisplayErrorMsg();
   }
}

</script>
</HEAD>

<BODY class ="bodyframeattributes" onLoad='CheckError()' >

<form method="post" EMWEB_NAME=ospf_lsdb_summ>

<!-- ----------------------------------------------------------------------- -->
<!--         Web page header                                                 -->
<!-- ----------------------------------------------------------------------- -->
 emweb:/USMWEB_ROUTING_PAGE_HEADER_1ST_GET?1211;   <!-- Includes page title          -->
 emweb:/USMWEB_ROUTING_PAGE_HEADER_2ND_GET?1284;   <!-- Includes help page link      -->


<table CLASS="tablecontent" emweb:/USMWEB_TABLE_CONTENT_ALIGN;>

<TR></TR> 
<TR></TR>
<TR></TR>

<TR><TD COLSPAN=8>
<TABLE class="datatableattributes"  emweb:/USMWEB_DATA_TABLE_ALIGN;>

<THEAD>
<TR>

 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1619; </TH>  <!-- Router ID -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1537; </TH>  <!-- area id -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1635; </TH>  <!-- LS ID -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1634; </TH>  <!-- LSA Type -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1539; </TH>  <!-- Age -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1636; </TH>  <!-- Sequence -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1540; </TH>  <!-- Checksum -->
 <TH class = "datatableheading" >emweb:/USMWEB_ROUTING_GET_NLS_STRING?1637; </TH>  <!-- Options -->
</TR>
</THEAD>


<EMWEB_ITERATE
 C='
   
   static L7_int32 type;
   static L7_uint32 routerId;
   static L7_uint32 LsId;
   static L7_uint32 areaId;
   static usmWeb_LsdbInfo_t lsdb_entry;
   static L7_RC_t rc;
   static L7_BOOL getExt;
   L7_uint32  unit;
   L7_ospfLsdbEntry_t Lsa;
   unit = usmDbThisUnitGet();

   if (ewsContextIterator(ewsContext) == NULL)
   {
      areaId = 0;
      routerId = 0;
	  LsId = 0;
	  type = 0;
      getExt = L7_FALSE;
   }

  
   if (getExt == L7_FALSE)
   {
      rc = usmDbOspfLsdbEntryNext(unit, &areaId, &type, &LsId, &routerId, &Lsa);
      if (rc != L7_SUCCESS)
      {
        areaId = 0;
        routerId = 0;
        LsId = 0;
        type = 0;
        getExt = L7_TRUE;
      }
   }
  
  /*get the ext LSDB entries*/
   if (getExt == L7_TRUE)
   {
      rc = usmDbOspfExtLsdbEntryNext(unit, &type, &LsId, &routerId, &Lsa);
   }
              
   if (rc == L7_SUCCESS)
   {
     lsdb_entry.routerId = routerId;
     lsdb_entry.areaId = areaId;
     lsdb_entry.type = type;
     lsdb_entry.Lsid = LsId;
     return (const void *) &(lsdb_entry);
   }
   else
   {
     return NULL;
   }
   '>
   
   <EMWEB_STRING C='
   extern L7_char8 *usmWebLSDBTableInfoGet(L7_uint32 unit, usmWeb_LsdbInfo_t lsdb_entry);
   
   static usmWeb_LsdbInfo_t lsdb_entry_itr;
   L7_uint32 unit;
   unit = usmDbThisUnitGet();
                     
   if (ewsContextIterator(ewsContext) == NULL)
   {     
     return NULL;
   }
   else 
   {
     memcpy(&lsdb_entry_itr, (usmWeb_LsdbInfo_t *) ewsContextIterator(ewsContext), sizeof(usmWeb_LsdbInfo_t));  
   }
   return usmWebLSDBTableInfoGet(unit, lsdb_entry_itr);
   '>
  
</EMWEB_ITERATE>

</TABLE></TD></TR> 

<TR><TD COLSPAN=2>
<INPUT TYPE="hidden" NAME="err_flag" SIZE="16" MAXLENGTH="15" EMWEB_TYPE=DECIMAL_UINT>
<INPUT TYPE="hidden" NAME="err_msg" SIZE="80" MAXLENGTH="79" >
</TD></TR>

<TR><td colspan=2 emweb:/USMWEB_BUTTON_ALIGN;><BR>
<input class="buttonattributes" type="submit" name="Refresh" VALUE="Refresh"> 
</TD>
</TR> 

</TABLE>

<!-- ----------------------------------- -->
<!--         Web page footer             -->
<!-- ----------------------------------- -->
 emweb:/USMWEB_PAGE_FOOTER_GET;

</form>

</BODY>
</HTML>


