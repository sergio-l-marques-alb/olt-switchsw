//******************************************************************************
//
//******************************************************************************

#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/mman.h>
#include <stdlib.h>

#include "readenv.h"

//******************************************************************************
// Variaveis globais
//******************************************************************************


//******************************************************************************
//
//******************************************************************************

int
usage( char *app ) 
{
  printf(
         "Usage: %s var\n"
         ,app
        );
  return (0);
}

//******************************************************************************

int
read_val_hex( char *str , long min , long max , long *value )
{
  long   lvalue;

  lvalue = strtol( str , (char **)NULL , 16 );
  if ( ( lvalue < min ) || ( lvalue > max ) ) return (-1);
  *value = lvalue;
  return (0);
}

//******************************************************************************
// MAIN
//******************************************************************************

int
main(int argc, char* argv[])
{
  //long            i;
  char            str[512];

  if ( argc != 2 ) {
    usage( argv[0] );
    exit(0);
  }
  str[0] = '\0';
  open_bootenv();
  if ( !strcmp( "=" , argv[1] ) ) {
    print_bootenv();
  }
  else {
    read_bootenv( argv[1] , str );  
    printf( "%s\n" , str ); 
  }
  close_bootenv();

  exit(0);
}                           

//******************************************************************************

